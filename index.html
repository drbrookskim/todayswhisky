<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤ - Today's Whiskey</title>
    
    <!-- SEO & Social Meta Tags -->
    <meta name="description" content="MBTIì™€ ë°”ì´ì˜¤ë¦¬ë“¬ì„ ê²°í•©í•œ ì§€ëŠ¥í˜• ìœ„ìŠ¤í‚¤ ì¶”ì²œ ì—”ì§„">
    <meta property="og:title" content="ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤ - Today's Whiskey">
    <meta property="og:description" content="ë‹¹ì‹ ì˜ ì‹¬ë¦¬ì  ê¸°ì§ˆê³¼ ì‹ ì²´ ë¦¬ë“¬ì— ë§ì¶˜ ìµœì ì˜ í•œ ì”ì„ ì œì•ˆí•©ë‹ˆë‹¤.">
    <meta property="og:type" content="website">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- External Dependencies via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s ease; }
        .glass-effect { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
        h1, h2, h3, h4, .title-font, .italic-off, button, span, p { font-style: normal !important; }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease forwards; }
    </style>
</head>
<body class="bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        /**
         * --- Lucide Icon Component ---
         * Reactì˜ DOM ê´€ë¦¬ì™€ ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ useRefë¥¼ ì‚¬ìš©í•˜ì—¬ Lucideê°€ ê´€ë¦¬í•˜ëŠ” ì „ìš© ì˜ì—­ì„ ìƒì„±í•©ë‹ˆë‹¤.
         */
        const Icon = ({ name, size = 24, className = "" }) => {
            const wrapperRef = useRef(null);

            useEffect(() => {
                if (wrapperRef.current && window.lucide) {
                    // ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— Lucide ì „ìš© ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
                    wrapperRef.current.innerHTML = `<i data-lucide="${name}" style="width: ${size}px; height: ${size}px;" class="${className}"></i>`;
                    window.lucide.createIcons({
                        parent: wrapperRef.current
                    });
                }
            }, [name, size, className]);

            return <span ref={wrapperRef} className="inline-flex items-center justify-center shrink-0" />;
        };

        /**
         * --- ë°ì´í„° ë° ìƒìˆ˜ ---
         */
        const PRICE_RANGES = {
            tier_1: { label: { ko: "10ë§Œì› ì´í•˜", en: "Under 100k KRW" }, min: 0, max: 100000 },
            tier_2: { label: { ko: "10~20ë§Œì›", en: "100k~200k KRW" }, min: 100001, max: 200000 },
            tier_3: { label: { ko: "20~50ë§Œì›", en: "200k~500k KRW" }, min: 200001, max: 500000 },
        };

        const MOOD_EXCLUSIONS = {
            anger: ['joy', 'trust', 'love', 'anticipation'],
            joy: ['anger', 'sadness', 'disgust', 'despair'],
            sadness: ['joy', 'surprise'],
            fear: ['trust', 'anticipation'],
            trust: ['anger', 'fear', 'disgust'],
            disgust: ['joy', 'trust', 'love'],
            surprise: ['sadness', 'fear'],
            anticipation: ['anger', 'fear'],
            love: ['anger', 'disgust', 'despair'],
            despair: ['joy', 'love']
        };

        const MBTI_ARCHETYPES = {
            INTJ: { title: { ko: "ë…ë¦½ ë³‘ì…ì (IB)", en: "Independent Bottler" }, icon: "ğŸ”¬", desc: { ko: "í¬ê·€í•˜ê³  ê³„ì‚°ì ì´ë©° ì»¨ì…‰ì´ ëª…í™•í•œ ë³´í‹€", en: "Rare, calculated, and conceptually clear" } },
            INTP: { title: { ko: "ë°ì´í„° ì¤‘ì‹¬ ëª°íŠ¸", en: "Data-Driven Malt" }, icon: "ğŸ§ª", desc: { ko: "í™”í•™ì  ë°ì´í„°ì™€ ê¸°ìˆ ì  ì‚¬ì–‘ì— ì§‘ì¤‘", en: "Focused on chemical data and technical specs" } },
            ENTJ: { title: { ko: "íŒŒì›Œí•˜ìš°ìŠ¤", en: "Powerhouse" }, icon: "ğŸ‘‘", desc: { ko: "ì••ë„ì ì¸ ìœ„ì—„ê³¼ ë†’ì€ ë„ìˆ˜ì˜ ëª…í’ˆ", en: "Overwhelming dignity and high ABV luxury" } },
            ENTP: { title: { ko: "ì¥ë¥´ íŒŒê´´ì", en: "Genre Buster" }, icon: "ğŸŒ€", desc: { ko: "ë…íŠ¹í•œ ìºìŠ¤í¬ í”¼ë‹ˆì‹œë‚˜ ì‹¤í—˜ì ì¸ ìœ„ìŠ¤í‚¤", en: "Unique cask finishes or experimental attempts" } },
            INFJ: { title: { ko: "ì˜í˜¼ì„ ë‹´ì€ ë¹ˆí‹°ì§€", en: "Soulful Vintage" }, icon: "ğŸ•¯ï¸", desc: { ko: "ì¡°ìš©í•˜ì§€ë§Œ ê¹Šì€ ìš¸ë¦¼ì˜ ì—­ì‚¬ì  ë³´í‹€", en: "Quiet but deep resonance with history" } },
            INFP: { title: { ko: "ì‹œì ì¸ ì¦ë¥˜ì†Œ", en: "Poetic Distillery" }, icon: "ğŸ¨", desc: { ko: "ì˜ˆìˆ ì ì´ê³  ê°ì„±ì ì¸ ê³µê°ëŒ€ í˜•ì„±", en: "Artistic and emotional connection" } },
            ENFJ: { title: { ko: "ëª¨ë‘ì˜ ë¦¬ë”", en: "The Leader" }, icon: "â˜€ï¸", desc: { ko: "ë”°ëœ»í•˜ê³  í™”ì‚¬í•˜ë©° ëˆ„êµ¬ë‚˜ ì¢‹ì•„í•˜ëŠ” ë§›", en: "Warm, bright, and universally loved" } },
            ENFP: { title: { ko: "ì„ ìƒ¤ì¸ ëª°íŠ¸", en: "Sunshine Malt" }, icon: "ğŸŒˆ", desc: { ko: "í™œê¸°ì°¨ê³  ê³¼ì¼í–¥ì´ í’ë¶€í•œ ì‹¤í—˜ì  ë¸”ë Œë“œ", en: "Vibrant, fruity experimental blends" } },
            ISTJ: { title: { ko: "ê³¨ë“œ ìŠ¤íƒ ë‹¤ë“œ", en: "Gold Standard" }, icon: "ğŸ“", desc: { ko: "ë³€í•¨ì—†ëŠ” í’ˆì§ˆê³¼ ì‹ ë¢°ì˜ ìƒì§•", en: "Unwavering quality and trust" } },
            ISFJ: { title: { ko: "ì»´í¬íŠ¸ ëª°íŠ¸", en: "Comfort Malt" }, icon: "ğŸ§¸", desc: { ko: "ë‹¬ì½¤í•˜ê³  ë¶€ë“œëŸ¬ìš°ë©° í–¥ìˆ˜ë¥¼ ìê·¹", en: "Sweet, smooth, and nostalgic" } },
            ESTJ: { title: { ko: "í—¤ë¦¬í‹°ì§€ ë¸Œëœë“œ", en: "Heritage Brand" }, icon: "ğŸ›ï¸", desc: { ko: "ì •í†µì„±ì´ ê°•í•˜ê³  ëŒ€ë‹´í•œ ìŠ¤íƒ€ì¼", en: "Strong legitimacy and bold style" } },
            ESFJ: { title: { ko: "í´ë˜ì‹ ë¸”ë Œë“œ", en: "Classic Blend" }, icon: "ğŸ¤", desc: { ko: "ì‚¬êµì ì´ê³  ê· í˜• ì¡íŒ ë²”ìš©ì„±", en: "Social and balanced versatility" } },
            ISTP: { title: { ko: "ë©”ì¹´ë‹ˆì»¬ í¬ë˜í”„íŠ¸", en: "Mechanical Craft" }, icon: "ğŸ› ï¸", desc: { ko: "ì§ê´€ì ì´ê³  ê±°ì¹œ ë§¤ë ¥, ê¸°ìˆ ì  ì™„ì„±ë„", en: "Intuitive, raw charm, technical perfection" } },
            ISFP: { title: { ko: "ì•„í‹°ìŠ¤í‹± í¬ë˜í”„íŠ¸", en: "Artistic Craft" }, icon: "ğŸ–¼ï¸", desc: { ko: "ì‹œê°ì ìœ¼ë¡œ ì•„ë¦„ë‹µê³  ìœ ë‹ˆí¬í•œ í’ë¯¸", en: "Visually beautiful and unique flavor" } },
            ESTP: { title: { ko: "ë³¼ë“œ ë¼ì´(Rye)", en: "Bold Rye" }, icon: "ğŸ”¥", desc: { ko: "ìŠ¤íŒŒì´ì‹œí•˜ê³  ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” ëª¨í—˜", en: "Spicy, energetic, and adventurous" } },
            ESFP: { title: { ko: "íŒŒí‹° ìŠ¤íƒ€í„°", en: "Party Starter" }, icon: "ğŸ‰", desc: { ko: "í™”ë ¤í•˜ê³  ì¦ê±°ìš´ ë¶„ìœ„ê¸°ì˜ ìœ„ìŠ¤í‚¤", en: "Flashy and joyful atmosphere" } },
        };

        const WHISKEY_DATABASE = [
            { id: "T1_01", name: "Monkey Shoulder", price: 55000, abv: 40, tags: ["ë°”ë‹ë¼", "ì˜¤ë Œì§€", "ê¿€"], mbti: ["ENFP", "ESFP"], mood: ["joy", "anticipation"] },
            { id: "T1_02", name: "Buffalo Trace", price: 65000, abv: 45, tags: ["ì¹´ë¼ë©œ", "ë°”ë‹ë¼", "ì˜¤í¬"], mbti: ["ESTJ", "ESFJ"], mood: ["trust", "joy"] },
            { id: "T1_03", name: "Talisker 10", price: 78000, abv: 45.8, tags: ["í”¼íŠ¸", "ì†Œê¸ˆ", "í˜í¼"], mbti: ["ISTP", "INTJ"], mood: ["anger", "sadness"] },
            { id: "T1_04", name: "Glendronach 12", price: 95000, abv: 43, tags: ["ì…°ë¦¬", "ê³¼ì¼", "ë‹¬ì½¤"], mbti: ["ENFJ", "ISFJ"], mood: ["love", "trust"] },
            { id: "T1_05", name: "Wild Turkey 101", price: 52000, abv: 50.5, tags: ["ìŠ¤íŒŒì´ì‹œ", "ë°”ë‹ë¼", "ëŒ€ë‹´í•œ"], mbti: ["ESTJ", "ESTP"], mood: ["anger", "joy"] },
            { id: "T2_01", name: "Ardbeg Corryvreckan", price: 185000, abv: 57.1, tags: ["í”¼íŠ¸", "ìŠ¤ëª¨í‚¤", "ë‹¤í¬"], mbti: ["INTJ", "ENTP"], mood: ["anger", "surprise"] },
            { id: "T2_02", name: "Balvenie 12 Doublewood", price: 115000, abv: 40, tags: ["í—ˆë‹ˆ", "ì˜¤í¬", "ë¶€ë“œëŸ¬ì›€"], mbti: ["ISFJ", "ISTJ"], mood: ["trust", "joy"] },
            { id: "T2_03", name: "Macallan 12 Sherry Oak", price: 155000, abv: 40, tags: ["ì…°ë¦¬", "ê±´í¬ë„", "í´ë˜ì‹"], mbti: ["ISTJ", "ENFJ"], mood: ["trust", "love"] },
            { id: "T2_04", name: "Bruichladdich Classic Laddie", price: 110000, abv: 50, tags: ["ë¯¸ë„¤ë„", "ê½ƒí–¥", "ë°ì´í„°"], mbti: ["INTP", "ENTP"], mood: ["surprise", "joy"] },
            { id: "T2_05", name: "Laphroaig Quarter Cask", price: 130000, abv: 48, tags: ["í”¼íŠ¸", "ìš”ì˜¤ë“œ", "ê°•ë ¬í•œ"], mbti: ["ISTP", "INTJ"], mood: ["disgust", "anger"] },
            { id: "T3_01", name: "Glendronach 18", price: 420000, abv: 46, tags: ["ë‹¤í¬ì…°ë¦¬", "ì´ˆì½œë¦¿", "ë¦¬ì¹˜"], mbti: ["ENFJ", "INFJ"], mood: ["love", "despair"] },
            { id: "T3_02", name: "Hibiki Japanese Harmony", price: 230000, abv: 43, tags: ["ì„¬ì„¸í•œ", "í”Œë¡œëŸ´", "ìš°ì•„í•œ"], mbti: ["ISFP", "INFP"], mood: ["joy", "love"] },
            { id: "T3_03", name: "Springbank 15", price: 480000, abv: 46, tags: ["ì˜¤ì¼", "ì†Œê¸ˆ", "ë³µì¡í•œ"], mbti: ["INFP", "INTJ"], mood: ["surprise", "sadness"] },
            { id: "T3_04", name: "WhistlePig 12 Rye", price: 280000, abv: 43, tags: ["ë¼ì´", "ìŠ¤íŒŒì´ìŠ¤", "ë³µì¡í•œ"], mbti: ["ESTP", "ENTP"], mood: ["anticipation", "joy"] },
            { id: "T3_05", name: "Lagavulin 16", price: 195000, abv: 43, tags: ["í”¼íŠ¸", "ìŠ¤ëª¨í‚¤", "ê¹Šì€"], mbti: ["INTJ", "ISTP"], mood: ["sadness", "trust"] },
        ];

        const SUMMARY_INTROS = [
            { ko: "í•œ ë§ˆë””ë¡œ ë§ì”€ë“œë¦¬ë©´,", en: "In a word," },
            { ko: "ê²°ë¡ ì ìœ¼ë¡œ ë§ì”€ë“œë¦¬ë©´,", en: "In conclusion," },
            { ko: "ê°„ë‹¨íˆ ìš”ì•½í•˜ìë©´,", en: "Simply put," },
            { ko: "í•µì‹¬ë§Œ ì •ë¦¬í•´ ë³´ìë©´,", en: "To sum it up," },
            { ko: "ì†Œë¯ˆë¦¬ì—ì˜ í•œ ì¤„ í‰ì€,", en: "The sommelier's takeaway is," },
            { ko: "ì •ë¦¬í•´ ë§ì”€ë“œë¦¬ë©´,", en: "Wrapping it up," }
        ];

        const MBTI_SUMMARIES = [
            { ko: "ë‹¹ì‹ ì˜ ë³¸ì—°ì˜ ì„±í–¥ì— ê°€ì¥ ì¶©ì‹¤í•œ, ê°€ì¥ ì•ˆì „í•˜ê³  í™•ì‹¤í•œ ì„ íƒì…ë‹ˆë‹¤.", en: "it's the safest and surest choice that stays true to your original nature." },
            { ko: "ë³¸ì§ˆì  ê¸°ì§ˆê³¼ ì™„ë²½íˆ ê³µëª…í•˜ëŠ” í’ë¯¸ë¡œ, ê¹Šì€ ë‚´ì  í‰ì˜¨ì„ ì„ ì‚¬í•  í•œ ì”ì…ë‹ˆë‹¤.", en: "it's a glass that resonates with your core essence, offering deep inner peace." },
            { ko: "ë‹¹ì‹ ì˜ ì‹¬ë¦¬ì  í‹€ê³¼ ìœ„ìŠ¤í‚¤ì˜ ê°œì„±ì´ ì¡°í™”ë¡­ê²Œ ë§ë‹¿ì€ ì •ì„ì ì¸ ì œì•ˆì…ë‹ˆë‹¤.", en: "it's a classic choice where your psychological frame meets the whiskey's character." },
            { ko: "ìì•„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë©° ê°ê°ì  ë³´ìƒì„ ì¶©ì¡±í•´ ì¤„ ê°€ì¥ ì´ìƒì ì¸ ì¡°í™”ì…ë‹ˆë‹¤.", en: "it's the ideal harmony to satisfy sensory rewards while maintaining self-consistency." }
        ];

        const MOOD_SUMMARIES = [
            { ko: "í‰ì†Œì™€ëŠ” ë‹¤ë¥¸ íŠ¹ë³„í•œ í’ë¯¸ë¡œ ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ í™˜ê¸°í•´ ì¤„ ë°˜ì „ì˜ í•œ ì”ì…ë‹ˆë‹¤.", en: "it's a refreshing wildcard that will uplift today's mood with an extraordinary flavor." },
            { ko: "ê¸°ì¡´ì˜ í‹€ì„ ê¹¨ëŠ” ëŒ€ë‹´í•œ ì„ íƒì´ ì˜¤ëŠ˜ì˜ ê°ê°ì„ ìƒˆë¡­ê²Œ ì¼ê¹¨ì›Œ ì¤„ ê²ƒì…ë‹ˆë‹¤.", en: "it's a bold choice that breaks the mold and reawakens your senses today." },
            { ko: "ì˜ˆìƒì„ ë’¤ì—ëŠ” í’ë¯¸ì˜ ë³€ì£¼ê°€ ë‹¹ì‹ ì˜ ì‹ ê²½ê³„ë¥¼ ì¦ê²ê²Œ ìê·¹í•  ì¡°í™”ì…ë‹ˆë‹¤.", en: "it's a surprising variation of flavors that will playfully stimulate your nervous system." },
            { ko: "ìµìˆ™í•¨ì—ì„œ ë²—ì–´ë‚œ ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ìœ„í•œ, ì™„ë²½í•˜ê³  ê°ê°ì ì¸ ì¼íƒˆì…ë‹ˆë‹¤.", en: "it's a perfect sensory escape for a mood that seeks something beyond the familiar." },
            { ko: "ê³ ì°©ëœ ìƒê°ì˜ íë¦„ì„ ì „í™˜í•´ ì¤„, ìƒë™ê° ë„˜ì¹˜ëŠ” ì˜¤ëŠ˜ì˜ ë°˜ì „ì…ë‹ˆë‹¤.", en: "it's a vibrant twist that will shift the flow of stuck thoughts today." }
        ];

        const MOODS = [
            { id: "anger", icon: "ğŸ’¢", label: { ko: "ë¶„ë…¸", en: "Anger" }, tags: ["í”¼íŠ¸", "ìŠ¤ëª¨í‚¤", "ìŠ¤íŒŒì´ì‹œ", "í˜í¼"] },
            { id: "joy", icon: "âœ¨", label: { ko: "ê¸°ì¨", en: "Joy" }, tags: ["ì‹œíŠ¸ëŸ¬ìŠ¤", "í—ˆë‹ˆ", "í”Œë¡œëŸ´", "ë°”ë‹ë‚˜"] },
            { id: "sadness", icon: "ğŸŒ§ï¸", label: { ko: "ìŠ¬í””", en: "Sadness" }, tags: ["í•˜ì´ëœë“œ", "ê·¸ë ˆì¸", "ë¯¸ë„¤ë„", "ê·¸ë˜ìŠ¤"] },
            { id: "fear", icon: "ğŸŒ‘", label: { ko: "ë‘ë ¤ì›€", en: "Fear" }, tags: ["ì•Œì½”ì˜¬", "ë©”ë””ì»¬", "ì˜ëª°íŠ¸", "íƒ€ë‹Œ"] },
            { id: "trust", icon: "ğŸ¤", label: { ko: "ì‹ ë¢°", en: "Trust" }, tags: ["ìŠ¤í˜ì´ì‚¬ì´ë“œ", "ëª°í‹°", "í¬ë¦¬ë¯¸", "ì˜¤í¬"] },
            { id: "disgust", icon: "ğŸ¤¢", label: { ko: "í˜ì˜¤", en: "Disgust" }, tags: ["ìš”ì˜¤ë“œ", "ì–´ìŠ¤", "ë¨¸ìŠ¤í‚¤", "ë¹„í„°"] },
            { id: "surprise", icon: "âš¡", label: { ko: "ë†€ëŒ", en: "Surprise" }, tags: ["ìº„ë²¨íƒ€ìš´", "ë³µì¡", "ì§„ì €", "í‘í¬"] },
            { id: "anticipation", icon: "ğŸ”®", label: { ko: "ê¸°ëŒ€", en: "Anticipation" }, tags: ["ë¼ì´íŠ¸", "í”Œë¡œëŸ´", "í”„ë£¨í‹°", "ìŠ¤íŒŒì´ìŠ¤"] },
            { id: "love", icon: "ğŸ’–", label: { ko: "ì‚¬ë‘", en: "Love" }, tags: ["ì…°ë¦¬", "ì´ˆì½œë¦¿", "í—ˆë‹ˆ", "ë¡±í”¼ë‹ˆì‰¬"] },
            { id: "despair", icon: "ğŸ¥€", label: { ko: "ì ˆë§", en: "Despair" }, tags: ["í—¤ë¹„ì…°ë¦¬", "ë‹¤í¬ì´ˆì½œë¦¿", "ë¹„í„°", "í’€ë°”ë””"] }
        ];

        /**
         * --- UTILITY FUNCTIONS ---
         */
        const calculateBiorhythm = (dateStr, mbti, moods) => {
            const date = new Date(dateStr);
            const start = new Date(date.getFullYear(), 0, 1);
            const dayOfYear = Math.floor((date - start) / (1000 * 60 * 60 * 24));
            const mbtiSeed = mbti.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % 30;
            const moodSeed = moods.length * 10;
            const t = dayOfYear + mbtiSeed + moodSeed;
            const p = Math.sin((2 * Math.PI * t) / 23);
            const e = Math.sin((2 * Math.PI * t) / 28);
            const i = Math.sin((2 * Math.PI * t) / 33);
            const b = (p + e + i) / 3;
            return { p, e, i, b };
        };

        const getBioStatus = (val) => {
            if (val > 0.6) return { label: "Best", color: "text-amber-500" };
            if (val > 0.2) return { label: "Good", color: "text-emerald-500" };
            if (val >= -0.2) return { label: "Neutral", color: "text-slate-400" };
            if (val >= -0.6) return { label: "Bad", color: "text-orange-500" };
            return { label: "Worst", color: "text-rose-500" };
        };

        const getArchetypeStatus = (score) => {
            if (score >= 700) return { label: "Best", color: "text-amber-500" };
            if (score >= 400) return { label: "Good", color: "text-emerald-500" };
            if (score >= 200) return { label: "Neutral", color: "text-slate-400" };
            if (score > 0) return { label: "Bad", color: "text-orange-500" };
            return { label: "Worst", color: "text-rose-500" };
        };

        const formatDate = (dateStr) => {
            const date = new Date(dateStr);
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}ë…„ ${m}ì›” ${d}ì¼`;
        };

        /**
         * --- CUSTOM CALENDAR POPUP COMPONENT ---
         */
        const CalendarPopup = ({ selectedDate, onSelect, onClose, isDarkMode }) => {
            const [viewDate, setViewDate] = useState(new Date(selectedDate));
            const currentYear = viewDate.getFullYear();
            const currentMonth = viewDate.getMonth();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();

            const handlePrevMonth = () => setViewDate(new Date(currentYear, currentMonth - 1, 1));
            const handleNextMonth = () => setViewDate(new Date(currentYear, currentMonth + 1, 1));

            const days = [];
            for (let i = 0; i < firstDayOfMonth; i++) days.push(null);
            for (let d = 1; d <= daysInMonth; d++) days.push(d);

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in" onClick={onClose}>
                    <div className={`w-full max-w-sm rounded-[32px] border overflow-hidden shadow-2xl ${isDarkMode ? 'bg-slate-900 border-slate-800 text-white' : 'bg-white border-slate-200 text-slate-900'}`} onClick={(e) => e.stopPropagation()}>
                        <div className="p-6 space-y-6">
                            <div className="flex items-center justify-between">
                                <h3 className="text-xl font-black title-font">{currentYear}ë…„ {currentMonth + 1}ì›”</h3>
                                <div className="flex gap-1">
                                    <button onClick={handlePrevMonth} className="p-2 rounded-xl hover:bg-amber-500/10 transition-colors"><Icon name="chevron-left" size={20}/></button>
                                    <button onClick={handleNextMonth} className="p-2 rounded-xl hover:bg-amber-500/10 transition-colors"><Icon name="chevron-right" size={20}/></button>
                                </div>
                            </div>
                            <div className="grid grid-cols-7 text-center">
                                {['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '].map(d => (<span key={d} className="text-[10px] font-bold opacity-40 uppercase py-2">{d}</span>))}
                                {days.map((day, idx) => {
                                    if (day === null) return <div key={`empty-${idx}`} />;
                                    const isSelected = new Date(selectedDate).toDateString() === new Date(currentYear, currentMonth, day).toDateString();
                                    return (
                                        <button key={day} onClick={() => { const newDate = new Date(currentYear, currentMonth, day); onSelect(newDate.toISOString().split('T')[0]); }} className={`aspect-square flex items-center justify-center text-sm font-bold rounded-xl transition-all ${isSelected ? 'bg-amber-500 text-slate-950 scale-110' : 'hover:bg-amber-500/10'}`}>{day}</button>
                                    );
                                })}
                            </div>
                            <button onClick={onClose} className="w-full py-4 rounded-2xl bg-slate-800/50 dark:text-white text-slate-900 text-xs font-bold uppercase tracking-widest hover:bg-slate-800 transition-colors">Close</button>
                        </div>
                    </div>
                </div>
            );
        };

        /**
         * --- MAIN APP COMPONENT ---
         */
        function App() {
            const [isDarkMode, setIsDarkMode] = useState(true);
            const [lang, setLang] = useState('ko');
            const [priceTier, setPriceTier] = useState('tier_2');
            const [mbti, setMbti] = useState('INTJ');
            const [selectedMoods, setSelectedMoods] = useState([]);
            const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
            const [showCalendar, setShowCalendar] = useState(false);
            const [result, setResult] = useState(null);
            const [loading, setLoading] = useState(false);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', isDarkMode);
            }, [isDarkMode]);

            const biorhythm = useMemo(() => calculateBiorhythm(date, mbti, selectedMoods), [date, mbti, selectedMoods]);

            const handleMoodToggle = (id) => {
                if (selectedMoods.includes(id)) {
                    setSelectedMoods(selectedMoods.filter(m => m !== id));
                } else {
                    const conflicts = MOOD_EXCLUSIONS[id] || [];
                    const filteredMoods = selectedMoods.filter(m => !conflicts.includes(m));
                    if (filteredMoods.length < 3) setSelectedMoods([...filteredMoods, id]);
                }
            };

            const runRecommendation = () => {
                setLoading(true);
                setTimeout(() => {
                    const tier = PRICE_RANGES[priceTier];
                    let filtered = WHISKEY_DATABASE.filter(w => w.price >= tier.min && w.price <= tier.max);
                    let abvFiltered = filtered.filter(w => {
                        if (biorhythm.b > 0.3) return w.abv >= 50;
                        if (biorhythm.b < -0.3) return w.abv < 40;
                        return w.abv >= 40 && w.abv <= 46;
                    });
                    const baseList = abvFiltered.length > 0 ? abvFiltered : filtered;
                    const scored = baseList.map(w => {
                        let mbtiScore = w.mbti.includes(mbti) ? 300 : 0;
                        let moodScore = 0;
                        selectedMoods.forEach(moodId => { if (w.mood.includes(moodId)) moodScore += 200; });
                        return { ...w, score: mbtiScore + moodScore, mbtiMatch: mbtiScore > 0 };
                    });
                    scored.sort((a, b) => b.score - a.score);
                    const topPick = scored[0] || baseList[0];
                    topPick.randomIntro = SUMMARY_INTROS[Math.floor(Math.random() * SUMMARY_INTROS.length)];
                    topPick.randomSummary = topPick.mbtiMatch ? MBTI_SUMMARIES[Math.floor(Math.random() * MBTI_SUMMARIES.length)] : MOOD_SUMMARIES[Math.floor(Math.random() * MOOD_SUMMARIES.length)];
                    setResult(topPick);
                    setLoading(false);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 1200);
            };

            const t = (key) => {
                const translations = {
                    heroTitle: { ko: "ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤", en: "Today's Whiskey" },
                    heroDesc: { ko: "ë°”ì´ì˜¤ë¦¬ë“¬ê³¼ MBTIë¥¼ ê²°í•©í•œ ì´ˆê°œì¸í™” ì¶”ì²œ ì‹œìŠ¤í…œ", en: "Hyper-personalized recommendation engine" },
                    price: { ko: "ì˜ˆì‚° ë²”ìœ„", en: "Budget Range" },
                    mbti: { ko: "MBTI ìœ í˜•", en: "MBTI Type" },
                    mood: { ko: "í˜„ì¬ ê¸°ë¶„ (3ê°€ì§€ ì„ íƒ)", en: "Current Mood (Pick 3)" },
                    recommend: { ko: "ì¶”ì²œ ì—”ì§„ ê°€ë™", en: "Run Engine" },
                    resultTitle: { ko: "ì˜¤ëŠ˜ ë‹¹ì‹ ì—ê²Œ ê¶Œí•˜ëŠ” í•œ ì”", en: "A Glass for You Today" },
                    searchBuy: { ko: "êµ¬ë§¤ì²˜ ì°¾ê¸°", en: "Find Store" },
                    retry: { ko: "ë‹¤ì‹œ ì¸¡ì •í•˜ê¸°", en: "Recalculate" },
                    bioPhys: { ko: "ì‹ ì²´ ì§€ìˆ˜", en: "Physical" },
                    bioEmo: { ko: "ê°ì„± ì§€ìˆ˜", en: "Emotional" },
                    bioIntel: { ko: "ì§€ì„± ì§€ìˆ˜", en: "Intellectual" },
                    bioTotal: { ko: "í†µí•© ì§€ìˆ˜", en: "Total Index" },
                    archetypeExplanation: { ko: "ì´ ìˆ˜ì¹˜ëŠ” ë‹¹ì‹ ì˜ ì‹¬ë¦¬í•™ì  ê¸°ì§ˆê³¼ í˜„ì¬ì˜ ì •ì„œì  íŒŒë™ì´ ìœ„ìŠ¤í‚¤ì˜ í’ë¯¸ ìš”ì†Œì™€ ì–¼ë§ˆë‚˜ ê¹Šì´ ê³µëª…í•˜ëŠ”ì§€ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.", en: "This score shows how well your psychological temperament and current emotional wave resonate with the whiskey's profile." },
                    matchLevel: { ko: "ì¶”ì²œ ì •í•©ë„", en: "Match Accuracy" },
                    scoreBetter: { ko: "ìˆ˜ì¹˜ê°€ ë†’ì„ìˆ˜ë¡ ë‹¹ì‹ ì˜ ë‚´ë©´ì  ìš”êµ¬ì™€ ê°ê°ì  ê²½í—˜ì´ ì™„ë²½íˆ ì¼ì¹˜í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.", en: "A higher score means your inner needs and sensory experience are perfectly aligned." },
                    moodExclusionNotice: { ko: "ìƒì¶©í•˜ëŠ” ê¸°ë¶„ì€ ìë™ìœ¼ë¡œ í•´ì œë©ë‹ˆë‹¤.", en: "Conflicting moods are automatically unselected." }
                };
                return translations[key]?.[lang] || key;
            };

            const getDrinkingAdvice = (b, l) => {
                if (b > 0.3) return l === 'ko' ? "ì‹ ì²´ì  í™œë ¥ì´ ìµœìƒì…ë‹ˆë‹¤. ë‡Œì˜ ê°ê° ì •ë³´ ì²˜ë¦¬ ëŠ¥ë ¥ì´ ë†’ì•„ ê³ ë„ìˆ˜ ìœ„ìŠ¤í‚¤ì˜ ë³µí•©ì ì¸ í’ë¯¸ë¥¼ ì„¬ì„¸í•˜ê²Œ í¬ì°©í•˜ê¸° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤." : "Peak condition! Perfect sensory processing for high-ABV whiskies.";
                if (b < -0.3) return l === 'ko' ? "ì •ì„œì  ì—ë„ˆì§€ê°€ ë‚®ì•„ì§„ ìƒíƒœì…ë‹ˆë‹¤. ì‹ ê²½ê³„ë¥¼ ë‹¬ë˜ì£¼ëŠ” ê°€ë²¼ìš´ ë„ìˆ˜ë‚˜ ë¶€ë“œëŸ¬ìš´ í–¥ì·¨ê°€ í˜„ëª…í•œ ì„ íƒì…ë‹ˆë‹¤." : "Low energy day. Choose a smooth, low-ABV whiskey to soothe the mind.";
                return l === 'ko' ? "í•­ìƒì„±ì´ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€ë˜ê³  ìˆìŠµë‹ˆë‹¤. í‰ì†Œ ê¸°í˜¸ì— ë§ì¶˜ í‘œì¤€ì ì¸ ì‹œìŒì´ ê°€ì¥ ì¾Œì í•œ ë³´ìƒì„ ì œê³µí•©ë‹ˆë‹¤." : "Balanced state. Ideal for your favorite standard ABV whiskey.";
            };

            const getAbvRecommendation = (b) => {
                if (b > 0.3) return { label: lang === 'ko' ? "ê³ ë„ìˆ˜ (50%+)" : "High ABV (50%+)", range: "CS/High" };
                if (b < -0.3) return { label: lang === 'ko' ? "ì €ë„ìˆ˜ (<40%)" : "Low ABV (<40%)", range: "Low/Smooth" };
                return { label: lang === 'ko' ? "í‘œì¤€ (40~46%)" : "Standard (40-46%)", range: "Standard" };
            };

            return (
                <div className="min-h-screen transition-all duration-500 bg-white dark:bg-slate-950 text-slate-900 dark:text-white">
                    <nav className="sticky top-0 z-50 glass-effect border-b bg-white/70 dark:bg-slate-950/70 border-slate-200 dark:border-slate-800">
                        <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <div className="w-10 h-10 bg-amber-500 rounded-xl flex items-center justify-center shadow-lg shadow-amber-500/20"><Icon name="glass-water" className="text-white" size={24} /></div>
                                <span className="font-extrabold text-xl tracking-tighter uppercase title-font">{t('heroTitle')}</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <button onClick={() => setLang(lang === 'ko' ? 'en' : 'ko')} className="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors"><Icon name="languages" className="text-amber-500" size={20} /></button>
                                <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-900 transition-colors"><Icon name={isDarkMode ? "sun" : "moon"} size={20} /></button>
                            </div>
                        </div>
                    </nav>

                    <main className="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-16">
                        {!result ? (
                            <div className="space-y-12 animate-fade-in">
                                <header className="text-center space-y-4">
                                    <h2 className="text-5xl md:text-7xl font-black tracking-tight leading-none uppercase title-font">{t('heroTitle')}</h2>
                                    <p className="text-lg md:text-xl opacity-60 font-medium italic-off">{t('heroDesc')}</p>
                                </header>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                                    <div className="space-y-6">
                                        <section className="p-6 md:p-8 rounded-3xl border bg-slate-50 dark:bg-slate-900/50 border-slate-200 dark:border-slate-800">
                                            <label className="flex items-center gap-2 text-sm font-bold uppercase tracking-wider mb-6 opacity-50"><Icon name="user" size={16} /> {t('mbti')}</label>
                                            <div className="grid grid-cols-4 gap-2">
                                                {Object.keys(MBTI_ARCHETYPES).map(type => (
                                                    <button key={type} onClick={() => setMbti(type)} className={`py-2 text-sm font-bold rounded-xl transition-all ${mbti === type ? 'bg-amber-500 text-slate-950 scale-105 shadow-lg font-bold' : 'bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400'}`}>{type}</button>
                                                ))}
                                            </div>
                                            <div className="mt-6 flex items-start gap-4 p-4 rounded-2xl bg-amber-500/5 border border-amber-500/20">
                                                <span className="text-2xl">{MBTI_ARCHETYPES[mbti].icon}</span>
                                                <div>
                                                    <h4 className="font-bold text-amber-500 title-font italic-off">{MBTI_ARCHETYPES[mbti].title[lang]}</h4>
                                                    <p className="text-xs opacity-60 mt-1 italic-off">{MBTI_ARCHETYPES[mbti].desc[lang]}</p>
                                                </div>
                                            </div>
                                        </section>
                                        <section className="p-6 md:p-8 rounded-3xl border bg-slate-50 dark:bg-slate-900/50 border-slate-200 dark:border-slate-800">
                                            <label className="flex items-center gap-2 text-sm font-bold uppercase tracking-wider mb-6 opacity-50"><Icon name="activity" size={16} /> ê¸°ì¤€ì¼ ì„¤ì •</label>
                                            <button onClick={() => setShowCalendar(true)} className="w-full p-4 rounded-xl border bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 font-bold flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-700 transition-all">
                                                <div className="flex items-center gap-3"><Icon name="calendar" size={18} className="text-amber-500" /><span>{formatDate(date)}</span></div>
                                                <Icon name="chevron-down" size={18} className="opacity-30" />
                                            </button>
                                            <div className="mt-8 space-y-6">
                                                {[{ key: 'bioPhys', val: biorhythm.p, color: 'bg-rose-500' }, { key: 'bioEmo', val: biorhythm.e, color: 'bg-emerald-500' }, { key: 'bioIntel', val: biorhythm.i, color: 'bg-blue-500' }].map(bio => {
                                                    const status = getBioStatus(bio.val);
                                                    return (
                                                        <div key={bio.key} className="space-y-2">
                                                            <div className="flex justify-between text-[10px] font-bold opacity-60 uppercase tracking-wider"><span>{t(bio.key)}</span><span>{(bio.val * 100).toFixed(0)}%</span></div>
                                                            <div className="flex items-center gap-4">
                                                                <div className="flex-1 h-2 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden"><div className={`h-full transition-all duration-1000 ${bio.color}`} style={{ width: `${Math.abs(bio.val * 100)}%`, marginLeft: bio.val < 0 ? 'auto' : '0' }} /></div>
                                                                <span className={`w-14 text-right text-[11px] font-black uppercase ${status.color}`}>{status.label}</span>
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </section>
                                    </div>
                                    <div className="space-y-6">
                                        <section className="p-6 md:p-8 rounded-3xl border bg-slate-50 dark:bg-slate-900/50 border-slate-200 dark:border-slate-800">
                                            <label className="flex items-center gap-2 text-sm font-bold uppercase tracking-wider mb-6 opacity-50"><Icon name="thermometer" size={16} /> {t('price')}</label>
                                            <div className="space-y-2">
                                                {Object.entries(PRICE_RANGES).map(([key, val]) => (
                                                    <button key={key} onClick={() => setPriceTier(key)} className={`w-full p-4 rounded-xl flex justify-between items-center transition-all border ${priceTier === key ? 'border-amber-500 bg-amber-500/10 text-slate-950 font-bold' : 'bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-800'}`}>
                                                        <span className={priceTier === key ? 'text-slate-950 font-bold' : 'text-slate-500'}>{val.label[lang]}</span>
                                                        {priceTier === key && <Icon name="shield-check" className="text-slate-950" size={18} />}
                                                    </button>
                                                ))}
                                            </div>
                                        </section>
                                        <section className="p-6 md:p-8 rounded-3xl border bg-slate-50 dark:bg-slate-900/50 border-slate-200 dark:border-slate-800">
                                            <label className="flex items-center gap-2 text-sm font-bold uppercase tracking-wider mb-4 opacity-50"><Icon name="heart" size={16} /> {t('mood')}</label>
                                            <p className="text-[10px] opacity-40 mb-4 flex items-center gap-1 italic-off"><Icon name="alert-circle" size={10}/> {t('moodExclusionNotice')}</p>
                                            <div className="grid grid-cols-2 sm:grid-cols-3 gap-2">
                                                {MOODS.map(mood => (
                                                    <button key={mood.id} onClick={() => handleMoodToggle(mood.id)} className={`p-3 rounded-2xl flex flex-col items-center gap-1 transition-all border ${selectedMoods.includes(mood.id) ? 'bg-amber-500 border-amber-400 text-slate-950 scale-105 font-bold' : 'bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 opacity-60'}`}>
                                                        <span className="text-xl">{mood.icon}</span><span className="text-[10px] font-bold uppercase">{mood.label[lang]}</span>
                                                    </button>
                                                ))}
                                            </div>
                                        </section>
                                    </div>
                                </div>
                                <button onClick={runRecommendation} disabled={loading || selectedMoods.length === 0} className="w-full py-6 md:py-8 rounded-full bg-amber-500 hover:bg-amber-400 text-slate-950 font-black text-xl md:text-2xl shadow-2xl shadow-amber-500/30 transition-all active:scale-95 disabled:opacity-30 flex items-center justify-center gap-3 italic-off">
                                    {loading ? <Icon name="refresh-ccw" className="animate-spin" size={28} /> : <><Icon name="zap" size={28} /> {t('recommend')}</>}
                                </button>
                            </div>
                        ) : (
                            <div className="max-w-3xl mx-auto animate-fade-in space-y-8">
                                <div className="rounded-[40px] overflow-hidden border bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 shadow-2xl">
                                    <div className="relative h-64 md:h-80 bg-gradient-to-br from-amber-600 to-amber-900 flex items-center justify-center overflow-hidden">
                                        <div className="absolute inset-0 opacity-10 mix-blend-overlay"><div className="absolute top-10 left-10 w-40 h-40 border-8 border-white rounded-full"></div><div className="absolute bottom-10 right-10 w-60 h-60 border-8 border-white rounded-full"></div></div>
                                        <div className="relative z-10 text-center space-y-4">
                                            <div className="w-24 h-24 md:w-32 md:h-32 bg-white/20 backdrop-blur-xl rounded-full flex items-center justify-center border border-white/30 animate-bounce shadow-xl"><Icon name="glass-water" className="text-white" size={48} /></div>
                                            <div className="px-4 py-1 bg-black/40 backdrop-blur-md rounded-full text-xs font-black text-amber-400 uppercase tracking-widest italic-off">{t('heroTitle')} â€¢ ABV {result.abv}%</div>
                                        </div>
                                    </div>
                                    <div className="p-8 md:p-12 space-y-8">
                                        <div className="text-center space-y-4">
                                            <h2 className="text-xs font-black text-amber-500 uppercase tracking-[0.3em] italic-off">{t('resultTitle')}</h2>
                                            <h3 className="text-4xl md:text-6xl font-serif font-black tracking-tight title-font italic-off">{result.name}</h3>
                                            <div className="flex flex-wrap justify-center gap-2 italic-off">{result.tags.map(tag => (<span key={tag} className="px-3 py-1 rounded-full text-[10px] font-bold border border-amber-500/30 text-amber-500">#{tag}</span>))}</div>
                                        </div>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 italic-off">
                                            <div className="p-6 rounded-3xl flex flex-col justify-between bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 shadow-inner">
                                                <div className="space-y-2"><div className="flex items-center gap-2 text-amber-500"><Icon name="trending-up" size={20} /><h4 className="text-[10px] font-black uppercase tracking-wider title-font italic-off">{t('bioTotal')}</h4></div><p className="font-bold text-lg italic-off">{(biorhythm.b * 100).toFixed(1)}% ({getAbvRecommendation(biorhythm.b).range})</p></div>
                                                <p className="text-[11px] opacity-60 mt-4 leading-relaxed font-medium italic-off">{getDrinkingAdvice(biorhythm.b, lang)}</p>
                                            </div>
                                            <div className="p-6 rounded-3xl flex flex-col justify-between bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 shadow-inner">
                                                <div className="space-y-2"><div className="flex items-center gap-2 text-amber-500"><Icon name="wind" size={20} /><h4 className="text-[10px] font-black uppercase tracking-wider title-font italic-off">Archetype Score</h4></div><div className="flex items-end justify-between"><p className="font-bold text-lg italic-off">{result.score} pts</p><div className={`text-[10px] font-black uppercase ${getArchetypeStatus(result.score).color}`}>{getArchetypeStatus(result.score).label}</div></div>
                                                <div className="space-y-1 pt-1"><div className="h-2 w-full bg-slate-200 dark:bg-slate-900 rounded-full overflow-hidden shadow-inner"><div className="h-full bg-gradient-to-r from-amber-600 to-amber-400 transition-all duration-1000" style={{ width: `${Math.min((result.score / 900) * 100, 100)}%` }} /></div><div className="flex justify-between text-[7px] font-black opacity-30 uppercase tracking-tighter italic-off"><span>Worst Match</span><span className="text-amber-500">Best Match â˜…</span></div></div></div>
                                                <div className="mt-4 flex items-start gap-2 italic-off"><Icon name="help-circle" size={14} className="shrink-0 text-amber-500/50 mt-0.5" /><p className="text-[11px] opacity-60 leading-relaxed font-medium italic-off">{t('archetypeExplanation')}</p></div>
                                            </div>
                                        </div>
                                        <div className={`p-6 md:p-8 rounded-3xl border-2 ${result.mbtiMatch ? 'border-amber-500/30 bg-amber-500/5' : 'border-indigo-500/30 bg-indigo-500/5'} italic-off`}>
                                            <div className="flex items-center gap-2 mb-4 italic-off">{result.mbtiMatch ? <Icon name="sparkles" className="text-amber-500" size={18} /> : <Icon name="coffee" className="text-indigo-400" size={18} />}<span className="font-black uppercase tracking-widest text-sm italic-off">{result.mbtiMatch ? (lang === 'ko' ? "ì‹¬ë¦¬ì  ê¸°ì§ˆ ê¸°ë°˜ ì •ì„ì  ì¶”ì²œ" : "Personality Based Match") : (lang === 'ko' ? "ì •ì„œì  íŒŒë™ ê¸°ë°˜ ë³€ì¹™ì  ì¶”ì²œ" : "Mood-Driven Wildcard")}</span></div>
                                            <p className="text-base md:text-lg font-medium opacity-70 leading-relaxed mb-6 italic-off">{result.mbtiMatch ? (lang === 'ko' ? `ì´ ìœ„ìŠ¤í‚¤ì˜ í’ë¯¸ëŠ” ë‹¹ì‹ ì˜ ${mbti}ì  ê¸°ì§ˆê³¼ ë‚´ë©´ì˜ ìƒ(è±¡)ì´ ì§€í–¥í•˜ëŠ” ë³¸ì§ˆì  ì•ˆì •ê°ì— ê¹Šì´ ë‹¿ì•„ ìˆìŠµë‹ˆë‹¤. ë‡Œì˜ ë³´ìƒ ê³„í†µì´ ìµìˆ™í•˜ê³  ì²´ê³„ì ì¸ ìê·¹ì— ë°˜ì‘í•˜ì—¬ ì •ì„œì  í‰ì˜¨ì„ ì´ë„ëŠ” ì‹ ê²½ì „ë‹¬ ê³¼ì •ê³¼ ì¼ì¹˜í•˜ë©°, ìì•„ì˜ ì¸ì§€ì  ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë ¤ëŠ” ë¬´ì˜ì‹ì  ê°ˆë§ì„ ì¶©ì‹¤íˆ ì±„ì›Œì£¼ëŠ” ì •êµí•œ ì„ íƒì…ë‹ˆë‹¤.` : `Matches your nature. Aligns with stable neuro-rewards.`) : (lang === 'ko' ? `í‰ì†Œì˜ ì‹¬ë¦¬ì  í‹€(${mbti})ì—ì„œ ë²—ì–´ë‚œ ë“¯ ë³´ì´ë‚˜, í˜„ì¬ì˜ ì •ì„œì  íŒŒë™ì´ ë‡Œì˜ í¸ë„ì²´ë¥¼ ìê·¹í•˜ì—¬ ìƒˆë¡œìš´ ê°ê°ì  ë³´ìƒì„ ê°ˆêµ¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¼ìƒì˜ ì‹ ê²½ íšŒë¡œë¥¼ í™˜ê¸°í•˜ê³  ë‚¯ì„  ìê·¹ì„ í†µí•´ ë„íŒŒë¯¼ì  í™œë ¥ì„ ê¹¨ìš°ê¸°ì— ë”ì—†ì´ ì¢‹ì€ ì¡°í™”ì…ë‹ˆë‹¤.` : `A delightful break from your usual profile, reawakening sensory dopamine.`)}</p>
                                            <div className="pt-4 border-t border-slate-200 dark:border-white/10 flex items-start gap-3 italic-off"><Icon name="quote" className="text-amber-500 shrink-0 mt-1" size={20} /><p className="text-lg md:text-xl font-bold text-amber-500 leading-tight italic-off">{result.randomIntro[lang]} {result.randomSummary[lang]}</p></div>
                                        </div>
                                        <div className="flex flex-col md:flex-row gap-4 pt-4 italic-off">
                                            <a href={`https://www.google.com/search?q=${encodeURIComponent(result.name)}+êµ¬ë§¤`} target="_blank" rel="noreferrer" className="flex-1 py-5 rounded-full bg-amber-500 text-slate-950 font-black text-lg flex items-center justify-center gap-2 hover:scale-[1.02] transition-transform shadow-xl italic-off"><Icon name="search" size={20} /> {t('searchBuy')}</a>
                                            <button onClick={() => setResult(null)} className="flex-1 py-5 rounded-full font-black text-lg flex items-center justify-center gap-2 border border-slate-200 dark:border-slate-800 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all italic-off"><Icon name="refresh-ccw" size={20} /> {t('retry')}</button>
                                        </div>
                                    </div>
                                </div>
                                <div className="p-6 rounded-3xl bg-amber-500/5 border border-amber-500/10 flex items-start gap-4 italic-off"><Icon name="info" className="text-amber-500 shrink-0 mt-1" size={20} /><p className="text-xs opacity-60 leading-relaxed font-medium italic-off">{lang === 'ko' ? "ë³¸ ì¶”ì²œì€ ê°œì¸ì˜ ê¸°í˜¸ì™€ ë°”ì´ì˜¤ë¦¬ë“¬ ì•Œê³ ë¦¬ì¦˜ì— ê¸°ë°˜í•œ ì œì•ˆì…ë‹ˆë‹¤. ì‹¤ì œ ì·¨í–¥ì€ ê°œì¸ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë©°, ê³¼ë„í•œ ìŒì£¼ëŠ” ê±´ê°•ì„ í•´ì¹  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•­ìƒ ì ë‹¹í•œ ì‹œìŒì„ ì¦ê¸°ì‹œê¸° ë°”ëë‹ˆë‹¤." : "A suggestion based on individual preference and biorhythm algorithms. Individual taste may vary. Always enjoy responsibly as excessive drinking can be harmful."}</p></div>
                            </div>
                        )}
                    </main>

                    {showCalendar && (<CalendarPopup selectedDate={date} isDarkMode={isDarkMode} onSelect={(newDate) => { setDate(newDate); setShowCalendar(false); }} onClose={() => setShowCalendar(false)} />)}

                    <footer className="max-w-6xl mx-auto px-4 py-12 text-center opacity-30 uppercase tracking-[0.4em] font-black text-[10px] italic-off"><div className="w-12 h-px bg-slate-200 dark:bg-slate-800 mx-auto mb-8 italic-off"></div>Â© 2026 ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤ CURATION SERVICE</footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
