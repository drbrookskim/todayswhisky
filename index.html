<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïò§ÎäòÏùò ÏúÑÏä§ÌÇ§ - MBTI & Î∞îÏù¥Ïò§Î¶¨Îì¨ ÌÅêÎ†àÏù¥ÏÖò</title>
    <!-- SEO & Open Graph (GitHub Pages ÏµúÏ†ÅÌôî) -->
    <meta name="description" content="MBTIÏôÄ Ïò§ÎäòÏùò Î∞îÏù¥Ïò§Î¶¨Îì¨ÏùÑ Î∂ÑÏÑùÌïòÏó¨ ÎãπÏã†ÏóêÍ≤å Í∞ÄÏû• ÏôÑÎ≤ΩÌïú Ï£ºÎ•ò Ìïú ÏûîÏùÑ Ï∂îÏ≤úÌï©ÎãàÎã§.">
    <meta property="og:title" content="Ïò§ÎäòÏùò ÏúÑÏä§ÌÇ§ (Today's Whiskey)">
    <meta property="og:description" content="ÏÑ±Í≤©Í≥º Í∏∞Î∂Ñ, Ïã†Ï≤¥ Î¶¨Îì¨ÏùÑ Í≤∞Ìï©Ìïú Ï¥àÍ∞úÏù∏Ìôî Ï£ºÎ•ò Ï∂îÏ≤ú ÏÑúÎπÑÏä§">
    <meta property="og:type" content="website">
    
    <!-- Scripts & Styles (CDNÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ ÏÑúÎ≤Ñ ÏóÜÏù¥ Ï†ïÏ†Å Ìò∏Ïä§ÌåÖ Í∞ÄÎä•) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind Config for Dark Mode -->
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Pretendard', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Strict Non-Italic Enforcement */
        em, i, .italic {
            font-style: normal !important;
        }

        /* Custom Scrollbar for Teal Theme */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #0d9488; border-radius: 10px; }

        .teal-gradient {
            background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
        }

        .amber-button {
            background-color: #f59e0b;
            color: white;
            transition: all 0.2s;
        }
        .amber-button:hover {
            background-color: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.3);
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark .glass-morphism {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* High Contrast for better readability in Dark Mode */
        .dark .text-contrast-high { color: #f8fafc; }
        .dark .text-contrast-medium { color: #cbd5e1; }
        .dark .text-contrast-low { color: #94a3b8; }

        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        .animate-progress {
            animation: progress 3s ease-in-out forwards;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-100 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- 1. Global Data Definitions ---
        
        const TEXT = {
            ko: {
                title: "Ïò§ÎäòÏùò ÏúÑÏä§ÌÇ§",
                step1_title: "ÎãπÏã†Ïùò MBTIÎäî?",
                step1_date: "ÎÇ†ÏßúÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.",
                step_next: "Îã§Ïùå Îã®Í≥Ñ",
                step_prev: "Ïù¥Ï†Ñ Îã®Í≥Ñ",
                step2_title: "Ïò§Îäò Í∏∞Î∂ÑÏùÄ Ïñ¥Îñ§Í∞ÄÏöî?",
                step2_sub: "ÏµúÎåÄ 3Í∞ú ÏÑ†ÌÉù. ÏÉÅÏ∂©ÌïòÎäî Í∞êÏ†ïÏùÄ ÏûêÎèô Ìï¥Ï†úÎê©ÎãàÎã§.",
                step3_title: "ÏòàÏÇ∞ÏùÄ Ïñ¥Îäê Ï†ïÎèÑÏù∏Í∞ÄÏöî?",
                run_btn: "Ï∂îÏ≤ú ÏóîÏßÑ Í∞ÄÎèô",
                random_btn: "ÎÇú Í∑∏ÎÉ• ÏïÑÎ¨¥Í±∞ÎÇò ÎßàÏã§ÎûòÏöî! üé≤",
                result_bio: "Ïò§ÎäòÏùò Î∞îÏù¥Ïò§Î¶¨Îì¨",
                bio_rec: "Î∂ÑÏÑù Í≤∞Í≥º:",
                bio_abv: "ÎèÑÏàò Ï∂îÏ≤ú",
                match_label: "Îß§Ïπ≠ Ï†êÏàò",
                report_title: "ÌñâÎèôÍ≤ΩÏ†úÌïô Î∞è Ïã†Í≤ΩÏÉùÎ¨ºÌïô Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏",
                reset_btn: "Ï≤òÏùåÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
                buy_btn: "Íµ¨Îß§Ï≤ò ÏïåÏïÑÎ≥¥Í∏∞",
                price_label: "ÎÑ§Ïù¥Î≤Ñ AI ÏãúÏÑ∏ Ï†ïÎ≥¥",
                price_check: "Ïö©ÎüâÎ≥Ñ Í∞ÄÍ≤© ÌôïÏù∏",
                popup_title: "Ïö©ÎüâÎ≥Ñ ÏãúÏÑ∏ Î∞è Î¶¨Î∑∞",
                popup_desc: "Îã§ÏñëÌïú Ïö©ÎüâÏùò ÏãúÏÑ∏ Î≤îÏúÑÏôÄ ÏÉùÏÉùÌïú Î¶¨Î∑∞Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî.",
                search_youtube: "Ïú†ÌäúÎ∏å Î¶¨Î∑∞ Î≥¥Í∏∞",
                search_blog: "ÎÑ§Ïù¥Î≤Ñ Î∏îÎ°úÍ∑∏ (Ïã§Íµ¨Îß§Í∞Ä)",
                close_btn: "Îã´Í∏∞",
                currency_prefix: "ÏïΩ ",
                currency_suffix: "Ïõê"
            },
            en: {
                title: "Today's Whiskey",
                step1_title: "What is your MBTI?",
                step1_date: "Select a date.",
                step_next: "Next Step",
                step_prev: "Previous Step",
                step2_title: "How is your mood today?",
                step2_sub: "Select up to 3. Conflicting moods auto-deselect.",
                step3_title: "What is your budget?",
                run_btn: "Run Curation Engine",
                random_btn: "I'll just drink anything! üé≤",
                result_bio: "Today's Biorhythm",
                bio_rec: "Analysis:",
                bio_abv: "ABV Rec.",
                match_label: "Match Score",
                report_title: "Behavioral Economics & Neurobiology Report",
                reset_btn: "Start Over",
                buy_btn: "Find Where to Buy",
                price_label: "Market Price Range",
                price_check: "Check Price by Size",
                popup_title: "Price by Size & Reviews",
                popup_desc: "Check price ranges for different bottle sizes and watch reviews.",
                search_youtube: "Watch Reviews",
                search_blog: "Search Web Reviews",
                close_btn: "Close",
                currency_prefix: "Approx. ",
                currency_suffix: ""
            }
        };

        const ANALYSIS_LOGIC = {
            // MBTI Í∑∏Î£π Îß§Ìïë
            getMbtiGroup: (mbtiType) => {
                const groups = {
                    Analyst: ['INTJ', 'INTP', 'ENTJ', 'ENTP'],
                    Diplomat: ['INFJ', 'INFP', 'ENFJ', 'ENFP'],
                    Sentinel: ['ISTJ', 'ISFJ', 'ESTJ', 'ESFJ'],
                    Explorer: ['ISTP', 'ISFP', 'ESTP', 'ESFP']
                };
                for (const [group, types] of Object.entries(groups)) {
                    if (types.includes(mbtiType)) return group;
                }
                return 'Analyst';
            },

            // Î∂ÑÏÑù Îç∞Ïù¥ÌÑ∞: [Ïù∏ÏßÄÏ†Å ÌåêÎã® Î©îÏª§ÎãàÏ¶ò] & [ÎØ∏Îûò ÌñâÎèô ÏòàÏ∏°]
            // Reference: Thinking, Fast and Slow (Kahneman), Behave (Sapolsky), Nudge (Thaler)
            analysisData: {
                Analyst: {
                    judgment: {
                        positive: {
                            ko: "Ï†ÑÏ†ÑÎëêÌîºÏßà(Prefrontal Cortex)Ïù¥ ÌôúÏÑ±ÌôîÎêòÏñ¥ ÏûàÏßÄÎßå, ÎèÑÌååÎØº Í∏âÏ¶ùÏúºÎ°ú 'ÎÇôÍ¥ÄÏ£ºÏùò Ìé∏Ìñ•(Optimism Bias)'Ïù¥ ÏûëÎèô Ï§ëÏûÖÎãàÎã§. ÎåÄÎãàÏñº Ïπ¥ÎÑàÎ®ºÏùò 'ÏãúÏä§ÌÖú 2(Ïù¥ÏÑ±)'Í∞Ä ÌÜµÏ†úÌïòÎäî ÎìØ Î≥¥Ïù¥ÏßÄÎßå, Ïã§Ï†úÎ°úÎäî 'ÏãúÏä§ÌÖú 1(ÏßÅÍ¥Ä)'Ïù¥ ÎÇ¥Î¶∞ Í≤∞Î°†ÏùÑ Ïù¥ÏÑ±Ïù¥ Ìï©Î¶¨ÌôîÌïòÍ≥† ÏûàÏùÑ Í∞ÄÎä•ÏÑ±Ïù¥ ÎÜíÏäµÎãàÎã§.",
                            en: "Your Prefrontal Cortex is active, but Dopamine triggers 'Optimism Bias.' While Kahneman's 'System 2' (rational) seems in charge, 'System 1' (intuition) likely drove the conclusion, which reason is now rationalizing."
                        },
                        negative: {
                            ko: "ÏΩîÎ•¥Ìã∞ÏÜî ÏàòÏπò Ï¶ùÍ∞ÄÎ°ú 'Î∂ÑÏÑù ÎßàÎπÑ(Analysis Paralysis)'Ïóê Îπ†Ïßà ÏúÑÌóòÏù¥ ÏûàÏäµÎãàÎã§. Ï†ïÎ≥¥Î•º Í≥ºÎèÑÌïòÍ≤å ÏàòÏßëÌïòÎ†§Îäî Í≤ΩÌñ•ÏùÄ Î∂àÌôïÏã§ÏÑ±ÏùÑ ÌÜµÏ†úÌïòÎ†§Îäî ÏßÑÌôîÏ†Å Î∞©Ïñ¥ Í∏∞Ï†úÏûÖÎãàÎã§. Ï†ÑÎßù Ïù¥Î°†(Prospect Theory)Ïóê Îî∞Î•¥Î©¥, ÌòÑÏû¨ ÎãπÏã†ÏùÄ Ïù¥ÎìùÎ≥¥Îã§ 'ÏÜêÏã§ ÌöåÌîº'Ïóê Í∑πÎèÑÎ°ú ÎØºÍ∞êÌï©ÎãàÎã§.",
                            en: "Elevated Cortisol risks 'Analysis Paralysis.' Obsessive data gathering is an evolutionary defense mechanism. According to Prospect Theory, you are currently hypersensitive to 'Loss Aversion' over potential gains."
                        },
                        neutral: {
                            ko: "Í∞ÄÏû• Í∑†Ìòï Ïû°Ìûå 'ÏãúÏä§ÌÖú 2' Í∞ÄÎèô ÏÉÅÌÉúÏûÖÎãàÎã§. Î©îÌÉÄÏù∏ÏßÄ(Metacognition) Îä•Î†•Ïù¥ ÏµúÏÉÅÏù¥Î©∞, Ï£ºÎ•òÏùò Î≥µÏû°Ìïú ÌíçÎØ∏Î•º Îã®ÏàúÌïú Í∞êÍ∞ÅÏù¥ ÏïÑÎãå Í∞ùÍ¥ÄÏ†ÅÏù¥Í≥† Íµ¨Ï°∞Ï†ÅÏù∏ Îç∞Ïù¥ÌÑ∞Î°ú Ï≤òÎ¶¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§.",
                            en: "Optimal 'System 2' state. Metacognition is peak, allowing you to process the spirit's complex flavors as objective data rather than just sensation."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "ÏïåÏΩîÏò¨Ïù¥ Ï†ÑÎëêÏóΩÏùò ÏñµÏ†ú Í∏∞Îä•ÏùÑ Ïù¥ÏôÑÏãúÌÇ§Î©¥, ÌèâÏÜå ÏñµÎàåÎ†ÄÎçò Í±∞ÎåÄÌïú ÌîÑÎ°úÏ†ùÌä∏ÎÇò Ìà¨ÏûêÎ•º ÎåÄÎã¥ÌïòÍ≤å Í≥ÑÌöçÌï† ÌôïÎ•†Ïù¥ ÎÜíÏäµÎãàÎã§. ÎØ∏ÎûòÏùò Î≥¥ÏÉÅÏùÑ Í≥ºÎåÄÌèâÍ∞ÄÌïòÎäî Í≤ΩÌñ•Ïù¥ ÏûàÏúºÎØÄÎ°ú, Ïò§Îäò Î∞§Ïùò Í≤∞Ï†ïÏùÄ Î©îÎ™®Îßå Ìï¥ÎëêÍ≥† Ïã§ÌñâÏùÄ ÎÇ¥ÏùºÎ°ú ÎØ∏Î£®Îäî 'ÎÑõÏßÄ(Nudge)'Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.",
                            en: "As alcohol relaxes frontal inhibition, you might boldly plan grand projects. You're overestimating future rewards; use a 'Nudge' to write down ideas tonight but execute them tomorrow."
                        },
                        negative: {
                            ko: "Ïô∏Î∂ÄÏôÄÏùò ÏÜåÌÜµÏùÑ Ï∞®Îã®ÌïòÍ≥† ÎÇ¥Î©¥Ïùò ÎèôÍµ¥Î°ú Îì§Ïñ¥Í∞à Í≤ÉÏûÖÎãàÎã§. ÌòºÏûê ÏûîÏùÑ Í∏∞Ïö∏Ïù¥Î©∞ Î¨∏Ï†úÎ•º Î∞òÏ∂î(Rumination)Ìï† Í∞ÄÎä•ÏÑ±Ïù¥ ÌÅΩÎãàÎã§. Ï∂îÏ≤úÎêú Ìïú ÏûîÏùÄ Ïã†Í≤ΩÍ≥ÑÎ•º ÏßÑÏ†ïÏãúÏºú ÏÜåÎ™®Ï†ÅÏù∏ ÏÇ¨Í≥†Ïùò Í≥†Î¶¨Î•º ÎÅäÏñ¥Ï£ºÎäî Ïó≠Ìï†ÏùÑ Ìï† Í≤ÉÏûÖÎãàÎã§.",
                            en: "You likely retreat inward. Drinking alone while ruminating is probable. This drink acts as a nervous system sedative to break the cycle of exhaustive overthinking."
                        },
                        neutral: {
                            ko: "ÏßÄÏ†Å ÎåÄÌôîÎ•º Ï£ºÎèÑÌïòÍ±∞ÎÇò ÍπäÏù¥ ÏûàÎäî ÎèÖÏÑú/Ïó∞Íµ¨Ïóê Î™∞ÏûÖÌï† Í≤ÉÏûÖÎãàÎã§. ÏùåÏ£ºÍ∞Ä Í∏çÏ†ïÏ†ÅÏù¥Í≥† ÏÉùÏÇ∞Ï†ÅÏù∏ ÏóêÎÑàÏßÄÎ•º ÌùêÎ•¥Í≤å ÌïòÎäî Ï¥âÎß§Í∞Ä Îê©ÎãàÎã§.",
                            en: "You will likely lead intellectual conversations or dive into reading. Alcohol acts as a catalyst for productive energy flow."
                        }
                    }
                },
                Diplomat: {
                    judgment: {
                        positive: {
                            ko: "Ïò•ÏãúÌÜ†Ïã† Î∂ÑÎπÑÍ∞Ä ÌôúÎ∞úÌïòÏó¨ 'ÎÇ¥ÏßëÎã® Ìé∏Ìñ•(In-group Bias)'Ïù¥ Í∏çÏ†ïÏ†ÅÏúºÎ°ú ÏûëÏö©Ìï©ÎãàÎã§. ÌòÑÏû¨Ïùò Î∂ÑÏúÑÍ∏∞ÏôÄ Ïà†Ïóê ÏñΩÌûå ÏÑúÏÇ¨Î•º Í∞êÏ†ïÏ†ÅÏúºÎ°ú Í≤∞Ìï©ÌïòÏó¨, Í∞ùÍ¥ÄÏ†Å Ïä§ÌéôÏù¥ÎÇò ÎßõÎ≥¥Îã§ 'ÎàÑÍµ¨ÏôÄ Ìï®ÍªòÏù∏Í∞Ä' ÌòπÏùÄ 'Ïñ¥Îñ§ ÏùòÎØ∏Ïù∏Í∞Ä'Î•º Îçî Ï§ëÏöîÌïòÍ≤å ÌåêÎã®Ìï©ÎãàÎã§.",
                            en: "Oxytocin boosts positive 'In-group Bias.' You judge value based on emotional context and narrative rather than objective taste, prioritizing 'who' and 'why' over 'what'."
                        },
                        negative: {
                            ko: "Í±∞Ïö∏ Îâ¥Îü∞(Mirror Neuron)Ïùò Í≥ºÌôúÏÑ±ÏúºÎ°ú ÌÉÄÏù∏Ïùò Í∞êÏ†ïÏù¥ÎÇò ÏÑ∏ÏÉÅÏùò Î∂ÄÏ°∞Î¶¨Î•º ÏûêÏã†Ïùò Í≥†ÌÜµÏúºÎ°ú ÎäêÎÅºÍ≥† ÏûàÏäµÎãàÎã§. ÌåêÎã®Ïùò Í∏∞Ï§ÄÏù¥ 'ÏÇ¨Ïã§'Ïù¥ ÏïÑÎãå 'Í∞ÄÏπò'Ïóê Ïè†Î†§ ÏûàÏñ¥ Ïã¨Î¶¨Ï†Å ÏÜåÏßÑ(Burnout)ÏùÑ Ïú†Î∞úÌï† Ïàò ÏûàÎäî Ïù∏ÏßÄ ÏÉÅÌÉúÏûÖÎãàÎã§.",
                            en: "Hyperactive mirror neurons make you feel external pain as your own. Judgment is skewed towards 'values' over 'facts,' creating a cognitive state prone to burnout."
                        },
                        neutral: {
                            ko: "ÏßÅÍ¥ÄÍ≥º ÌÜµÏ∞∞Ïù¥ Ï°∞ÌôîÎ•º Ïù¥Î£πÎãàÎã§. ÌòÑÏû¨Ïùò ÌèâÏò®Ìï®ÏùÑ Ïú†ÏßÄÌïòÍ∏∞ ÏúÑÌï¥ 'ÌòÑÏÉÅ Ïú†ÏßÄ Ìé∏Ìñ•(Status Quo Bias)'Ïù¥ ÏûëÎèôÌïòÎ©∞, Í∏âÍ≤©Ìïú Î≥ÄÌôîÎ•º Í±∞Î∂ÄÌïòÍ≥† ÏùºÏÉÅÏùò ÏÜåÏ§ëÌï®ÏùÑ ÏßÄÌÇ§Î†§Îäî ÌåêÎã®ÏùÑ ÎÇ¥Î¶¥ Í≤ÉÏûÖÎãàÎã§.",
                            en: "Intuition meets insight. 'Status Quo Bias' works to maintain tranquility, leading you to reject radical changes and protect the value of everyday life."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "Í∞ïÌôîÎêú Í≥µÍ∞ê Îä•Î†•ÏúºÎ°ú ÌÉÄÏù∏Í≥ºÏùò ÍπäÏùÄ ÎåÄÌôîÎ•º Ïù¥ÎÅåÏñ¥ÎÇ¥Î©∞, Ï£ºÎ≥Ä ÏÇ¨ÎûåÎì§ÏóêÍ≤å 'Ïã¨Î¶¨Ï†Å ÏïàÏ†ÑÏßÄÎåÄ'Î•º Ï†úÍ≥µÌï† Í≤ÉÏûÖÎãàÎã§. Îã§Îßå, Î∂ÑÏúÑÍ∏∞Ïóê Ï∑®Ìï¥ ÏßÄÌÇ§ÏßÄ Î™ªÌï† ÏïΩÏÜçÏùÑ ÏÑ£Î∂àÎ¶¨ Ìï† ÏàòÎèÑ ÏûàÏúºÎãà Ï£ºÏùòÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§.",
                            en: "Enhanced empathy fosters deep conversation, creating psychological safety for others. Beware of making promises you can't keep in the heat of the moment."
                        },
                        negative: {
                            ko: "ÌòÑÏã§ ÎèÑÌîºÏ†ÅÏù∏ ÌñâÎèôÏùÑ Î≥¥Ïùº Ïàò ÏûàÏäµÎãàÎã§. ÌåêÌÉÄÏßÄ ÏÜåÏÑ§, ÏòÅÌôî, ÌòπÏùÄ Í≥ºÍ±∞Ïùò Ï¢ãÏïòÎçò Ï∂îÏñµ ÏÜçÏúºÎ°ú Ïà®Ïñ¥Îì§ Í∞ÄÎä•ÏÑ±Ïù¥ ÎÜíÏäµÎãàÎã§. Ìñ•Í∏∞Î°úÏö¥ ÏûîÏùÄ ÎãπÏã†ÏùÑ ÏïàÏ†ÑÌïú ÎÇ¥Î©¥ ÏÑ∏Í≥ÑÎ°ú ÏïàÎÇ¥ÌïòÎäî ÌõåÎ•≠Ìïú Îß§Í∞úÏ≤¥Í∞Ä Îê©ÎãàÎã§.",
                            en: "Escapist behavior is likely. You may retreat into fantasy or nostalgia. A fragrant glass serves as an excellent medium guiding you to a safe inner world."
                        },
                        neutral: {
                            ko: "ÏûêÏã†Ïùò Í∞ÄÏπòÍ¥ÄÏùÑ Ïû¨Ï†ïÎ¶ΩÌïòÎäî ÏãúÍ∞ÑÏùÑ Í∞ñÏäµÎãàÎã§. Í∏ÄÏùÑ Ïì∞Í±∞ÎÇò Î™ÖÏÉÅÏùÑ ÌïòÎäî Îì± Ï†ïÏ†ÅÏù∏ ÌôúÎèôÏùÑ ÌÜµÌï¥ Ïä§Ïä§Î°úÏùò ÎßàÏùåÏùÑ ÎèåÎ≥¥Îäî Î∞©Ìñ•ÏúºÎ°ú Ïù¥Ïñ¥Ïßà Í≤ÉÏûÖÎãàÎã§.",
                            en: "You'll take time to realign values. Static activities like writing or meditation will help you care for your own mind."
                        }
                    }
                },
                Sentinel: {
                    judgment: {
                        positive: {
                            ko: "ÏÑ∏Î°úÌÜ†Îãå ÏàòÏπòÍ∞Ä ÏïàÏ†ïÏ†ÅÏù¥Î©∞, 'Í∞ÄÏö©ÏÑ± Ìú¥Î¶¨Ïä§Ìã±(Availability Heuristic)'Ïóê ÏùòÏ°¥ÌïòÏó¨ Í≥ºÍ±∞Ïùò Ï¶êÍ±∞Ïõ†Îçò Í∏∞ÏñµÏùÑ Î∞îÌÉïÏúºÎ°ú ÌòÑÏû¨Î•º Í∏çÏ†ïÏ†ÅÏúºÎ°ú ÌèâÍ∞ÄÌï©ÎãàÎã§. Î™®ÌóòÎ≥¥Îã§Îäî Í≤ÄÏ¶ùÎêú ÌÅ¥ÎûòÏãùÏùÑ ÏÑ†ÌÉùÌï®ÏúºÎ°úÏç® Ïù∏ÏßÄÏ†Å Î∂ÄÏ°∞ÌôîÎ•º ÏµúÏÜåÌôîÌïòÎ†§Îäî ÌåêÎã®ÏùÑ ÎÇ¥Î¶ΩÎãàÎã§.",
                            en: "Stable serotonin relies on 'Availability Heuristic,' validating the present through past joy. You minimize cognitive dissonance by choosing proven classics over risky adventures."
                        },
                        negative: {
                            ko: "ÏòàÏ∏° Î∂àÍ∞ÄÎä•Ìïú ÏÉÅÌô©Ïóê ÎåÄÌïú Ïä§Ìä∏Î†àÏä§Î°ú Ìé∏ÎèÑÏ≤¥(Amygdala)Í∞Ä ÌôúÏÑ±ÌôîÎêòÏóàÏäµÎãàÎã§. ÏûÉÏñ¥Î≤ÑÎ¶∞ 'ÌÜµÏ†ú ÌôòÏÉÅ(Illusion of Control)'ÏùÑ ÎêòÏ∞æÍ∏∞ ÏúÑÌï¥ Ï†ïÎ¶¨Ï†ïÎèàÏùÑ ÌïòÍ±∞ÎÇò Í∑úÏπôÏùÑ Ïû¨ÌôïÏù∏ÌïòÎ†§Îäî Í∞ïÎ∞ïÏ†Å ÌåêÎã®Ïù¥ ÎëêÎìúÎü¨ÏßÄÎ©∞, Î≥ÄÌôîÎ•º ÏúÑÌòëÏúºÎ°ú Í∞ÑÏ£ºÌï©ÎãàÎã§.",
                            en: "Unpredictability triggers the amygdala. You may compulsively seek the 'Illusion of Control' through organizing or reaffirming rules. Change is perceived as a threat."
                        },
                        neutral: {
                            ko: "Í∞ÄÏû• ÌòÑÏã§Ï†ÅÏù¥Í≥† Ïã§Ïö©Ï†ÅÏù∏ ÏÉÅÌÉúÏûÖÎãàÎã§. ÌíàÏßà ÎåÄÎπÑ Í∞ÄÍ≤©(Í∞ÄÏÑ±ÎπÑ)Í≥º Ïó≠ÏÇ¨Ï†Å Í≤ÄÏ¶ùÏùÑ ÎÉâÏ≤†ÌïòÍ≤å Í≥ÑÏÇ∞ÌïòÎ©∞, Í∞êÏ†ïÏóê ÌÅ¨Í≤å ÌúòÎëòÎ¶¨ÏßÄ ÏïäÎäî Ìï©Î¶¨Ï†Å ÏÜåÎπÑÏûêÏùò Ï†ÑÌòïÏùÑ Î≥¥Ïó¨Ï£ºÎäî Ïù∏ÏßÄ ÏÉÅÌÉúÏûÖÎãàÎã§.",
                            en: "Highly pragmatic and realistic. You calculate value-for-money and historical validation coldly, exemplifying the rational consumer unmoved by emotion."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "ÏûêÏã†Ïùò ÏùºÏÉÅÍ≥º Î£®Ìã¥ÏùÑ Í∞ïÌôîÌïòÎäî ÌñâÎèôÏùÑ Ìï©ÎãàÎã§. ÎÇ¥ÏùºÏùò ÏùºÏ†ïÏùÑ ÍººÍººÌûà Ï≤¥ÌÅ¨ÌïòÍ±∞ÎÇò, Ïà†ÏùÑ ÎßàÏã† ÌõÑ Îí∑Ï†ïÎ¶¨Î•º ÏôÑÎ≤ΩÌïòÍ≤å ÌïòÎäî Îì± ÏùºÏÉÅÏùò 'ÏßàÏÑú' ÏÜçÏóêÏÑú Í∞ÄÏû• ÌÅ∞ ÎßåÏ°±Í∞êÏùÑ ÎäêÎÇÑ Í≤ÉÏûÖÎãàÎã§.",
                            en: "You reinforce daily routines. Checking tomorrow's schedules or cleaning up perfectly after a drink brings profound satisfaction through 'order'."
                        },
                        negative: {
                            ko: "Î∞©Ïñ¥Ï†Å ÌÉúÎèÑÎ•º Ï∑®ÌïòÎ©∞ ÌÉÄÏù∏Ïùò ÏÉàÎ°úÏö¥ Ï†úÏïàÏùÑ Í±∞Ï†àÌï† ÌôïÎ•†Ïù¥ Îß§Ïö∞ ÎÜíÏäµÎãàÎã§. ÏùµÏàôÌïú Í≥µÍ∞ÑÏóêÏÑú ÏùµÏàôÌïú ÎßõÏùÑ Ï¶êÍ∏∞Î©∞ ÏΩîÎ•¥Ìã∞ÏÜî ÏàòÏπòÎ•º ÎÇÆÏ∂îÎäî 'ÏûêÍ∞Ä ÏπòÏú†(Self-soothing)' ÌñâÎèôÏóê Î™∞ÎëêÌï† Í≤ÉÏûÖÎãàÎã§.",
                            en: "Defensive stance likely; rejecting new proposals is highly probable. You'll focus on 'Self-soothing' by enjoying familiar flavors in a safe space to lower cortisol."
                        },
                        neutral: {
                            ko: "Í∞ÄÏ°±Ïù¥ÎÇò ÏûêÏã†Ïù¥ ÏÜçÌïú Ï°∞ÏßÅÏùÑ Ï±ôÍ∏∞Îäî Ïù¥ÌÉÄÏ†ÅÏù¥Í≥† Ï±ÖÏûÑÍ∞ê ÏûàÎäî ÌñâÎèôÏúºÎ°ú Ïù¥Ïñ¥Ïßà Ïàò ÏûàÏäµÎãàÎã§. ÏûêÏã†Ïùò ÏÇ¨ÌöåÏ†Å Ïó≠Ìï†Í≥º Ï±ÖÏûÑÏùÑ ÌôïÏù∏ÌïòÎäî Í≥ºÏ†ïÏóêÏÑú ÎÇ¥Î©¥Ïùò ÏïàÏ†ïÏùÑ Ï∞æÏäµÎãàÎã§.",
                            en: "May lead to responsible, altruistic acts for family or organizations. Stability is found in reaffirming your social roles and duties."
                        }
                    }
                },
                Explorer: {
                    judgment: {
                        positive: {
                            ko: "ÎèÑÌååÎØº ÏàòÏö©Ï≤¥Í∞Ä Í≥†ÎèÑÎ°ú ÎØºÍ∞êÌï¥Ï†∏ ÏûàÏñ¥ 'ÏÉàÎ°úÏõÄ Ï∂îÍµ¨(Novelty Seeking)' ÏÑ±Ìñ•Ïù¥ Ìè≠Î∞úÏ†ÅÏúºÎ°ú ÏßÄÎ∞∞Ìï©ÎãàÎã§. Ïπ¥ÎÑàÎ®ºÏùò 'ÏãúÏä§ÌÖú 1(Îπ†Î•∏ ÏßÅÍ¥Ä)'Ïù¥ ÌÜµÏ†úÍ∂åÏùÑ Ï•êÍ≥† ÏûàÏúºÎ©∞, Ï¶âÍ∞ÅÏ†ÅÏù∏ Í∞êÍ∞ÅÏ†Å ÏæåÎùΩÍ≥º Î™®ÌóòÏùÑ ÏµúÏö∞ÏÑ† Í∞ÄÏπòÎ°ú ÌåêÎã®Ìï©ÎãàÎã§.",
                            en: "Sensitized dopamine receptors drive explosive 'Novelty Seeking.' Kahneman's 'System 1' rules, prioritizing immediate sensory pleasure and adventure above all else."
                        },
                        negative: {
                            ko: "ÏßÄÎ£®Ìï®Ïù¥ÎÇò Íµ¨ÏÜçÍ∞êÏùÑ Í≤¨ÎîîÏßÄ Î™ªÌï¥ ÎÖ∏Î•¥ÏóêÌîºÎÑ§ÌîÑÎ¶∞Ïù¥ Î∂àÍ∑úÏπôÌïòÍ≤å Î∂ÑÎπÑÎê©ÎãàÎã§. ÌòÑÏû¨ ÏÉÅÌô©ÏùÑ ÌÉàÏ∂úÌï¥Ïïº Ìï† 'ÏúÑÍ∏∞'Î°ú Ïù∏ÏßÄÌïòÎ©∞, Ï∂©ÎèôÏ†ÅÏù¥Í≥† Ï¶âÍ∞ÅÏ†ÅÏù∏ Î≥ÄÌôîÎ•º ÍæÄÌïòÎ†§Îäî Ïù∏ÏßÄÏ†Å Ìé∏Ìñ•Ïù¥ Îß§Ïö∞ Í∞ïÌïòÍ≤å ÏûëÏö©Ìï©ÎãàÎã§.",
                            en: "Intolerance for boredom triggers erratic norepinephrine. The present is perceived as a 'crisis' to escape, driving intensely impulsive cognitive bias for immediate change."
                        },
                        neutral: {
                            ko: "Í∞êÍ∞Å Ï†ïÎ≥¥Î•º Ï≤òÎ¶¨ÌïòÎäî Îáå ÏòÅÏó≠Ïù¥ Îß§Ïö∞ ÌôúÎ∞úÌï©ÎãàÎã§. Ïà†Ïùò Îßõ, ÏΩîÎÅùÏùÑ Ï∞åÎ•¥Îäî Ìñ•, Î™©ÏùÑ ÌÉÄÍ≥† ÎÑòÏñ¥Í∞ÄÎäî ÌÉÄÍ≤©Í∞ê Îì± Î¨ºÎ¶¨Ï†Å ÏûêÍ∑π Í∑∏ ÏûêÏ≤¥Î•º Î∂ÑÏÑùÌïòÎ©∞ Ïò®Ï†ÑÌûà 'ÌòÑÏû¨'Ïóê Î™∞ÏûÖ(Mindfulness)ÌïòÍ≥† ÏûàÏäµÎãàÎã§.",
                            en: "Sensory processing areas are highly active. You analyze physical stimuli‚Äîtaste, aroma, the burn‚Äîachieving a deep state of 'Mindfulness' in the present moment."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "Ï¶âÌù•Ï†ÅÏù∏ ÌñâÎèôÏúºÎ°ú Ïù¥Ïñ¥Ïßà ÌôïÎ•†Ïù¥ ÌÅΩÎãàÎã§. Ïà†ÍπÄÏóê Í∞ëÏûêÍ∏∞ Ïó¨Ìñâ ÎπÑÌñâÍ∏∞ ÌëúÎ•º ÏòàÎß§ÌïòÍ±∞ÎÇò, ÏÉàÎ°úÏö¥ Ï∑®ÎØ∏ Ïû•ÎπÑÎ•º Í≤∞Ï†úÌïòÎäî Îì± ÌèâÏÜåÎùºÎ©¥ Ï£ºÏ†ÄÌñàÏùÑ ÎåÄÎã¥Ìïú ÏãúÎèÑÎ•º Í∞êÌñâÌï† Í∞ÄÎä•ÏÑ±Ïù¥ 90% Ïù¥ÏÉÅÏûÖÎãàÎã§.",
                            en: "Spontaneity ensues. There's a 90% chance you'll impulsively book a flight or buy new hobby gear, taking bold actions you'd normally hesitate on."
                        },
                        negative: {
                            ko: "Ïã†Ï≤¥Ï†Å ÌôúÎèôÏùÑ ÌÜµÌï¥ Ïä§Ìä∏Î†àÏä§Î•º Î∞úÏÇ∞ÌïòÎ†§ Ìï† Í≤ÉÏûÖÎãàÎã§. Í≤©Î†¨Ìïú Ïö¥Îèô, Î™∞ÏûÖÍ∞ê ÎÜíÏùÄ Í≤åÏûÑ, ÌòπÏùÄ Î≥ºÎ•®ÏùÑ ÌÅ¨Í≤å ÎÜíÏù∏ ÏùåÏïÖ Í∞êÏÉÅ Îì± 'Í∞êÍ∞ÅÏ†Å ÌôòÍ∏∞(Sensory Ventilation)'Î•º ÌÜµÌï¥ ÎáåÏùò Í∞ÅÏÑ± ÏàòÏ§ÄÏùÑ Ïû¨Ï°∞Ï†ïÌï† Í≤ÉÏûÖÎãàÎã§.",
                            en: "Stress relief through physical action. You'll reset arousal levels via 'Sensory Ventilation' like vigorous exercise, intense gaming, or loud music."
                        },
                        neutral: {
                            ko: "ÎèÑÍµ¨Î•º ÎßåÏßÄÍ±∞ÎÇò Î¨¥Ïñ∏Í∞ÄÎ•º Ï°∞Î¶Ω/ÏàòÎ¶¨ÌïòÎäî Îì± ÏÜêÏùÑ Ïì∞Îäî Í∞êÍ∞ÅÏ†Å ÌôúÎèôÏóê ÏßëÏ§ëÌï† Í≤ÉÏûÖÎãàÎã§. Î≥µÏû°Ìïú ÏÉùÍ∞Å ÎåÄÏã† Í∞êÍ∞ÅÏóê ÏßëÏ§ëÌïòÎäî Í≤ÉÏù¥ ÎãπÏã†ÏóêÍ≤å ÏµúÍ≥†Ïùò Ï†ïÏã†Ï†Å Ìú¥ÏãùÏùÑ Ï§çÎãàÎã§.",
                            en: "You'll focus on tactile tasks like fixing or building things. Focusing on the senses instead of complex thoughts provides you with the ultimate mental rest."
                        }
                    }
                }
            },

            // Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± Î©îÏù∏ Ìï®Ïàò
            generateReport: function(mbti, moods, lang) {
                const group = this.getMbtiGroup(mbti);
                
                // Í∏∞Î∂Ñ ÏÉÅÌÉú Î∂ÑÎ•ò (Positive / Negative / Neutral)
                let moodState = 'neutral';
                const moodId = moods && moods.length > 0 ? moods[0] : 'joy';

                if (['joy', 'anticipation', 'surprise'].includes(moodId)) {
                    moodState = 'positive';
                } else if (['sadness', 'anger', 'fear', 'disgust'].includes(moodId)) {
                    moodState = 'negative';
                } else {
                    moodState = 'neutral'; // trust
                }

                const data = this.analysisData[group];
                
                return {
                    judgmentTitle: lang === 'ko' ? "Ïù∏ÏßÄÏ†Å ÌåêÎã® Î©îÏª§ÎãàÏ¶ò (Cognitive Judgment)" : "Cognitive Judgment Mechanism",
                    judgmentDesc: data.judgment[moodState][lang],
                    behaviorTitle: lang === 'ko' ? "ÎØ∏Îûò ÌñâÎèô ÏòàÏ∏° (Future Behavior Prediction)" : "Future Behavior Prediction",
                    behaviorDesc: data.behavior[moodState][lang]
                };
            }
        };

        const PRICE_RANGES = [
            { id: 1, label: { ko: "5ÎßåÏõê Ïù¥Ìïò", en: "Under ‚Ç©50k" }, min: 0, max: 50000 },
            { id: 2, label: { ko: "5ÎßåÏõê - 10ÎßåÏõê", en: "‚Ç©50k - ‚Ç©100k" }, min: 50000, max: 100000 },
            { id: 3, label: { ko: "10ÎßåÏõê - 20ÎßåÏõê", en: "‚Ç©100k - ‚Ç©200k" }, min: 100000, max: 200000 },
            { id: 4, label: { ko: "20ÎßåÏõê - 50ÎßåÏõê", en: "‚Ç©200k - ‚Ç©500k" }, min: 200000, max: 500000 },
            { id: 5, label: { ko: "50ÎßåÏõê - 100ÎßåÏõê", en: "‚Ç©500k - ‚Ç©1m" }, min: 500000, max: 1000000 }
        ];

        const MBTI_GROUPS = [
            { 
                key: "Analyst", 
                label: { ko: "Î∂ÑÏÑùÍ∞ÄÌòï (Analyst)", en: "Analyst" }, 
                color: "text-purple-600 dark:text-purple-400", 
                types: ["INTJ", "INTP", "ENTJ", "ENTP"] 
            },
            { 
                key: "Diplomat", 
                label: { ko: "Ïô∏ÍµêÍ¥ÄÌòï (Diplomat)", en: "Diplomat" }, 
                color: "text-green-600 dark:text-green-400", 
                types: ["INFJ", "INFP", "ENFJ", "ENFP"] 
            },
            { 
                key: "Sentinel", 
                label: { ko: "Í¥ÄÎ¶¨ÏûêÌòï (Sentinel)", en: "Sentinel" }, 
                color: "text-blue-600 dark:text-blue-400", 
                types: ["ISTJ", "ISFJ", "ESTJ", "ESFJ"] 
            },
            { 
                key: "Explorer", 
                label: { ko: "ÌÉêÌóòÍ∞ÄÌòï (Explorer)", en: "Explorer" }, 
                color: "text-amber-600 dark:text-amber-400", 
                types: ["ISTP", "ISFP", "ESTP", "ESFP"] 
            }
        ];
        
        const MOODS = [
            { 
                id: 'joy', 
                label: { ko: 'Í∏∞ÏÅ®', en: 'Joy' },
                desc: { ko: "Í∏∞ÏÅú ÎÇ†Ïù¥ÏóêÏöî. Ï∂ïÌïòÏ£º Ìïú Ïûî?", en: "Happy day. Celebration drink?" },
                emoji: "üòÅ",
                icon: 'smile', 
                color: 'text-yellow-500', 
                conflicts: ['sadness', 'anger'], 
                flavorProfile: ['sweet', 'fruity', 'citrus', 'vanilla', 'clean'] 
            },
            { 
                id: 'sadness', 
                label: { ko: 'Ïä¨Ìîî', en: 'Sadness' },
                desc: { ko: "ÎßàÏùå Ïä¨Ìîà ÎÇ†Ïù¥ÏóêÏöî. ÏúÑÎ°úÏ£º Ìïú Ïûî?", en: "Feeling sad. Comfort drink?" },
                emoji: "üò¢",
                icon: 'frown', 
                color: 'text-blue-500', 
                conflicts: ['joy'], 
                flavorProfile: ['mellow', 'balanced', 'rich', 'sherry', 'floral'] 
            },
            { 
                id: 'anger', 
                label: { ko: 'Î∂ÑÎÖ∏', en: 'Anger' },
                desc: { ko: "ÌôîÍ∞Ä ÎßéÏùÄ ÎÇ†Ïù¥ÏóêÏöî. Ïä§Ìä∏Î†àÏä§ ÌíÄÍ∏∞ ÏúÑÌï¥ Ìïú Ïûî?", en: "Angry day? Stress relief drink?" },
                emoji: "üò°",
                icon: 'flame', 
                color: 'text-red-500', 
                conflicts: ['joy', 'trust', 'calm'], 
                flavorProfile: ['smoky', 'intense', 'peppery', 'cask_strength', 'bold'] 
            },
            { 
                id: 'trust', 
                label: { ko: 'Ïã†Î¢∞', en: 'Trust' },
                desc: { ko: "ÎßàÏùåÏù¥ Ìé∏Ìïú ÎÇ†Ïù¥ÏóêÏöî. Ïù¥Îü∞ ÎÇ†ÏùÄ Ìïú Ïûî Ìï¥Ï§òÏïº‚àô‚àô‚àô?", en: "Relaxed day. A drink for today?" },
                emoji: "üòå",
                icon: 'shield-check', 
                color: 'text-emerald-500', 
                conflicts: ['anger', 'fear'], 
                flavorProfile: ['balanced', 'smooth', 'mellow', 'classic', 'oak'] 
            },
            { 
                id: 'fear', 
                label: { ko: 'ÎëêÎ†§ÏõÄ', en: 'Fear' },
                desc: { ko: "Î∂àÏïàÌïòÍ≥† Í±±Ï†ïÎêòÎäî ÎÇ†Ïù¥ÏóêÏöî. ÏÇ¥Ïßù ÏûäÍ∏∞ ÏúÑÌï¥ÏÑú Ìïú Ïûî?", en: "Anxious? A drink to forget?" },
                emoji: "üò®",
                icon: 'ghost', 
                color: 'text-purple-500', 
                conflicts: ['trust', 'joy'], 
                flavorProfile: ['intense', 'bold', 'spicy', 'complex'] 
            },
            { 
                id: 'surprise', 
                label: { ko: 'ÎÜÄÎûå', en: 'Surprise' },
                desc: { ko: "ÏÑúÌîÑÎùºÏù¥Ï¶àÍ∞Ä ÏûàÏóàÎçò ÎÇ†Ïù¥ÏóêÏöî. Ïù¥Îü∞ ÎÇ†ÏùÄ ÎÜÄÎûåÏùÑ Îã¨ÎûòÍ∏∞ ÏúÑÌï¥ÏÑú Ìïú Ïûî?", en: "Surprised? Calming drink?" },
                emoji: "üò≤",
                icon: 'zap', 
                color: 'text-cyan-500', 
                conflicts: [], 
                flavorProfile: ['citrus', 'seaweed', 'medicinal', 'unique', 'fresh'] 
            },
            { 
                id: 'anticipation', 
                label: { ko: 'Í∏∞ÎåÄ', en: 'Anticipation' },
                desc: { ko: "ÏÑ§Î†àÎäî ÏùºÏù¥ ÏûàÎäî ÎÇ†Ïù¥ÏóêÏöî. Í∏∞ÎÖêÏúºÎ°ú Ìïú Ïûî?", en: "Excited? Commemorative drink?" },
                emoji: "ü§©",
                icon: 'compass', 
                color: 'text-orange-500', 
                conflicts: [], 
                flavorProfile: ['floral', 'honey', 'orange', 'fresh', 'sweet'] 
            },
            { 
                id: 'disgust', 
                label: { ko: 'Í±∞Î∂ÄÍ∞ê', en: 'Disgust' },
                desc: { ko: "Í∏∞Î∂ÑÏù¥ Îß§Ïö∞ Ïñ∏Ïß¢ÏùÄ ÎÇ†Ïù¥ÏóêÏöî. Í∏∞Î∂ÑÏ†ÑÌôòÏùÑ ÏúÑÌï¥ÏÑú Ìïú Ïûî?", en: "Unpleasant day? Refreshing drink?" },
                emoji: "üòñ",
                icon: 'thumbs-down', 
                color: 'text-green-700', 
                conflicts: ['joy'], 
                flavorProfile: ['smoky', 'bold', 'intense', 'herbal', 'clean'] 
            }
        ];

        // Dynamic Tag Scoring based on MBTI traits
        const MBTI_TRAIT_PREFS = {
            E: ['smooth', 'balanced', 'classic', 'sweet', 'light', 'creamy', 'fresh', 'clean'],
            I: ['complex', 'smoky', 'intense', 'rich', 'seaweed', 'medicinal', 'cask_strength', 'oak'],
            S: ['vanilla', 'caramel', 'oak', 'honey', 'classic', 'value', 'standard', 'clean'],
            N: ['spicy', 'fruity', 'floral', 'unique', 'sherry', 'orange', 'complex', 'citrus'],
            T: ['bold', 'smoky', 'peppery', 'oak', 'intense', 'cask_strength', 'rich', 'maritime', 'salty'],
            F: ['sweet', 'smooth', 'floral', 'honey', 'mellow', 'fruity', 'creamy', 'velvet', 'elegant'],
            J: ['balanced', 'classic', 'rich', 'mellow', 'oak', 'chocolate', 'standard'],
            P: ['spicy', 'bold', 'unique', 'fresh', 'value', 'cask_strength', 'citrus', 'clean']
        };

        // SPIRITS_DB: Includes Original Whiskeys + GQ Korea Recommended 15 Whiskeys + Vodkas + Cognacs
        const SPIRITS_DB = [
            // --- Under 50k ---
            { name: "ÏßêÎπî ÌôîÏù¥Ìä∏", nameEn: "Jim Beam White Label", age: "NAS", style: "Standard Bourbon", tags: ["sweet", "vanilla", "corn", "light"], abv: 40, archetype: ["ESFP", "ESTP"], priceKrw: 24000, priceRangeKrw: "24,000Ïõê ~ 30,000Ïõê", priceUsd: 18, variants: [{vol: "700ml", price: 24000}, {vol: "1L", price: 35000}, {vol: "200ml", price: 9000}], desc: "Ï†Ñ ÏÑ∏Í≥Ñ ÌåêÎß§ 1ÏúÑ Î≤ÑÎ≤à. Í∞ÄÎ≥çÍ≥† Îã¨ÏΩ§Ìïú Î∞îÎãêÎùº Ìñ•Ïùò ÌïòÏù¥Î≥º ÏπòÌä∏ÌÇ§.", descEn: "World's No.1 Bourbon. Light and sweet vanilla notes perfect for highballs." },
            { name: "ÏóêÎ∞ò ÏúåÎ¶¨ÏóÑÏä§ Î∏îÎûô", nameEn: "Evan Williams Black", age: "NAS", style: "Bourbon", tags: ["sweet", "vanilla", "caramel", "value", "standard"], abv: 43, archetype: ["ESTJ", "ESTP", "ESFP"], priceKrw: 30000, priceRangeKrw: "30,000ÏõêÎåÄ", priceUsd: 20, variants: [{vol: "750ml", price: 30000}], desc: "[GQ Ï∂îÏ≤ú] 4~5ÎÖÑ ÏàôÏÑ±ÏúºÎ°ú ÌíçÏÑ±ÌïòÍ≥† Ï¥òÏ¥òÌïú ÎßõÏùÑ ÏûêÎûëÌïòÎäî Í∞ÄÏÑ±ÎπÑ ÎÅùÌåêÏôï ÏïÑÎ©îÎ¶¨Ïπ∏ Î≤ÑÎ≤à.", descEn: "Highly cost-effective bourbon aged 4-5 years with typical vanilla and caramel notes." },
            { name: "ÏóêÎ∞ò ÏúåÎ¶¨ÏóÑÏä§ BIB", nameEn: "Evan Williams Bottled-in-Bond", age: "4ÎÖÑ+", style: "High Proof Bourbon", tags: ["bold", "caramel", "oak", "value"], abv: 50, archetype: ["ESTJ", "ENTJ"], priceKrw: 30000, priceRangeKrw: "30,000Ïõê ~ 39,000Ïõê", priceUsd: 22, variants: [{vol: "750ml", price: 30000}, {vol: "1L", price: 42000}], desc: "50ÎèÑÏùò Í∞ïÎ†¨Ìïú ÌÉÄÍ≤©Í∞êÍ≥º ÏßÑÌïú Ïò§ÌÅ¨Ìñ•. Í∞ÄÏÑ±ÎπÑ ÏµúÍ≥†Ïùò Í≥†ÎèÑÏàò Î≤ÑÎ≤à.", descEn: "Bold 100 proof with deep oak notes. Best value high-proof bourbon." },
            { name: "Ï†úÏûÑÏä® Ïä§ÌÉ†Îã§Îìú", nameEn: "Jameson Irish Whiskey", age: "NAS", style: "Irish Blend", tags: ["smooth", "light", "floral", "classic"], abv: 40, archetype: ["ESFJ", "ISFJ"], priceKrw: 27000, priceRangeKrw: "27,000Ïõê ~ 35,000Ïõê", priceUsd: 25, variants: [{vol: "700ml", price: 27000}, {vol: "1L", price: 45000}, {vol: "200ml", price: 10000}], desc: "3Î≤à Ï¶ùÎ•òÌïòÏó¨ Í∑πÎèÑÎ°ú Î∂ÄÎìúÎü¨Ïö¥ Î™©ÎÑòÍπÄ. Ìò∏Î∂àÌò∏ ÏóÜÎäî Îç∞ÏùºÎ¶¨ ÏúÑÏä§ÌÇ§.", descEn: "Triple distilled for ultimate smoothness. An approachable daily dram." },
            { name: "Ï°∞ÎãàÏõåÏª§ Î∏îÎûôÎùºÎ≤®", nameEn: "Johnnie Walker Black Label", age: "12ÎÖÑ", style: "Blended Scotch", tags: ["smoky", "balanced", "fruit", "classic"], abv: 40, archetype: ["ENTJ", "INTJ"], priceKrw: 39000, priceRangeKrw: "39,000Ïõê ~ 48,000Ïõê", priceUsd: 30, variants: [{vol: "500ml", price: 32000}, {vol: "700ml", price: 39000}, {vol: "1L", price: 58000}], desc: "[GQ Ï∂îÏ≤ú] Ïä§Î™®ÌÇ§ÏôÄ Í≥ºÏùºÏùò ÏôÑÎ≤ΩÌïú Í∑†Ìòï. ÌïòÏù¥Î≥º, ÎãàÌä∏ Ïñ¥ÎîîÏóêÎÇò Ïñ¥Ïö∏Î¶¨Îäî ÍµêÍ≥ºÏÑúÏ†Å ÏúÑÏä§ÌÇ§.", descEn: "Perfect balance of smoke and fruit. The textbook blended scotch." },
            { name: "Î©îÏù¥Ïª§Ïä§ ÎßàÌÅ¨", nameEn: "Maker's Mark", age: "NAS", style: "Wheated Bourbon", tags: ["sweet", "floral", "smooth", "vanilla"], abv: 45, archetype: ["ESFJ", "ISFP"], priceKrw: 39800, priceRangeKrw: "39,800Ïõê ~ 49,000Ïõê", priceUsd: 28, variants: [{vol: "750ml", price: 39800}, {vol: "200ml", price: 17000}], desc: "Î∂âÏùÄ Î∞ÄÎûçÏùò ÏÉÅÏßï. Ìò∏Î∞Ä ÎåÄÏã† Î∞ÄÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Î∂ÄÎìúÎüΩÍ≥† Îã¨ÏΩ§Ìïú ÍΩÉÌñ•Í∏∞.", descEn: "Iconic red wax. Uses wheat instead of rye for a soft, floral sweetness." },
            { name: "Î™ΩÌÇ§ÏàÑÎçî", nameEn: "Monkey Shoulder", age: "NAS", style: "Blended Malt", tags: ["vanilla", "orange", "creamy", "fresh"], abv: 40, archetype: ["ESFP", "ENFP"], priceKrw: 42000, priceRangeKrw: "42,000Ïõê ~ 52,000Ïõê", priceUsd: 32, variants: [{vol: "700ml", price: 42000}, {vol: "1L", price: 55000}], desc: "[GQ Ï∂îÏ≤ú] Î™∞Ìä∏ 100% Î∏îÎ†åÎî©. Î∂ÄÎìúÎüΩÍ≥† Ìñ•Í∏ãÌïòÏó¨ Îß§Ïö¥ ÏùåÏãùÍ≥ºÎèÑ ÌõåÎ•≠Ìïú Ï°∞ÌôîÎ•º Ïù¥Î£πÎãàÎã§.", descEn: "100% Malt blend. Sweet and creamy with notes of vanilla and orange." },
            { name: "ÏôÄÏùºÎìúÌÑ∞ÌÇ§ 101 8ÎÖÑ", nameEn: "Wild Turkey 101 8 Year", age: "8ÎÖÑ", style: "High Rye Bourbon", tags: ["spicy", "vanilla", "oak", "bold"], abv: 50.5, archetype: ["ESTP", "ENTP"], priceKrw: 42000, priceRangeKrw: "42,000Ïõê ~ 50,000Ïõê", priceUsd: 25, variants: [{vol: "700ml", price: 42000}, {vol: "1L", price: 49800}], desc: "[GQ Ï∂îÏ≤ú] 101 ÌîÑÎ£®ÌîÑ(50.5ÎèÑ)Ïùò ÌôîÎÅàÌïú ÌéÄÏπò. Í±∞Ïπú ÏïåÏΩîÏò¨ Ìñ•ÏùÑ Î©ãÏßÄÍ≤å Ïû°ÏïÑÏ£ºÎäî Î¨µÏßÅÌïú Î≤ÑÎ≤à.", descEn: "101 Proof kick with 8 years of aging. The definitive bold bourbon." },
            { name: "ÏòêÎ°úÏö∞Î°úÏ¶à ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏïÑÎ©îÎ¶¨Ïπ∏", nameEn: "Yellow Rose Premium American", age: "NAS", style: "American Whiskey", tags: ["sweet", "vanilla", "smooth", "light"], abv: 40, archetype: ["ESFJ", "ENFP"], priceKrw: 55000, priceRangeKrw: "50,000ÏõêÎåÄ", priceUsd: 40, variants: [{vol: "700ml", price: 55000}], desc: "[GQ Ï∂îÏ≤ú] Î∂ÄÎìúÎü¨Ïö¥ Î∞îÎãêÎùºÏôÄ ÎßêÎ¶∞ Î∞îÎÇòÎÇòÏπ©Ïùò Îã¨ÏΩ§Ìï®. Ï¥àÎ≥¥ÏûêÎèÑ Í±∞Î∂ÄÍ∞ê ÏóÜÏù¥ Ï¶êÍ∏∞Îäî Îßõ.", descEn: "Approachable for beginners. Characterized by vanilla and dried banana chip sweetness." },
            { name: "ÌÉêÎÇòÎ∂àÎ¶∞ ÏÖ∞Î¶¨Ï∫êÏä§ÌÅ¨", nameEn: "Tamnavulin Sherry Cask", age: "NAS", style: "Speyside Single Malt", tags: ["sweet", "sherry", "smooth", "vanilla"], abv: 40, archetype: ["ISFJ", "ESFJ", "ISFP"], priceKrw: 50000, priceRangeKrw: "50,000ÏõêÎåÄ", priceUsd: 35, variants: [{vol: "700ml", price: 50000}], desc: "[GQ Ï∂îÏ≤ú] ÏúÑÎ¶∞Ïù¥Îì§ÏùÑ ÏúÑÌïú ÏÖ∞Î¶¨ ÏûÖÎ¨∏Ïö©. Ìå¨ÏºÄÏù¥ÌÅ¨, Ïò§Î†åÏßÄÏùò Îã¨ÏΩ§ÌïòÍ≥† Îî∞ÎúªÌïú Ìñ•Ïù¥ ÌäπÏßï.", descEn: "A sherry whisky for beginners. Sweet and smooth with hints of orange and pancake." },
            { name: "Ïï±ÏÜîÎ£®Ìä∏ Î≥¥ÎìúÏπ¥", nameEn: "Absolut Vodka", age: "NAS", style: "Vodka", tags: ["clean", "standard", "value", "bold"], abv: 40, archetype: ["ESTP", "ESFP", "ISTP"], priceKrw: 30000, priceRangeKrw: "30,000ÏõêÎåÄ", priceUsd: 20, variants: [{vol: "750ml", price: 30000}], desc: "Ïä§Ïõ®Îç¥Ïùò ÏïÑÏù¥ÏΩò. Í∑πÎèÑÎ°ú ÍπîÎÅîÌïòÏó¨ Ïñ¥Îñ§ ÎØπÏÑúÏôÄÎèÑ ÏôÑÎ≤ΩÌïòÍ≤å Ïñ¥Ïö∏Î¶¨Îäî Ï†ïÏßÅÌïú Î≥¥ÎìúÏπ¥.", descEn: "The Swedish icon. A clean, honest vodka that mixes well with anything." },

            // --- 50k - 100k ---
            { name: "ÏôÄÏùºÎìúÌÑ∞ÌÇ§ Î†àÏñ¥Î∏åÎ¶¨Îìú", nameEn: "Wild Turkey Rare Breed", age: "NAS", style: "Barrel Proof Bourbon", tags: ["spicy", "caramel", "bold", "cask_strength"], abv: 58.4, archetype: ["ENTJ", "ESTJ"], priceKrw: 80000, priceRangeKrw: "80,000Ïõê ~ 95,000Ïõê", priceUsd: 50, variants: [{vol: "750ml", price: 80000}], desc: "Î¨º ÌÉÄÏßÄ ÏïäÏùÄ ÏïºÏàòÏùò Ïã¨Ïû•. 58.4ÎèÑÏùò Í∞ïÎ†¨ÌïòÍ≥† ÏßÑÎìùÌïú Ïπ¥ÎùºÎ©ú Ìè≠ÌÉÑ.", descEn: "Undiluted intensity. A 58.4% caramel bomb with a beastly heart." },
            { name: "ÌÉàÎ¶¨Ïä§Ïª§ 10ÎÖÑ", nameEn: "Talisker 10 Year", age: "10ÎÖÑ", style: "Island Single Malt", tags: ["smoky", "peppery", "maritime", "salty"], abv: 45.8, archetype: ["ISTP", "ENTP"], priceKrw: 69000, priceRangeKrw: "69,000Ïõê ~ 82,000Ïõê", priceUsd: 60, variants: [{vol: "700ml", price: 69000}, {vol: "200ml", price: 28000}], desc: "[GQ Ï∂îÏ≤ú] Í±∞Ïπú Î∞îÎã§ ÏïûÏóêÏÑú ÎπöÏñ¥ÏßÑ ÌîºÌä∏ ÏúÑÏä§ÌÇ§Ïùò ÍµêÍ≥ºÏÑú. Íµ¥Ïù¥ÎÇò Ìï¥ÏÇ∞Î¨ºÍ≥º ÌõåÎ•≠Ìïú ÌéòÏñ¥ÎßÅ.", descEn: "Sea salt and peppery spice. Truly 'Made by the Sea'." },
            { name: "Í∏ÄÎ†åÎ™®Î†åÏßÄ Ïò§Î¶¨ÏßÄÎÑê", nameEn: "Glenmorangie The Original", age: "10ÎÖÑ", style: "Highland Single Malt", tags: ["citrus", "floral", "vanilla", "elegant"], abv: 40, archetype: ["ENFP", "INFP"], priceKrw: 65000, priceRangeKrw: "65,000Ïõê ~ 79,000Ïõê", priceUsd: 40, variants: [{vol: "700ml", price: 65000}], desc: "Ïä§ÏΩîÌãÄÎûúÎìúÏóêÏÑú Í∞ÄÏû• Î™©Ïù¥ Í∏¥ Ï¶ùÎ•òÍ∏∞ÏóêÏÑú ÌÉÑÏÉùÌïú ÏÑ¨ÏÑ∏ÌïòÍ≥† Ïö∞ÏïÑÌïú Îßõ.", descEn: "Delicate and elegant, born from Scotland's tallest stills." },
            { name: "Ïã±Í∏ÄÌÜ§ ÎçîÌîÑÌÉÄÏö¥ 12ÎÖÑ", nameEn: "Singleton Dufftown 12YO", age: "12ÎÖÑ", style: "Speyside Single Malt", tags: ["smooth", "fresh", "light", "mellow"], abv: 40, archetype: ["ISFP", "INFP", "ENFJ"], priceKrw: 70000, priceRangeKrw: "60,000Ïõê ~ 70,000Ïõê", priceUsd: 50, variants: [{vol: "700ml", price: 70000}], desc: "[GQ Ï∂îÏ≤ú] Ï≤≠ÏÇ¨Í≥º Ìñ•Ïùò Î∂ÄÎìúÎü¨Ïö¥ ÌíçÎØ∏. ÏïÑÏ∞îÌïú ÏûêÍ∑πÎ≥¥Îã§Îäî ÌèâÏïàÌïú ÏùºÏÉÅÏóê Ïûò Ïñ¥Ïö∏Î¶¨Îäî Ìïú Ïûî.", descEn: "Perfect for a peaceful day. A comfortable daily dram carrying smooth green apple flavors." },
            { name: "ÎÑ§Ïù¥ÌÇ§Îìú Î™∞Ìä∏", nameEn: "Naked Malt", age: "NAS", style: "Blended Malt", tags: ["sweet", "fruity", "sherry", "rich"], abv: 40, archetype: ["ESFP", "ESTP"], priceKrw: 60000, priceRangeKrw: "60,000ÏõêÎåÄ", priceUsd: 45, variants: [{vol: "700ml", price: 60000}], desc: "[GQ Ï∂îÏ≤ú] Îß•Ï∫òÎûÄ Îì± Ïú†Î™Ö Ïã±Í∏ÄÎ™∞Ìä∏Î•º Î∏îÎ†åÎî©Ìï¥ ÏÖ∞Î¶¨ Ï∫êÏä§ÌÅ¨Ïóê Ï∂îÍ∞Ä ÏàôÏÑ±. Í±¥Ìè¨ÎèÑ ÌíçÎØ∏Í∞Ä ÏùºÌíà.", descEn: "Extra matured in sherry casks. Raisin and dried fruit flavors make it great for BBQs." },
            { name: "Ï£ºÎùº ÌîÑÎ†åÏπòÏò§ÌÅ¨", nameEn: "Jura French Oak", age: "NAS", style: "Island Single Malt", tags: ["floral", "fruity", "smooth", "vanilla"], abv: 40, archetype: ["INFP", "INFJ"], priceKrw: 90000, priceRangeKrw: "90,000ÏõêÎåÄ", priceUsd: 65, variants: [{vol: "700ml", price: 90000}], desc: "[GQ Ï∂îÏ≤ú] ÎÇ¥ Í≥µÍ∞ÑÏùÑ Îî∞ÎúªÌïòÍ≤å Íæ∏Î©∞Ï£ºÎäî Ïà†. Î∂ÄÎìúÎü¨Ïö¥ Í≥ºÏùºÌñ•Í≥º Î∞îÎãêÎùº ÎùºÎñº Í∞ôÏùÄ Ìñ•ÎØ∏.", descEn: "Soft fruit and floral notes. Hints of vanilla and caramel latte fill the room warmly." },
            { name: "Í∏ÄÎ†åÍ∑∏ÎûÄÌä∏ ÏïÑÎ≥¥ÎûÑÎ¶¨Ïä§", nameEn: "GlenGrant Arboralis", age: "NAS", style: "Speyside Single Malt", tags: ["fresh", "floral", "light", "citrus"], abv: 40, archetype: ["INTP", "ISTJ"], priceKrw: 60000, priceRangeKrw: "60,000ÏõêÎåÄ", priceUsd: 45, variants: [{vol: "700ml", price: 60000}], desc: "[GQ Ï∂îÏ≤ú] Í≥ÑÍ≥°Î¨ºÏ≤òÎüº ÎßëÍ≥† ÌôîÏÇ¨Ìïú ÌíçÎØ∏. ÏãúÏõêÌïú ÌïòÏù¥Î≥ºÎ°ú Îì§Ïù¥ÏºúÎ©¥ ÌïòÎ£®Ïùò ÌîºÎ°úÍ∞Ä ÏîªÍ≤®ÎÇòÍ∞ëÎãàÎã§.", descEn: "Clear and bright like valley water. A highball of this washes away the day's fatigue." },
            { name: "Îçî Í∏ÄÎ†åÎ¶¨Î≤≥ 12ÎÖÑ", nameEn: "The Glenlivet 12 Years Old", age: "12ÎÖÑ", style: "Speyside Single Malt", tags: ["fruity", "fresh", "smooth", "balanced"], abv: 40, archetype: ["ENFJ", "ESFJ"], priceKrw: 90000, priceRangeKrw: "80,000Ïõê ~ 90,000Ïõê", priceUsd: 65, variants: [{vol: "700ml", price: 90000}], desc: "[GQ Ï∂îÏ≤ú] Ìú¥ÏñëÏßÄÎ°ú Îñ†ÎÇòÍ≥† Ïã∂ÏùÄ Ïã±Í∑∏Îü¨ÏõÄ. Ïûò ÏùµÏùÄ ÌååÏù∏Ïï†ÌîåÍ≥º ÏÇ¨Í≥ºÏùò Î∂ÄÎìúÎüΩÍ≥† Îã¨ÏΩ§Ìïú ÌíçÎØ∏.", descEn: "Fresh ripe pineapple and apple notes. It brings the urge to escape to a resort." },
            { name: "Î∂ÄÎÇòÌïòÎ≤§ 12ÎÖÑ", nameEn: "Bunnahabhain 12 Year", age: "12ÎÖÑ", style: "Unpeated Islay", tags: ["nutty", "sherry", "rich", "seaweed"], abv: 46.3, archetype: ["INFJ", "ISTJ"], priceKrw: 89000, priceRangeKrw: "89,000Ïõê ~ 110,000Ïõê", priceUsd: 65, variants: [{vol: "700ml", price: 89000}], desc: "ÌîºÌä∏ ÏóÜÎäî ÏïÑÏùºÎùº. ÏÖ∞Î¶¨ÏôÄ Î∞îÎã§ ÎÇ¥ÏùåÏùò ÎèÖÌäπÌïòÍ≥† ÌíçÏÑ±Ìïú Ï°∞Ìôî.", descEn: "Unpeated Islay. A unique, rich blend of sherry and sea air." },
            { name: "Í∑∏Î†àÏù¥ Íµ¨Ïä§", nameEn: "Grey Goose", age: "NAS", style: "Vodka", tags: ["smooth", "clean", "classic", "elegant"], abv: 40, archetype: ["ENTJ", "ESTJ", "ISFJ"], priceKrw: 60000, priceRangeKrw: "60,000ÏõêÎåÄ", priceUsd: 45, variants: [{vol: "750ml", price: 60000}], desc: "ÌîÑÎûëÏä§ ÌîÑÎ¶¨ÎØ∏ÏóÑ Î≥¥ÎìúÏπ¥. Í∑πÎèÑÎ°ú ÏÑ¨ÏÑ∏ÌïòÍ≥† Î∂ÄÎìúÎü¨Ïö¥ ÏßàÍ∞êÏúºÎ°ú Ïñ¥Îñ§ Í∏∞Î∂ÑÏóêÎèÑ ÏôÑÎ≤ΩÌûà Ïä§Î©∞Îì≠ÎãàÎã§.", descEn: "Premium French vodka. Extremely clean and smooth texture makes it a perfect base." },
            { name: "Î≤®Î≤†Îç∞Î†à", nameEn: "Belvedere", age: "NAS", style: "Vodka", tags: ["smooth", "vanilla", "rich", "elegant"], abv: 40, archetype: ["INTJ", "INFJ"], priceKrw: 70000, priceRangeKrw: "70,000ÏõêÎåÄ", priceUsd: 55, variants: [{vol: "700ml", price: 70000}], desc: "Ìè¥ÎûÄÎìú Îü≠ÏÖîÎ¶¨ Î≥¥ÎìúÏπ¥. Ìò∏Î∞ÄÏóêÏÑú Ïò§Îäî ÏùÄÏùÄÌïú Î∞îÎãêÎùº Ìñ•Í≥º ÌÅ¨Î¶¨ÎØ∏Ìïú ÏßàÍ∞êÏù¥ ÏùºÌíàÏûÖÎãàÎã§.", descEn: "Polish luxury vodka. Features subtle vanilla notes and a creamy texture." },

            // --- 100k - 200k ---
            { name: "ÎùºÍ∞ÄÎ∂àÎ¶∞ 16ÎÖÑ", nameEn: "Lagavulin 16 Year", age: "16ÎÖÑ", style: "Peated Islay", tags: ["smoky", "seaweed", "intense", "rich"], abv: 43, archetype: ["INTJ", "INFJ"], priceKrw: 135000, priceRangeKrw: "135,000Ïõê ~ 160,000Ïõê", priceUsd: 100, variants: [{vol: "700ml", price: 135000}], desc: "ÏïÑÏùºÎùºÏùò Ï†úÏôï. Í∞ïÎ†¨Ìïú ÌîºÌä∏ÏôÄ ÏÖ∞Î¶¨Ïùò Ï°∞ÌôîÍ∞Ä Ï£ºÎäî Ï§ëÌõÑÌïú Îß§Î†•.", descEn: "The King of Islay. A profound harmony of intense peat and sherry." },
            { name: "Îß•Ï∫òÎûÄ 12ÎÖÑ ÏÖ∞Î¶¨Ïò§ÌÅ¨", nameEn: "Macallan 12Y Sherry Oak", age: "12ÎÖÑ", style: "Sherry Oak", tags: ["fruity", "spiced", "sweet", "rich"], abv: 40, archetype: ["ISFJ", "ESFJ"], priceKrw: 130000, priceRangeKrw: "130,000Ïõê ~ 155,000Ïõê", priceUsd: 95, variants: [{vol: "700ml", price: 130000}], desc: "ÏÖ∞Î¶¨ ÏúÑÏä§ÌÇ§Ïùò Í∏∞Ï§Ä. ÎßêÎ¶∞ Í≥ºÏùºÍ≥º Ìñ•Ïã†Î£åÏùò Í≥†Í∏âÏä§Îü¨Ïö¥ ÌíçÎØ∏.", descEn: "The benchmark of sherry whisky. Luxurious dried fruit and spice notes." },
            { name: "Í∏ÄÎ†åÌîºÎîï 15ÎÖÑ", nameEn: "Glenfiddich 15 Year", age: "15ÎÖÑ", style: "Solera Reserve", tags: ["honey", "vanilla", "balanced", "sweet"], abv: 40, archetype: ["ENFJ", "INFP"], priceKrw: 115000, priceRangeKrw: "110,000Ïõê ~ 125,000Ïõê", priceUsd: 70, variants: [{vol: "700ml", price: 115000}, {vol: "500ml", price: 85000}], desc: "[GQ Ï∂îÏ≤ú] Ï≤´ ÎßõÏùÄ Í∞ïÎ†¨ÌïòÏßÄÎßå Íµ¨ÏàòÌïòÍ≥† Í∑∏Î¶¨Ïö¥ Ïó¨Ïö¥ÏùÑ ÎÇ®ÍπÅÎãàÎã§. ÍøÄÏ≤òÎüº Îã¨ÏΩ§Ìïú Î∞∏Îü∞Ïä§.", descEn: "Intense start but leaves a nostalgic, honey-sweet smooth balance." },
            { name: "Î∞úÎ≤†Îãà 12ÎÖÑ ÎçîÎ∏îÏö∞Îìú", nameEn: "Balvenie 12Y DoubleWood", age: "12ÎÖÑ", style: "Balanced Malt", tags: ["honey", "nutty", "mellow", "smooth"], abv: 40, archetype: ["ISFP", "INTP"], priceKrw: 115000, priceRangeKrw: "115,000Ïõê ~ 135,000Ïõê", priceUsd: 75, variants: [{vol: "700ml", price: 115000}], desc: "Îëê Í∞ÄÏßÄ Ïò§ÌÅ¨ÌÜµ ÏàôÏÑ±ÏúºÎ°ú ÏôÑÏÑ±Îêú ÍøÄÍ≥º Í≤¨Í≥ºÎ•òÏùò Ï†ïÏÑùÏ†ÅÏù∏ Îßõ.", descEn: "Honey and nuts perfected by maturation in two types of oak." },
            { name: "ÏïÑÎìúÎ≤° 10ÎÖÑ", nameEn: "Ardbeg 10Y", age: "10ÎÖÑ", style: "Peated Islay", tags: ["smoky", "medicinal", "citrus", "intense"], abv: 46, archetype: ["ENTP", "INTP"], priceKrw: 105000, priceRangeKrw: "100,000ÏõêÎåÄ Ï¥àÎ∞ò", priceUsd: 70, variants: [{vol: "700ml", price: 105000}], desc: "[GQ Ï∂îÏ≤ú] Í∑∏Ïñ¥Îñ§ ÏúÑÏä§ÌÇ§Î≥¥Îã§ Í∞ïÎ†¨Ìïú ÏöîÏò§ÎìúÏôÄ ÌîºÌä∏ Ìñ•. Î†àÎ™¨ÏùÑ ÎøåÎ¶∞ ÏïÑÎìúÎ≤° ÌïòÏù¥Î≥ºÏùÄ Îß§Î†•Ï†ÅÏûÖÎãàÎã§.", descEn: "Intense peat and iodine. An Ardbeg highball with lemon is exceptionally charming." },
            { name: "ÏïÑÎìúÎ≤° ÏΩîÎ¶¨Î∏åÎ†àÏπ∏", nameEn: "Ardbeg Corryvreckan", age: "NAS", style: "High Vol Peat", tags: ["smoky", "medicinal", "citrus", "intense", "cask_strength"], abv: 57.1, archetype: ["INTJ", "ISTJ"], priceKrw: 165000, priceRangeKrw: "165,000Ïõê ~ 190,000Ïõê", priceUsd: 120, variants: [{vol: "700ml", price: 165000}], desc: "ÏÜåÏö©ÎèåÏù¥ÏπòÎäî Í∞ïÎ†¨Ìïú ÌîºÌä∏ÏôÄ Ïä§ÌååÏù¥Ïä§. ÌîºÌä∏ ÎßàÎãàÏïÑÏùò ÎèÑÏ†Ñ Í≥ºÏ†ú.", descEn: "Swirling intense peat and spice. A challenge for peat lovers." },
            { name: "Îã¨Î™®Ïñ¥ Ìè¨Ìä∏Ïö∞Îìú", nameEn: "Dalmore Port Wood", age: "NAS", style: "Highland Single Malt", tags: ["smooth", "chocolate", "fruity", "elegant", "mellow"], abv: 46.5, archetype: ["INFJ", "ENFJ", "ISFJ"], priceKrw: 150000, priceRangeKrw: "150,000ÏõêÎåÄ", priceUsd: 110, variants: [{vol: "700ml", price: 150000}], desc: "[GQ Ï∂îÏ≤ú] Î∞òÏ†Ñ Ïä§ÌÜ†Î¶¨. Î≥¥Î¶¨Ïùò Í≥†ÏÜåÌï®, Ï¥àÏΩúÎ¶ø Ïª§Ìîº, Î∂âÏùÄ Î≤†Î¶¨Ïùò Ìñ•Í∏∞Í∞Ä ÌÖêÏÖòÏùÑ Î∂ÄÎìúÎüΩÍ≤å ÌíÄÏñ¥Ï§çÎãàÎã§.", descEn: "A twist of smoothness. Roasted barley, chocolate coffee, and red berry notes melt away tension." },
            { name: "Ìó§ÎÑ§Ïãú VSOP", nameEn: "Hennessy V.S.O.P", age: "VSOP", style: "Cognac", tags: ["rich", "fruity", "oak", "smooth", "classic"], abv: 40, archetype: ["ENTJ", "ENFJ", "ESTJ"], priceKrw: 120000, priceRangeKrw: "120,000ÏõêÎåÄ", priceUsd: 85, variants: [{vol: "700ml", price: 120000}], desc: "Ìè¨ÎèÑ Ï¶ùÎ•òÏ£ºÏùò Ï†ïÏ†ê. Ï†Ñ ÏÑ∏Í≥ÑÏóêÏÑú Í∞ÄÏû• ÏÇ¨ÎûëÎ∞õÎäî Íº¨ÎÉëÏúºÎ°ú ÌíçÏÑ±Ìïú Í≥ºÏùºÌñ•Í≥º Ïò§ÌÅ¨Ìñ•Ïù¥ Îß§Î†•Ï†ÅÏûÖÎãàÎã§.", descEn: "The most loved Cognac worldwide. A masterpiece of harmonious fruit and oak notes." },
            { name: "Î†àÎØ∏ ÎßàÌã¥ VSOP", nameEn: "R√©my Martin V.S.O.P", age: "VSOP", style: "Cognac", tags: ["floral", "fruity", "elegant", "smooth"], abv: 40, archetype: ["INFJ", "ISFJ", "ISFP"], priceKrw: 110000, priceRangeKrw: "110,000ÏõêÎåÄ", priceUsd: 80, variants: [{vol: "700ml", price: 110000}], desc: "ÏÑ¨ÏÑ∏Ìïú Íº¨ÎÉëÏùò Ï≤ôÎèÑ. ÏùÄÏùÄÌïú ÍΩÉÌñ•Í∏∞ÏôÄ Ïûò ÏùµÏùÄ Í≥ºÏùºÏùò ÌíçÎØ∏Í∞Ä Ïö∞ÏïÑÌïòÍ≥† Í∏∏Í≤å ÎÇ®ÏäµÎãàÎã§.", descEn: "Delicate floral and ripe fruit flavors. Leaves a long, smooth, and elegant finish." },

            // --- 200k+ ---
            { name: "Ï°∞ÎãàÏõåÏª§ Î∏îÎ£®ÎùºÎ≤®", nameEn: "Johnnie Walker Blue Label", age: "NAS", style: "Premium Blend", tags: ["balanced", "smoke", "velvet", "rich"], abv: 40, archetype: ["ENTJ", "ENFJ"], priceKrw: 240000, priceRangeKrw: "240,000Ïõê ~ 310,000Ïõê", priceUsd: 200, variants: [{vol: "500ml", price: 160000}, {vol: "750ml", price: 240000}, {vol: "1L", price: 310000}], desc: "1Îßå Í∞ú Ï§ë ÌïòÎÇòÏùò Ïò§ÌÅ¨ÌÜµ. ÎπÑÎã®Í≤∞ Í∞ôÏùÄ Î™©ÎÑòÍπÄÏùò Î∏îÎ†åÎîîÎìú ÎÅùÌåêÏôï.", descEn: "One in ten thousand casks. The velvety pinnacle of blended whisky." },
            { name: "Í∏ÄÎ†åÎìúÎ°úÎÇô 18ÎÖÑ", nameEn: "Glendronach 18 Year", age: "18ÎÖÑ", style: "Sherry Bomb", tags: ["rich", "chocolate", "fruity", "complex"], abv: 46, archetype: ["INFJ", "INTJ"], priceKrw: 310000, priceRangeKrw: "310,000Ïõê ~ 380,000Ïõê", priceUsd: 230, variants: [{vol: "700ml", price: 310000}], desc: "Íæ∏ÎçïÌïú ÏÖ∞Î¶¨ Ìè≠ÌÉÑ. Îã§ÌÅ¨ Ï¥àÏΩúÎ¶øÍ≥º Í±¥Í≥ºÏùºÏùò ÏßÑÌïú Ïó¨Ïö¥.", descEn: "A thick sherry bomb. Deep finish of dark chocolate and dried fruit." },
            { name: "ÏïºÎßàÏûêÌÇ§ 12ÎÖÑ", nameEn: "Yamazaki 12 Year", age: "12ÎÖÑ", style: "Japanese Single Malt", tags: ["floral", "fruit", "spice", "mizunara"], abv: 43, archetype: ["ISFJ", "ISTJ"], priceKrw: 290000, priceRangeKrw: "290,000Ïõê ~ 450,000Ïõê", priceUsd: 180, variants: [{vol: "700ml", price: 290000}], desc: "ÏùºÎ≥∏ ÏúÑÏä§ÌÇ§Ïùò Ï†ÑÏÑ§. ÎØ∏Ï¶àÎÇòÎùº Ïò§ÌÅ¨Ïùò Ïã†ÎπÑÎ°úÏö¥ Ìñ•ÎÇòÎ¨¥ ÌíçÎØ∏.", descEn: "Japanese legend. Mysterious incense notes from Mizunara oak." },
            { name: "Î°úÏñÑÏÇ¥Î£®Ìä∏ 21ÎÖÑ", nameEn: "Royal Salute 21 Year", age: "21ÎÖÑ", style: "Royal Blend", tags: ["smooth", "sweet", "floral", "classic"], abv: 40, archetype: ["ESTJ", "ESFJ"], priceKrw: 200000, priceRangeKrw: "200,000Ïõê ~ 260,000Ïõê", priceUsd: 160, variants: [{vol: "500ml", price: 140000}, {vol: "700ml", price: 210000}], desc: "Ïó¨ÏôïÏùÑ ÏúÑÌïú Ïà†. ÎèÑÏûêÍ∏∞ Î≥ëÏóê Îã¥Í∏¥ Î∂ÄÎìúÎü¨ÏõÄÏùò Í∑πÏπò.", descEn: "Fit for a Queen. Ultimate smoothness in a porcelain flagon." },
            { name: "Î∞úÎ†åÌÉÄÏù∏ 30ÎÖÑ", nameEn: "Ballantine's 30 Year", age: "30ÎÖÑ", style: "Ultra Premium Blend", tags: ["complex", "honey", "vanilla", "elegant"], abv: 40, archetype: ["ENTJ", "ESTJ"], priceKrw: 480000, priceRangeKrw: "480,000Ïõê ~ 600,000Ïõê", priceUsd: 380, variants: [{vol: "700ml", price: 480000}], desc: "ÏãúÍ∞ÑÏù¥ ÎπöÏñ¥ÎÇ∏ ÏòàÏà†. ÏôÑÎ≤ΩÏóê Í∞ÄÍπåÏö¥ Î∞∏Îü∞Ïä§ÏôÄ ÎÅùÏóÜÎäî Ïó¨Ïö¥.", descEn: "Art crafted by time. Near-perfect balance and endless finish." },
            { name: "Îß•Ï∫òÎûÄ 18ÎÖÑ ÏÖ∞Î¶¨Ïò§ÌÅ¨", nameEn: "Macallan 18Y Sherry Oak", age: "18ÎÖÑ", style: "Luxury Single Malt", tags: ["rich", "spicy", "orange", "iconic"], abv: 43, archetype: ["ESTP", "ESFP"], priceKrw: 520000, priceRangeKrw: "520,000Ïõê ~ 650,000Ïõê", priceUsd: 420, variants: [{vol: "700ml", price: 520000}], desc: "Ïã±Í∏ÄÎ™∞Ìä∏Ïùò Î°§Ïä§Î°úÏù¥Ïä§. ÏïïÎèÑÏ†ÅÏù∏ ÏÖ∞Î¶¨ ÌíçÎØ∏ÏôÄ Îü≠ÏÖîÎ¶¨Ìï®.", descEn: "The Rolls-Royce of malts. Overwhelming sherry flavor and luxury." },
            { name: "ÌûàÎπÑÌÇ§ 21ÎÖÑ", nameEn: "Hibiki 21 Year", age: "21ÎÖÑ", style: "Japanese Blend", tags: ["harmony", "fruit", "sandalwood", "complex"], abv: 43, archetype: ["INFJ", "ISFP"], priceKrw: 850000, priceRangeKrw: "850,000Ïõê ~ 1,200,000Ïõê", priceUsd: 750, variants: [{vol: "700ml", price: 850000}], desc: "ÏùºÎ≥∏Ïùò ÏÇ¨Í≥ÑÏ†àÏùÑ Îã¥ÏùÄ Ï°∞Ìôî. ÏÉåÎã¨Ïö∞ÎìúÏôÄ Ïò§ÌÅ¨Ïùò ÍπäÏùÄ Ïö∏Î¶º.", descEn: "Harmony of Japan's seasons. Deep resonance of sandalwood and oak." }
        ];

        // --- 2. Helper Components ---
        
        const Icon = ({ name, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide && iconRef.current) {
                    window.lucide.createIcons({
                        attrs: { class: className },
                        name: name,
                        parentElement: iconRef.current
                    });
                }
            }, [name, className]);
            return <span ref={iconRef} className="inline-block" />;
        };

        const LoadingScreen = ({ lang }) => {
            const [msgIndex, setMsgIndex] = useState(0);
            const messages = {
                ko: ["MBTI ÏÑ±Ìñ• Î∂ÑÏÑù Ï§ë...", "Î∞îÏù¥Ïò§Î¶¨Îì¨ Îç∞Ïù¥ÌÑ∞ Ïó∞ÏÇ∞ Ï§ë...", "ÌñâÎèôÍ≤ΩÏ†úÌïô Î©îÏª§ÎãàÏ¶ò Î∂ÑÏÑù Ï§ë...", "Ïù∏ÏßÄÏ†Å ÌåêÎã® Ìé∏Ìñ• ÌôïÏù∏ Ï§ë...", "ÎãπÏã†ÏùÑ ÏúÑÌïú ÏôÑÎ≤ΩÌïú Ìïú Ïûî Ï§ÄÎπÑ Ï§ë..."],
                en: ["Analyzing MBTI Archetype...", "Calculating Biorhythm Data...", "Analyzing Behavioral Economics...", "Checking Cognitive Bias...", "Pouring Your Perfect Drink..."]
            };

            useEffect(() => {
                const interval = setInterval(() => {
                    setMsgIndex(prev => (prev + 1) % messages[lang].length);
                }, 600); 
                return () => clearInterval(interval);
            }, [lang]);

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center animate-in fade-in">
                    <div className="relative mb-10">
                        <div className="absolute inset-0 bg-teal-500 rounded-full blur-xl opacity-20 animate-pulse"></div>
                        <div className="relative p-6 bg-white dark:bg-slate-800 rounded-full shadow-2xl border border-teal-100 dark:border-slate-700">
                            <Icon name="loader-2" className="w-12 h-12 text-teal-600 dark:text-teal-400 animate-spin" />
                        </div>
                    </div>
                    <h3 className="text-xl font-bold text-slate-800 dark:text-slate-200 mb-2 min-h-[28px]">
                        {messages[lang][msgIndex]}
                    </h3>
                    <div className="w-64 h-2 bg-slate-200 dark:bg-slate-700 rounded-full mt-4 overflow-hidden">
                        <div className="h-full bg-teal-600 animate-progress rounded-full"></div>
                    </div>
                </div>
            );
        };

        const BioIndicator = ({ label, value, icon }) => {
            const isWorst = value < 30;
            const isBest = value > 70;
            const colorClass = isWorst ? 'text-red-500' : (isBest ? 'text-blue-500' : 'text-teal-600');
            
            return (
                <div className="flex flex-col items-center p-4 glass-morphism rounded-2xl shadow-sm">
                    <Icon name={icon} className={`mb-2 ${colorClass}`} />
                    <span className="text-xs text-slate-500 dark:text-slate-400 mb-1">{label}</span>
                    <span className={`text-xl font-bold ${colorClass}`}>{value}%</span>
                </div>
            );
        };

        // --- 3. Modals ---

        const PriceCheckModal = ({ isOpen, onClose, result, lang }) => {
            if (!isOpen || !result) return null;

            const t = TEXT[lang];
            const whiskeyName = lang === 'ko' ? result.whiskey.name : result.whiskey.nameEn;
            const whiskeyAge = result.whiskey.age;
            const variants = result.whiskey.variants || [];
            const priceRange = result.whiskey.priceRangeKrw;

            const formattedPrice = lang === 'ko' 
                ? priceRange || `${result.whiskey.priceKrw.toLocaleString()}Ïõê` 
                : `$${result.whiskey.priceUsd} USD`;

            const handleSearch = (platform) => {
                let url = "";
                const queryPrice = encodeURIComponent(whiskeyName + (lang === 'ko' ? " Í∞ÄÍ≤©" : " price"));
                const queryReview = encodeURIComponent(whiskeyName + (lang === 'ko' ? " Î¶¨Î∑∞" : " review"));
                
                if (platform === 'youtube') {
                    url = `https://www.youtube.com/results?search_query=${queryReview}`;
                } else if (platform === 'blog') {
                    if (lang === 'ko') {
                         url = `https://search.naver.com/search.naver?where=blog&query=${queryPrice}`;
                    } else {
                         url = `https://www.google.com/search?q=${queryReview}`;
                    }
                }
                window.open(url, '_blank');
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-in fade-in duration-200">
                    <div className="w-full max-w-sm bg-white dark:bg-slate-900 rounded-2xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800">
                        <div className="p-6 text-center">
                            <h3 className="text-lg font-bold text-slate-900 dark:text-white mb-2">{t.popup_title}</h3>
                            <p className="text-sm text-slate-500 dark:text-slate-400 mb-6">{t.popup_desc}</p>
                            
                            <div className="mb-6 bg-teal-50 dark:bg-teal-900/30 rounded-xl overflow-hidden">
                                <div className="p-3 bg-teal-100 dark:bg-teal-900/50">
                                    <span className="block text-xs font-bold text-teal-700 dark:text-teal-300">{t.price_label}</span>
                                </div>
                                <div className="p-2 space-y-1">
                                    {variants.map((v, i) => (
                                        <div key={i} className="flex justify-between items-center px-4 py-2 hover:bg-white/50 dark:hover:bg-black/20 rounded-lg border-b border-dashed border-slate-200 dark:border-slate-700 last:border-0">
                                            <span className="text-sm font-medium text-slate-600 dark:text-slate-400">
                                                {whiskeyAge !== 'NAS' ? whiskeyAge : ''} {v.vol}
                                            </span>
                                            <span className="text-lg font-black text-slate-900 dark:text-white">
                                                {lang === 'ko' 
                                                    ? `${v.price.toLocaleString()}Ïõê` 
                                                    : `$${Math.round(v.price / 1350)}`
                                                }
                                            </span>
                                        </div>
                                    ))}
                                    {variants.length === 0 && (
                                        <div className="py-4 text-slate-500">
                                            {formattedPrice} (700ml)
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="space-y-3">
                                <button onClick={() => handleSearch('youtube')} className="w-full py-4 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-colors shadow-sm">
                                    <Icon name="youtube" className="w-5 h-5" />
                                    {t.search_youtube}
                                </button>
                                <button onClick={() => handleSearch('blog')} className={`w-full py-4 px-4 ${lang === 'ko' ? 'bg-[#03C75A] hover:bg-[#02b351]' : 'bg-blue-600 hover:bg-blue-700'} text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-colors shadow-sm`}>
                                    <Icon name={lang === 'ko' ? 'book-open' : 'search'} className="w-5 h-5" />
                                    {t.search_blog}
                                </button>
                            </div>
                        </div>
                        <div className="p-4 border-t border-slate-100 dark:border-slate-800">
                            <button onClick={onClose} className="w-full py-3 text-slate-500 dark:text-slate-400 font-bold text-sm hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors">
                                {t.close_btn}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const CalendarModal = ({ isOpen, onClose, onSelect, selectedDate, lang }) => {
            if (!isOpen) return null;
            
            const [currentYear, setCurrentYear] = useState(selectedDate.getFullYear());
            const [currentMonth, setCurrentMonth] = useState(selectedDate.getMonth());

            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);
            const weekDays = lang === 'ko' 
                ? ['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†'] 
                : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                    <div className="w-full max-w-sm overflow-hidden bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800">
                        <div className="p-4 teal-gradient text-white flex justify-between items-center">
                            <button onClick={() => setCurrentMonth(m => m === 0 ? 11 : m - 1)}><Icon name="chevron-left" /></button>
                            <h3 className="text-lg font-bold">
                                {currentYear}{lang === 'ko' ? 'ÎÖÑ' : '.'} {currentMonth + 1}{lang === 'ko' ? 'Ïõî' : ''}
                            </h3>
                            <button onClick={() => setCurrentMonth(m => m === 11 ? 0 : m + 1)}><Icon name="chevron-right" /></button>
                        </div>
                        <div className="p-4">
                            <div className="grid grid-cols-7 gap-1 text-center text-xs font-semibold text-slate-400 mb-2">
                                {weekDays.map(d => <div key={d}>{d}</div>)}
                            </div>
                            <div className="grid grid-cols-7 gap-1">
                                {Array(firstDay).fill(null).map((_, i) => <div key={`empty-${i}`} />)}
                                {days.map(d => {
                                    const isToday = selectedDate.getDate() === d && selectedDate.getMonth() === currentMonth && selectedDate.getFullYear() === currentYear;
                                    return (
                                        <button 
                                            key={d}
                                            onClick={() => {
                                                onSelect(new Date(currentYear, currentMonth, d));
                                                onClose();
                                            }}
                                            className={`h-10 rounded-lg flex items-center justify-center text-sm transition-colors ${isToday ? 'bg-teal-600 text-white font-bold' : 'hover:bg-teal-100 dark:hover:bg-teal-900/30 text-slate-700 dark:text-slate-300'}`}
                                        >
                                            {d}
                                        </button>
                                    );
                                })}
                            </div>
                            <button onClick={onClose} className="w-full mt-4 py-2 text-sm font-medium text-teal-600 dark:text-teal-400 border border-teal-600/20 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 4. Main App Component ---

        const App = () => {
            const [lang, setLang] = useState('ko'); 
            const [step, setStep] = useState(1);
            const [mbti, setMbti] = useState('INTJ');
            const [selectedMoods, setSelectedMoods] = useState([]);
            // Initialize with ID 1 (Under 50k)
            const [selectedPriceRange, setSelectedPriceRange] = useState(1); 
            const [baseDate, setBaseDate] = useState(new Date());
            const [isCalendarOpen, setIsCalendarOpen] = useState(false);
            const [isLoading, setIsLoading] = useState(false);
            const [isPriceModalOpen, setIsPriceModalOpen] = useState(false);
            
            const [isDarkMode, setIsDarkMode] = useState(() => {
                if (typeof window !== 'undefined') {
                    const savedTheme = localStorage.getItem('whiskey_theme');
                    if (savedTheme) {
                        return savedTheme === 'dark';
                    }
                    return window.matchMedia('(prefers-color-scheme: dark)').matches;
                }
                return false;
            });
            const [result, setResult] = useState(null);

            useEffect(() => {
                const root = document.documentElement;
                if (isDarkMode) {
                    root.classList.add('dark');
                    localStorage.setItem('whiskey_theme', 'dark');
                } else {
                    root.classList.remove('dark');
                    localStorage.setItem('whiskey_theme', 'light');
                }
            }, [isDarkMode]);

            const t = TEXT[lang];

            const handleMoodClick = (moodId) => {
                const moodObj = MOODS.find(m => m.id === moodId);
                let newList = [...selectedMoods];

                if (newList.includes(moodId)) {
                    newList = newList.filter(id => id !== moodId);
                } else {
                    if (newList.length >= 3) return;
                    newList = newList.filter(id => !moodObj.conflicts.includes(id));
                    newList.push(moodId);
                }
                setSelectedMoods(newList);
            };

            const calculateBiorhythm = (date, mbtiString) => {
                const mbtiHash = mbtiString.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
                const seed = date.getTime() + (mbtiHash * 100000);
                const calculate = (period) => Math.sin((seed / (24 * 60 * 60 * 1000) / period) * 2 * Math.PI);
                return {
                    physical: Math.round(calculate(23) * 50 + 50),
                    emotional: Math.round(calculate(28) * 50 + 50),
                    intellectual: Math.round(calculate(33) * 50 + 50)
                };
            };

            const runCuration = () => {
                setIsLoading(true);
                const bio = calculateBiorhythm(baseDate, mbti);
                const avgBio = (bio.physical + bio.emotional + bio.intellectual) / 3;
                let abvTarget = "Standard"; 
                if (avgBio > 65) abvTarget = "High"; 
                if (avgBio < 35) abvTarget = "Low"; 

                const priceRange = PRICE_RANGES.find(r => r.id === selectedPriceRange);
                let availableWhiskies = SPIRITS_DB.filter(w => w.priceKrw >= priceRange.min && w.priceKrw <= priceRange.max);
                
                if (availableWhiskies.length === 0) {
                    availableWhiskies = SPIRITS_DB;
                }

                const scoredWhiskeys = availableWhiskies.map(w => {
                    let score = 0;
                    
                    // 1. Price check
                    if (w.priceKrw < priceRange.min || w.priceKrw > priceRange.max) {
                        score -= 5000;
                    }
                    
                    // 2. Exact Archetype Match Bonus
                    if (w.archetype.includes(mbti)) score += 300;

                    // 3. Dynamic Trait Scoring (E/I, S/N, T/F, J/P)
                    const userTraits = mbti.split('');
                    userTraits.forEach(trait => {
                        const preferredTags = MBTI_TRAIT_PREFS[trait] || [];
                        w.tags.forEach(tag => {
                            if (preferredTags.includes(tag)) {
                                score += 60; 
                            }
                        });
                    });

                    // 4. Mood Match Scoring
                    selectedMoods.forEach(moodId => {
                        const moodData = MOODS.find(m => m.id === moodId);
                        w.tags.forEach(tag => {
                            if (moodData.flavorProfile.includes(tag)) {
                                score += 150;
                            }
                        });
                    });
                    
                    // 5. ABV Match based on Biorhythm
                    if (abvTarget === "High") {
                        if (w.abv >= 50) score += 200; else score -= 100;
                    } else if (abvTarget === "Low") {
                        if (w.abv <= 43) score += 200; else if (w.abv >= 50) score -= 150;
                    } else {
                        if (w.abv >= 40 && w.abv < 50) score += 100;
                    }
                    
                    return { ...w, totalScore: score };
                }).sort((a, b) => b.totalScore - a.totalScore);

                const topWhiskey = scoredWhiskeys[0];
                const analysis = ANALYSIS_LOGIC.generateReport(mbti, selectedMoods, lang);

                let label = "Neutral";
                if (topWhiskey.totalScore >= 800) label = "Best";
                else if (topWhiskey.totalScore >= 500) label = "Good";
                else if (topWhiskey.totalScore < 100) label = "Worst";
                else if (topWhiskey.totalScore < 300) label = "Bad";

                setTimeout(() => {
                    setResult({
                        whiskey: topWhiskey,
                        biorhythm: bio,
                        label: label,
                        abvTarget: abvTarget,
                        analysis: analysis
                    });
                    setStep(4);
                    setIsLoading(false);
                }, 3000);
            };

            // NEW: Run Completely Random Curation
            const runRandomCuration = () => {
                setIsLoading(true);
                
                // 1. Pick a completely random MBTI from the valid types array
                const randomGroup = MBTI_GROUPS[Math.floor(Math.random() * MBTI_GROUPS.length)];
                const randomMbti = randomGroup.types[Math.floor(Math.random() * randomGroup.types.length)];
                
                // 2. Pick a completely random Mood
                const randomMood = MOODS[Math.floor(Math.random() * MOODS.length)].id;
                
                // 3. Pick a completely random Spirit from the database
                const randomSpirit = SPIRITS_DB[Math.floor(Math.random() * SPIRITS_DB.length)];
                
                // Set state so UI reflects the random choices if the user goes back
                setMbti(randomMbti);
                setSelectedMoods([randomMood]);
                
                const bio = calculateBiorhythm(baseDate, randomMbti);
                // We use the new random values directly for the report to ensure sync
                const analysis = ANALYSIS_LOGIC.generateReport(randomMbti, [randomMood], lang);
                
                setTimeout(() => {
                    setResult({
                        whiskey: randomSpirit,
                        biorhythm: bio,
                        label: "Surprise", // Special label for random pick
                        abvTarget: "Any",
                        analysis: analysis
                    });
                    setStep(4);
                    setIsLoading(false);
                }, 3000);
            };

            const resultText = useMemo(() => {
                if (!result) return null;
                const topWhiskey = result.whiskey;
                const introPhrases = {
                    ko: ["Í≤∞Î°†Ï†ÅÏúºÎ°ú ÎßêÏîÄÎìúÎ¶¨Î©¥,", "Îç∞Ïù¥ÌÑ∞Í∞Ä Í∞ÄÎ¶¨ÌÇ§Îäî Îã® ÌïòÎÇòÏùò ÏÑ†ÌÉù,", "Ï†ÑÎ¨∏Í∞ÄÏùò Í¥ÄÏ†êÏóêÏÑú Î≥∏Îã§Î©¥,", "ÎãπÏã†Ïùò Î¶¨Îì¨Ïù¥ ÏõêÌïòÍ≥† ÏûàÎäî Í≤ÉÏùÄ,"],
                    en: ["In conclusion,", "The data points to one choice,", "From an expert's perspective,", "Your rhythm desires this,"]
                };
                const introIndex = topWhiskey.name.length % 4;
                const intro = introPhrases[lang][introIndex];

                const moodString = selectedMoods.map(m => {
                   const mood = MOODS.find(md => md.id === m);
                   return mood ? mood.label[lang] : ""; 
                }).join(', ');
                
                const summary = lang === 'ko'
                    ? `${mbti} ÏÑ±Ìñ•Ïùò ÎÇ¥Î©¥Ï†Å ÌÉêÍµ¨ÏôÄ Ïò§ÎäòÏùò ${moodString} Í∞êÏ†ïÏùÑ ÏôÑÎ≤ΩÌïòÍ≤å Î≥¥ÏôÑÌïòÍ∏∞ ÏúÑÌï¥ ${topWhiskey.style} Ïä§ÌÉÄÏùºÏù¥ ÎãπÏã†Ïùò ÏÑ†ÌÉùÏù¥ ÎêòÏñ¥Ïïº Ìï©ÎãàÎã§.`
                    : `${topWhiskey.style} style perfectly complements your ${mbti} introspective nature and today's feeling of ${moodString}.`;

                return { intro, summary };
            }, [result, lang, mbti, selectedMoods]);

            const handleGoogleSearch = () => {
                if (!result) return;
                const query = encodeURIComponent(lang === 'ko' ? `${result.whiskey.name} Í∞ÄÍ≤©` : `${result.whiskey.nameEn} price`);
                window.open(`https://www.google.com/search?q=${query}`, '_blank');
            };

            const handleOpenPriceModal = () => {
                setIsPriceModalOpen(true);
            };

            if (isLoading) {
                return <LoadingScreen lang={lang} />;
            }

            return (
                <div className="min-h-screen flex flex-col items-center p-6 pb-24 max-w-2xl mx-auto transition-colors duration-300">
                    {/* Header */}
                    <header className="w-full flex justify-between items-center mb-8">
                        <div className="flex items-center gap-2">
                            <div className="p-2 bg-teal-600 rounded-xl text-white">
                                <Icon name="wine" className="w-5 h-5" />
                            </div>
                            <h1 className="text-xl font-bold tracking-tight text-slate-900 dark:text-white">
                                {t.title}
                            </h1>
                        </div>
                        <div className="flex gap-2">
                            <button 
                                onClick={() => setLang(l => l === 'ko' ? 'en' : 'ko')} 
                                className="px-3 py-1.5 text-xs font-bold rounded-full border border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                            >
                                {lang === 'ko' ? 'KR' : 'EN'}
                            </button>
                            <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-600 dark:text-slate-300">
                                <Icon name={isDarkMode ? "moon" : "sun"} className={`w-5 h-5 ${isDarkMode ? 'text-yellow-400 fill-current' : 'text-amber-500 fill-current'}`} />
                            </button>
                        </div>
                    </header>

                    {/* Step 1: MBTI & Date */}
                    {step === 1 && (
                        <div className="w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                            <section>
                                <h2 className="text-2xl font-extrabold mb-6 text-slate-900 dark:text-white">{t.step1_title}</h2>
                                <div className="space-y-6">
                                    {MBTI_GROUPS.map((group) => (
                                        <div key={group.key} className="space-y-2">
                                            <h3 className={`text-sm font-bold ${group.color} uppercase tracking-wider pl-1`}>
                                                {group.label[lang]}
                                            </h3>
                                            <div className="grid grid-cols-4 gap-2">
                                                {group.types.map(type => (
                                                    <button 
                                                        key={type}
                                                        onClick={() => setMbti(type)}
                                                        className={`py-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-1 ${
                                                            mbti === type 
                                                            ? 'border-teal-600 bg-teal-50 dark:bg-teal-900/30 text-teal-700 dark:text-teal-400 ring-2 ring-teal-600/20' 
                                                            : 'border-transparent bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700'
                                                        } shadow-sm`}
                                                    >
                                                        <span className="font-bold text-sm">{type}</span>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            <section>
                                <h2 className="text-2xl font-extrabold mb-4 text-slate-900 dark:text-white">{t.step1_date}</h2>
                                <button 
                                    onClick={() => setIsCalendarOpen(true)}
                                    className="w-full p-5 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-between hover:bg-teal-50 dark:hover:bg-teal-900/10 transition-colors border border-slate-100 dark:border-slate-700 shadow-sm group"
                                >
                                    <div className="flex items-center gap-4">
                                        <div className="p-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-teal-600">
                                            <Icon name="calendar" />
                                        </div>
                                        <span className="font-bold text-lg text-slate-800 dark:text-slate-200">
                                            {baseDate.toLocaleDateString(lang === 'ko' ? 'ko-KR' : 'en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                                        </span>
                                    </div>
                                    <Icon name="chevron-right" className="text-slate-400 group-hover:translate-x-1 transition-transform" />
                                </button>
                            </section>

                            <div className="flex flex-col gap-3">
                                <button onClick={() => setStep(2)} className="w-full py-4 rounded-2xl bg-teal-600 text-white font-bold text-lg hover:bg-teal-700 transition-all shadow-lg shadow-teal-600/30">
                                    {t.step_next}
                                </button>
                                <button onClick={runRandomCuration} className="w-full py-4 rounded-2xl bg-slate-800 dark:bg-slate-200 text-white dark:text-slate-900 font-bold text-lg hover:scale-[1.02] transition-transform shadow-lg">
                                    {t.random_btn}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Step 2: Mood Selection */}
                    {step === 2 && (
                        <div className="w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                            <header className="flex flex-col gap-1">
                                <button onClick={() => setStep(1)} className="self-start text-slate-400 hover:text-slate-600 mb-2">
                                    <Icon name="arrow-left" />
                                </button>
                                <h2 className="text-2xl font-extrabold text-slate-900 dark:text-white">{t.step2_title}</h2>
                                <p className="text-slate-500 dark:text-slate-400 text-sm">{t.step2_sub}</p>
                            </header>
                            
                            <div className="grid grid-cols-1 gap-3">
                                {MOODS.map(mood => (
                                    <button 
                                        key={mood.id}
                                        onClick={() => handleMoodClick(mood.id)}
                                        className={`p-4 rounded-2xl border-2 flex flex-row items-center gap-4 transition-all text-left ${
                                            selectedMoods.includes(mood.id) 
                                            ? 'border-teal-600 bg-teal-50 dark:bg-teal-900/30 shadow-md ring-1 ring-teal-600/30' 
                                            : 'border-transparent bg-white dark:bg-slate-800 shadow-sm'
                                        }`}
                                    >
                                        <div className={`p-3 rounded-full bg-white dark:bg-slate-700 shadow-sm shrink-0 relative w-14 h-14 flex items-center justify-center`}>
                                            <span className="text-3xl">{mood.emoji}</span>
                                        </div>
                                        <span className={`text-base font-bold flex-1 ${selectedMoods.includes(mood.id) ? 'text-teal-900 dark:text-teal-100' : 'text-slate-600 dark:text-slate-400'}`}>
                                            {mood.desc[lang]}
                                        </span>
                                    </button>
                                ))}
                            </div>

                            <div className="flex flex-col gap-3">
                                <button 
                                    onClick={() => setStep(3)} 
                                    disabled={selectedMoods.length === 0}
                                    className={`w-full py-4 rounded-2xl bg-teal-600 text-white font-bold text-lg shadow-xl shadow-teal-600/30 ${selectedMoods.length === 0 ? 'opacity-50 grayscale cursor-not-allowed' : 'hover:bg-teal-700'}`}
                                >
                                    {t.step_next}
                                </button>
                                <button onClick={runRandomCuration} className="w-full py-4 rounded-2xl bg-slate-800 dark:bg-slate-200 text-white dark:text-slate-900 font-bold text-lg hover:scale-[1.02] transition-transform shadow-lg">
                                    {t.random_btn}
                                </button>
                                <button 
                                    onClick={() => setStep(1)}
                                    className="w-full py-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 font-medium text-sm transition-colors"
                                >
                                    {t.step_prev}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Step 3: Price Selection */}
                    {step === 3 && (
                        <div className="w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                            <header className="flex flex-col gap-1">
                                <button onClick={() => setStep(2)} className="self-start text-slate-400 hover:text-slate-600 mb-2">
                                    <Icon name="arrow-left" />
                                </button>
                                <h2 className="text-2xl font-extrabold text-slate-900 dark:text-white">{t.step3_title}</h2>
                            </header>
                            
                            <div className="grid grid-cols-1 gap-3">
                                {PRICE_RANGES.map(range => (
                                    <button 
                                        key={range.id}
                                        onClick={() => setSelectedPriceRange(range.id)}
                                        className={`p-5 rounded-2xl border-2 flex items-center justify-between transition-all ${
                                            selectedPriceRange === range.id 
                                            ? 'border-teal-600 bg-teal-50 dark:bg-teal-900/30 shadow-md ring-1 ring-teal-600/30' 
                                            : 'border-transparent bg-white dark:bg-slate-800 shadow-sm'
                                        }`}
                                    >
                                        <div className="flex items-center gap-3">
                                            <div className={`p-2 rounded-full ${selectedPriceRange === range.id ? 'bg-teal-100 dark:bg-teal-800 text-teal-600 dark:text-teal-200' : 'bg-slate-100 dark:bg-slate-700 text-slate-400'}`}>
                                                <Icon name="credit-card" className="w-5 h-5" />
                                            </div>
                                            <span className={`font-bold text-lg ${selectedPriceRange === range.id ? 'text-teal-900 dark:text-teal-100' : 'text-slate-600 dark:text-slate-400'}`}>
                                                {range.label[lang]}
                                            </span>
                                        </div>
                                        {selectedPriceRange === range.id && <Icon name="check" className="text-teal-600 dark:text-teal-400" />}
                                    </button>
                                ))}
                            </div>

                            <div className="flex flex-col gap-3">
                                <button 
                                    onClick={runCuration} 
                                    className="w-full py-4 rounded-2xl amber-button font-bold text-lg shadow-xl shadow-amber-500/20"
                                >
                                    {t.run_btn}
                                </button>
                                <button onClick={runRandomCuration} className="w-full py-4 rounded-2xl bg-slate-800 dark:bg-slate-200 text-white dark:text-slate-900 font-bold text-lg hover:scale-[1.02] transition-transform shadow-lg">
                                    {t.random_btn}
                                </button>
                                <button 
                                    onClick={() => setStep(2)}
                                    className="w-full py-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 font-medium text-sm transition-colors"
                                >
                                    {t.step_prev}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Result Page */}
                    {step === 4 && result && (
                        <div className="w-full space-y-8 animate-in zoom-in-95 duration-700">
                            {/* Biorhythm Section */}
                            <section className="text-center">
                                <h3 className="text-xs font-bold text-teal-600 dark:text-teal-400 mb-6 uppercase tracking-widest border-b border-teal-100 dark:border-teal-900 pb-2 inline-block px-4">
                                    {t.result_bio}
                                </h3>
                                <div className="grid grid-cols-3 gap-3">
                                    <BioIndicator label={lang === 'ko' ? "Ïã†Ï≤¥" : "Physical"} value={result.biorhythm.physical} icon="activity" />
                                    <BioIndicator label={lang === 'ko' ? "Í∞êÏÑ±" : "Emotion"} value={result.biorhythm.emotional} icon="heart" />
                                    <BioIndicator label={lang === 'ko' ? "ÏßÄÏÑ±" : "Intellect"} value={result.biorhythm.intellectual} icon="brain" />
                                </div>
                                <p className="mt-4 text-xs font-medium text-slate-400 dark:text-slate-500">
                                    {t.bio_rec} <strong className="text-teal-600 dark:text-teal-400 uppercase">{result.abvTarget} ABV</strong>
                                </p>
                            </section>

                            {/* Main Recommendation Card */}
                            <section className="relative group perspective-1000">
                                <div className="absolute -inset-1 bg-gradient-to-r from-teal-500 to-amber-500 rounded-3xl blur opacity-20 group-hover:opacity-30 transition duration-1000"></div>
                                <div className="relative p-8 glass-morphism rounded-3xl overflow-hidden shadow-2xl">
                                    <div className="flex flex-col w-full">
                                        <div className="flex justify-between items-start mb-6">
                                            <span className={`px-4 py-1.5 rounded-full text-xs font-black uppercase tracking-wider shadow-sm ${
                                                result.label === 'Surprise' ? 'bg-indigo-600 text-white' : 
                                                result.label === 'Best' ? 'bg-blue-600 text-white' : 
                                                result.label === 'Good' ? 'bg-teal-600 text-white' : 'bg-slate-500 text-white'
                                            }`}>
                                                {result.label === 'Surprise' ? (lang === 'ko' ? 'Ïö¥Î™ÖÏ†Å ÎßåÎÇ® üé≤' : 'Lucky Pick üé≤') : `${t.match_label}: ${result.label}`}
                                            </span>
                                            <span className="text-slate-500 dark:text-slate-400 font-mono text-sm font-bold bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-md">
                                                {result.whiskey.abv}% ABV
                                            </span>
                                        </div>
                                        
                                        <h2 className="text-4xl font-black mb-2 leading-tight text-slate-900 dark:text-white">
                                            {lang === 'ko' ? result.whiskey.name : result.whiskey.nameEn}
                                        </h2>
                                        <p className="text-teal-600 dark:text-teal-400 font-bold mb-6 text-lg">
                                            {result.whiskey.style}
                                        </p>
                                        
                                        <div className="flex flex-wrap gap-2 mb-8">
                                            {result.whiskey.tags.map(tag => (
                                                <span key={tag} className="px-3 py-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-400 uppercase tracking-wide">
                                                    #{tag}
                                                </span>
                                            ))}
                                        </div>
                                        
                                        <p className="text-slate-700 dark:text-slate-300 leading-relaxed mb-8 font-medium">
                                            {lang === 'ko' ? result.whiskey.desc : result.whiskey.descEn}
                                        </p>

                                        {/* Price Tag - Now triggers Modal */}
                                        <div className="flex items-center gap-2 mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-100 dark:border-amber-800/30 cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors group" onClick={handleOpenPriceModal}>
                                            <div className="p-2 bg-amber-100 dark:bg-amber-800/50 rounded-full text-amber-600 dark:text-amber-400">
                                                <Icon name="tag" className="w-4 h-4" />
                                            </div>
                                            <div className="flex-1 flex justify-between items-center">
                                                <div>
                                                    <p className="text-xs text-amber-800 dark:text-amber-200 font-bold uppercase opacity-70">
                                                        {t.price_label}
                                                    </p>
                                                    <p className="text-lg font-black text-amber-900 dark:text-amber-100">
                                                        {lang === 'ko' ? (result.whiskey.priceRangeKrw || result.whiskey.priceKrw.toLocaleString() + "Ïõê") : `$${result.whiskey.priceUsd} USD`}
                                                    </p>
                                                </div>
                                                <div className="flex items-center gap-1 text-xs text-amber-700 dark:text-amber-300 font-semibold group-hover:underline">
                                                    {t.price_check} <Icon name="search" className="w-3 h-3" />
                                                </div>
                                            </div>
                                        </div>

                                        <div className="p-5 bg-teal-50 dark:bg-teal-900/20 rounded-2xl border border-teal-100 dark:border-teal-900/50">
                                            <p className="text-sm font-bold text-teal-800 dark:text-teal-200 mb-2">{resultText.intro}</p>
                                            <p className="text-sm text-teal-700 dark:text-teal-300 leading-relaxed">
                                                {resultText.summary}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* Action Button - Direct Google Search */}
                            <button 
                                onClick={handleGoogleSearch}
                                className="w-full py-4 rounded-2xl bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold text-lg hover:scale-[1.02] transition-transform flex items-center justify-center gap-2 shadow-lg"
                            >
                                <Icon name="shopping-cart" />
                                {t.buy_btn}
                            </button>

                            {/* Behavioral Economics & Neurobiology Report */}
                            <section className="space-y-4 pt-4">
                                <h3 className="text-lg font-bold flex items-center gap-2 text-slate-800 dark:text-slate-200">
                                    <Icon name="microscope" className="text-teal-600" />
                                    {t.report_title}
                                </h3>
                                <div className="space-y-3">
                                    <div className="p-6 bg-white dark:bg-slate-900 rounded-2xl border-l-4 border-teal-600 shadow-sm">
                                        <h4 className="font-bold mb-2 text-slate-900 dark:text-white text-sm flex items-center gap-2">
                                            <Icon name="brain" className="w-4 h-4 text-teal-600" />
                                            {result.analysis?.judgmentTitle}
                                        </h4>
                                        <p className="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                                            {result.analysis?.judgmentDesc}
                                        </p>
                                    </div>
                                    <div className="p-6 bg-white dark:bg-slate-900 rounded-2xl border-l-4 border-amber-500 shadow-sm">
                                        <h4 className="font-bold mb-2 text-slate-900 dark:text-white text-sm flex items-center gap-2">
                                            <Icon name="footprints" className="w-4 h-4 text-amber-500" />
                                            {result.analysis?.behaviorTitle}
                                        </h4>
                                        <p className="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                                            {result.analysis?.behaviorDesc}
                                        </p>
                                    </div>
                                </div>
                            </section>

                            <button onClick={() => setStep(1)} className="w-full py-4 rounded-2xl border-2 border-teal-600 text-teal-600 dark:text-teal-400 font-bold hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-all">
                                {t.reset_btn}
                            </button>
                        </div>
                    )}

                    <PriceCheckModal 
                        isOpen={isPriceModalOpen} 
                        onClose={() => setIsPriceModalOpen(false)} 
                        result={result} 
                        lang={lang} 
                    />

                    <CalendarModal 
                        isOpen={isCalendarOpen} 
                        onClose={() => setIsCalendarOpen(false)} 
                        onSelect={setBaseDate} 
                        selectedDate={baseDate} 
                        lang={lang} 
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
