<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤ - MBTI & ë°”ì´ì˜¤ë¦¬ë“¬ íë ˆì´ì…˜</title>
    <!-- SEO & Open Graph (GitHub Pages ìµœì í™”) -->
    <meta name="description" content="MBTIì™€ ì˜¤ëŠ˜ì˜ ë°”ì´ì˜¤ë¦¬ë“¬ì„ ë¶„ì„í•˜ì—¬ ë‹¹ì‹ ì—ê²Œ ê°€ì¥ ì™„ë²½í•œ ì£¼ë¥˜ í•œ ì”ì„ ì¶”ì²œí•©ë‹ˆë‹¤.">
    <meta property="og:title" content="ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤ (Today's Whiskey)">
    <meta property="og:description" content="ì„±ê²©ê³¼ ê¸°ë¶„, ì‹ ì²´ ë¦¬ë“¬ì„ ê²°í•©í•œ ì´ˆê°œì¸í™” ì£¼ë¥˜ ì¶”ì²œ ì„œë¹„ìŠ¤">
    <meta property="og:type" content="website">
    
    <!-- PWA / í™ˆ í™”ë©´ ì¶”ê°€ìš© ì•„ì´ì½˜ ì„¤ì • -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤">
    <meta name="theme-color" content="#0d9488">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¥ƒ</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230d9488'/><text x='50' y='75' font-size='70' text-anchor='middle'>ğŸ¥ƒ</text></svg>">
    
    <!-- Scripts & Styles (CDNì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ ì—†ì´ ì •ì  í˜¸ìŠ¤íŒ… ê°€ëŠ¥) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tailwind Config for Dark Mode -->
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Pretendard', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Strict Non-Italic Enforcement */
        em, i, .italic {
            font-style: normal !important;
        }

        /* Custom Scrollbar for Teal Theme */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #0d9488; border-radius: 10px; }

        .teal-gradient {
            background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
        }

        .amber-button {
            background-color: #f59e0b;
            color: white;
            transition: all 0.2s;
        }
        .amber-button:hover {
            background-color: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.3);
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark .glass-morphism {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* High Contrast for better readability in Dark Mode */
        .dark .text-contrast-high { color: #f8fafc; }
        .dark .text-contrast-medium { color: #cbd5e1; }
        .dark .text-contrast-low { color: #94a3b8; }

        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        .animate-progress {
            animation: progress 3s ease-in-out forwards;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-900 dark:bg-slate-950 dark:text-slate-100 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- 1. Global Data Definitions ---
        
        const TEXT = {
            ko: {
                title: "ì˜¤ëŠ˜ì˜ ìœ„ìŠ¤í‚¤",
                step1_title: "ë‹¹ì‹ ì˜ MBTIëŠ”?",
                step1_date: "ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”.",
                step_next: "ë‹¤ìŒ ë‹¨ê³„",
                step_prev: "ì´ì „ ë‹¨ê³„",
                step2_title: "ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë–¤ê°€ìš”?",
                step2_sub: "ìµœëŒ€ 3ê°œ ì„ íƒ. ìƒì¶©í•˜ëŠ” ê°ì •ì€ ìë™ í•´ì œë©ë‹ˆë‹¤.",
                step3_title: "ì˜ˆì‚°ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
                run_btn: "ì¶”ì²œ ì—”ì§„ ê°€ë™",
                random_btn: "ë‚œ ê·¸ëƒ¥ ì•„ë¬´ê±°ë‚˜ ë§ˆì‹¤ë˜ìš”! ğŸ²",
                result_bio: "ì˜¤ëŠ˜ì˜ ë°”ì´ì˜¤ë¦¬ë“¬",
                bio_rec: "ë¶„ì„ ê²°ê³¼:",
                bio_abv: "ë„ìˆ˜ ì¶”ì²œ",
                match_label: "ë§¤ì¹­ ì ìˆ˜",
                report_title: "í–‰ë™ê²½ì œí•™ ë° ì‹ ê²½ìƒë¬¼í•™ ë¶„ì„ ë¦¬í¬íŠ¸",
                reset_btn: "ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°",
                buy_btn: "êµ¬ë§¤ì²˜ ì•Œì•„ë³´ê¸°",
                price_label: "ë„¤ì´ë²„ AI ì‹œì„¸ ì •ë³´",
                price_check: "ìš©ëŸ‰ë³„ ê°€ê²© í™•ì¸",
                popup_title: "ìš©ëŸ‰ë³„ ì‹œì„¸ ë° ë¦¬ë·°",
                popup_desc: "ë‹¤ì–‘í•œ ìš©ëŸ‰ì˜ ì‹œì„¸ ë²”ìœ„ì™€ ìƒìƒí•œ ë¦¬ë·°ë¥¼ í™•ì¸í•˜ì„¸ìš”.",
                search_youtube: "ìœ íŠœë¸Œ ë¦¬ë·° ë³´ê¸°",
                search_blog: "ë„¤ì´ë²„ ë¸”ë¡œê·¸ (ì‹¤êµ¬ë§¤ê°€)",
                close_btn: "ë‹«ê¸°",
                currency_prefix: "ì•½ ",
                currency_suffix: "ì›"
            },
            en: {
                title: "Today's Whiskey",
                step1_title: "What is your MBTI?",
                step1_date: "Select a date.",
                step_next: "Next Step",
                step_prev: "Previous Step",
                step2_title: "How is your mood today?",
                step2_sub: "Select up to 3. Conflicting moods auto-deselect.",
                step3_title: "What is your budget?",
                run_btn: "Run Curation Engine",
                random_btn: "I'll just drink anything! ğŸ²",
                result_bio: "Today's Biorhythm",
                bio_rec: "Analysis:",
                bio_abv: "ABV Rec.",
                match_label: "Match Score",
                report_title: "Behavioral Economics & Neurobiology Report",
                reset_btn: "Start Over",
                buy_btn: "Find Where to Buy",
                price_label: "Market Price Range",
                price_check: "Check Price by Size",
                popup_title: "Price by Size & Reviews",
                popup_desc: "Check price ranges for different bottle sizes and watch reviews.",
                search_youtube: "Watch Reviews",
                search_blog: "Search Web Reviews",
                close_btn: "Close",
                currency_prefix: "Approx. ",
                currency_suffix: ""
            }
        };

        const ANALYSIS_LOGIC = {
            // MBTI ê·¸ë£¹ ë§¤í•‘
            getMbtiGroup: (mbtiType) => {
                const groups = {
                    Analyst: ['INTJ', 'INTP', 'ENTJ', 'ENTP'],
                    Diplomat: ['INFJ', 'INFP', 'ENFJ', 'ENFP'],
                    Sentinel: ['ISTJ', 'ISFJ', 'ESTJ', 'ESFJ'],
                    Explorer: ['ISTP', 'ISFP', 'ESTP', 'ESFP']
                };
                for (const [group, types] of Object.entries(groups)) {
                    if (types.includes(mbtiType)) return group;
                }
                return 'Analyst';
            },

            // ë¶„ì„ ë°ì´í„°: [ì¸ì§€ì  íŒë‹¨ ë©”ì»¤ë‹ˆì¦˜] & [ë¯¸ë˜ í–‰ë™ ì˜ˆì¸¡]
            // Reference: Thinking, Fast and Slow (Kahneman), Behave (Sapolsky), Nudge (Thaler)
            analysisData: {
                Analyst: {
                    judgment: {
                        positive: {
                            ko: "ì „ì „ë‘í”¼ì§ˆ(Prefrontal Cortex)ì´ í™œì„±í™”ë˜ì–´ ìˆì§€ë§Œ, ë„íŒŒë¯¼ ê¸‰ì¦ìœ¼ë¡œ 'ë‚™ê´€ì£¼ì˜ í¸í–¥(Optimism Bias)'ì´ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. ëŒ€ë‹ˆì–¼ ì¹´ë„ˆë¨¼ì˜ 'ì‹œìŠ¤í…œ 2(ì´ì„±)'ê°€ í†µì œí•˜ëŠ” ë“¯ ë³´ì´ì§€ë§Œ, ì‹¤ì œë¡œëŠ” 'ì‹œìŠ¤í…œ 1(ì§ê´€)'ì´ ë‚´ë¦° ê²°ë¡ ì„ ì´ì„±ì´ í•©ë¦¬í™”í•˜ê³  ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.",
                            en: "Your Prefrontal Cortex is active, but Dopamine triggers 'Optimism Bias.' While Kahneman's 'System 2' (rational) seems in charge, 'System 1' (intuition) likely drove the conclusion, which reason is now rationalizing."
                        },
                        negative: {
                            ko: "ì½”ë¥´í‹°ì†” ìˆ˜ì¹˜ ì¦ê°€ë¡œ 'ë¶„ì„ ë§ˆë¹„(Analysis Paralysis)'ì— ë¹ ì§ˆ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ì •ë³´ë¥¼ ê³¼ë„í•˜ê²Œ ìˆ˜ì§‘í•˜ë ¤ëŠ” ê²½í–¥ì€ ë¶ˆí™•ì‹¤ì„±ì„ í†µì œí•˜ë ¤ëŠ” ì§„í™”ì  ë°©ì–´ ê¸°ì œì…ë‹ˆë‹¤. ì „ë§ ì´ë¡ (Prospect Theory)ì— ë”°ë¥´ë©´, í˜„ì¬ ë‹¹ì‹ ì€ ì´ë“ë³´ë‹¤ 'ì†ì‹¤ íšŒí”¼'ì— ê·¹ë„ë¡œ ë¯¼ê°í•©ë‹ˆë‹¤.",
                            en: "Elevated Cortisol risks 'Analysis Paralysis.' Obsessive data gathering is an evolutionary defense mechanism. According to Prospect Theory, you are currently hypersensitive to 'Loss Aversion' over potential gains."
                        },
                        neutral: {
                            ko: "ê°€ì¥ ê· í˜• ì¡íŒ 'ì‹œìŠ¤í…œ 2' ê°€ë™ ìƒíƒœì…ë‹ˆë‹¤. ë©”íƒ€ì¸ì§€(Metacognition) ëŠ¥ë ¥ì´ ìµœìƒì´ë©°, ì£¼ë¥˜ì˜ ë³µì¡í•œ í’ë¯¸ë¥¼ ë‹¨ìˆœí•œ ê°ê°ì´ ì•„ë‹Œ ê°ê´€ì ì´ê³  êµ¬ì¡°ì ì¸ ë°ì´í„°ë¡œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                            en: "Optimal 'System 2' state. Metacognition is peak, allowing you to process the spirit's complex flavors as objective data rather than just sensation."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "ì•Œì½”ì˜¬ì´ ì „ë‘ì—½ì˜ ì–µì œ ê¸°ëŠ¥ì„ ì´ì™„ì‹œí‚¤ë©´, í‰ì†Œ ì–µëˆŒë €ë˜ ê±°ëŒ€í•œ í”„ë¡œì íŠ¸ë‚˜ íˆ¬ìë¥¼ ëŒ€ë‹´í•˜ê²Œ ê³„íší•  í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤. ë¯¸ë˜ì˜ ë³´ìƒì„ ê³¼ëŒ€í‰ê°€í•˜ëŠ” ê²½í–¥ì´ ìˆìœ¼ë¯€ë¡œ, ì˜¤ëŠ˜ ë°¤ì˜ ê²°ì •ì€ ë©”ëª¨ë§Œ í•´ë‘ê³  ì‹¤í–‰ì€ ë‚´ì¼ë¡œ ë¯¸ë£¨ëŠ” 'ë„›ì§€(Nudge)'ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                            en: "As alcohol relaxes frontal inhibition, you might boldly plan grand projects. You're overestimating future rewards; use a 'Nudge' to write down ideas tonight but execute them tomorrow."
                        },
                        negative: {
                            ko: "ì™¸ë¶€ì™€ì˜ ì†Œí†µì„ ì°¨ë‹¨í•˜ê³  ë‚´ë©´ì˜ ë™êµ´ë¡œ ë“¤ì–´ê°ˆ ê²ƒì…ë‹ˆë‹¤. í˜¼ì ì”ì„ ê¸°ìš¸ì´ë©° ë¬¸ì œë¥¼ ë°˜ì¶”(Rumination)í•  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. ì¶”ì²œëœ í•œ ì”ì€ ì‹ ê²½ê³„ë¥¼ ì§„ì •ì‹œì¼œ ì†Œëª¨ì ì¸ ì‚¬ê³ ì˜ ê³ ë¦¬ë¥¼ ëŠì–´ì£¼ëŠ” ì—­í• ì„ í•  ê²ƒì…ë‹ˆë‹¤.",
                            en: "You likely retreat inward. Drinking alone while ruminating is probable. This drink acts as a nervous system sedative to break the cycle of exhaustive overthinking."
                        },
                        neutral: {
                            ko: "ì§€ì  ëŒ€í™”ë¥¼ ì£¼ë„í•˜ê±°ë‚˜ ê¹Šì´ ìˆëŠ” ë…ì„œ/ì—°êµ¬ì— ëª°ì…í•  ê²ƒì…ë‹ˆë‹¤. ìŒì£¼ê°€ ê¸ì •ì ì´ê³  ìƒì‚°ì ì¸ ì—ë„ˆì§€ë¥¼ íë¥´ê²Œ í•˜ëŠ” ì´‰ë§¤ê°€ ë©ë‹ˆë‹¤.",
                            en: "You will likely lead intellectual conversations or dive into reading. Alcohol acts as a catalyst for productive energy flow."
                        }
                    }
                },
                Diplomat: {
                    judgment: {
                        positive: {
                            ko: "ì˜¥ì‹œí† ì‹  ë¶„ë¹„ê°€ í™œë°œí•˜ì—¬ 'ë‚´ì§‘ë‹¨ í¸í–¥(In-group Bias)'ì´ ê¸ì •ì ìœ¼ë¡œ ì‘ìš©í•©ë‹ˆë‹¤. í˜„ì¬ì˜ ë¶„ìœ„ê¸°ì™€ ìˆ ì— ì–½íŒ ì„œì‚¬ë¥¼ ê°ì •ì ìœ¼ë¡œ ê²°í•©í•˜ì—¬, ê°ê´€ì  ìŠ¤í™ì´ë‚˜ ë§›ë³´ë‹¤ 'ëˆ„êµ¬ì™€ í•¨ê»˜ì¸ê°€' í˜¹ì€ 'ì–´ë–¤ ì˜ë¯¸ì¸ê°€'ë¥¼ ë” ì¤‘ìš”í•˜ê²Œ íŒë‹¨í•©ë‹ˆë‹¤.",
                            en: "Oxytocin boosts positive 'In-group Bias.' You judge value based on emotional context and narrative rather than objective taste, prioritizing 'who' and 'why' over 'what'."
                        },
                        negative: {
                            ko: "ê±°ìš¸ ë‰´ëŸ°(Mirror Neuron)ì˜ ê³¼í™œì„±ìœ¼ë¡œ íƒ€ì¸ì˜ ê°ì •ì´ë‚˜ ì„¸ìƒì˜ ë¶€ì¡°ë¦¬ë¥¼ ìì‹ ì˜ ê³ í†µìœ¼ë¡œ ëŠë¼ê³  ìˆìŠµë‹ˆë‹¤. íŒë‹¨ì˜ ê¸°ì¤€ì´ 'ì‚¬ì‹¤'ì´ ì•„ë‹Œ 'ê°€ì¹˜'ì— ì ë ¤ ìˆì–´ ì‹¬ë¦¬ì  ì†Œì§„(Burnout)ì„ ìœ ë°œí•  ìˆ˜ ìˆëŠ” ì¸ì§€ ìƒíƒœì…ë‹ˆë‹¤.",
                            en: "Hyperactive mirror neurons make you feel external pain as your own. Judgment is skewed towards 'values' over 'facts,' creating a cognitive state prone to burnout."
                        },
                        neutral: {
                            ko: "ì§ê´€ê³¼ í†µì°°ì´ ì¡°í™”ë¥¼ ì´ë£¹ë‹ˆë‹¤. í˜„ì¬ì˜ í‰ì˜¨í•¨ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ 'í˜„ìƒ ìœ ì§€ í¸í–¥(Status Quo Bias)'ì´ ì‘ë™í•˜ë©°, ê¸‰ê²©í•œ ë³€í™”ë¥¼ ê±°ë¶€í•˜ê³  ì¼ìƒì˜ ì†Œì¤‘í•¨ì„ ì§€í‚¤ë ¤ëŠ” íŒë‹¨ì„ ë‚´ë¦´ ê²ƒì…ë‹ˆë‹¤.",
                            en: "Intuition meets insight. 'Status Quo Bias' works to maintain tranquility, leading you to reject radical changes and protect the value of everyday life."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "ê°•í™”ëœ ê³µê° ëŠ¥ë ¥ìœ¼ë¡œ íƒ€ì¸ê³¼ì˜ ê¹Šì€ ëŒ€í™”ë¥¼ ì´ëŒì–´ë‚´ë©°, ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ 'ì‹¬ë¦¬ì  ì•ˆì „ì§€ëŒ€'ë¥¼ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤. ë‹¤ë§Œ, ë¶„ìœ„ê¸°ì— ì·¨í•´ ì§€í‚¤ì§€ ëª»í•  ì•½ì†ì„ ì„£ë¶ˆë¦¬ í•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                            en: "Enhanced empathy fosters deep conversation, creating psychological safety for others. Beware of making promises you can't keep in the heat of the moment."
                        },
                        negative: {
                            ko: "í˜„ì‹¤ ë„í”¼ì ì¸ í–‰ë™ì„ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒíƒ€ì§€ ì†Œì„¤, ì˜í™”, í˜¹ì€ ê³¼ê±°ì˜ ì¢‹ì•˜ë˜ ì¶”ì–µ ì†ìœ¼ë¡œ ìˆ¨ì–´ë“¤ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. í–¥ê¸°ë¡œìš´ ì”ì€ ë‹¹ì‹ ì„ ì•ˆì „í•œ ë‚´ë©´ ì„¸ê³„ë¡œ ì•ˆë‚´í•˜ëŠ” í›Œë¥­í•œ ë§¤ê°œì²´ê°€ ë©ë‹ˆë‹¤.",
                            en: "Escapist behavior is likely. You may retreat into fantasy or nostalgia. A fragrant glass serves as an excellent medium guiding you to a safe inner world."
                        },
                        neutral: {
                            ko: "ìì‹ ì˜ ê°€ì¹˜ê´€ì„ ì¬ì •ë¦½í•˜ëŠ” ì‹œê°„ì„ ê°–ìŠµë‹ˆë‹¤. ê¸€ì„ ì“°ê±°ë‚˜ ëª…ìƒì„ í•˜ëŠ” ë“± ì •ì ì¸ í™œë™ì„ í†µí•´ ìŠ¤ìŠ¤ë¡œì˜ ë§ˆìŒì„ ëŒë³´ëŠ” ë°©í–¥ìœ¼ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.",
                            en: "You'll take time to realign values. Static activities like writing or meditation will help you care for your own mind."
                        }
                    }
                },
                Sentinel: {
                    judgment: {
                        positive: {
                            ko: "ì„¸ë¡œí† ë‹Œ ìˆ˜ì¹˜ê°€ ì•ˆì •ì ì´ë©°, 'ê°€ìš©ì„± íœ´ë¦¬ìŠ¤í‹±(Availability Heuristic)'ì— ì˜ì¡´í•˜ì—¬ ê³¼ê±°ì˜ ì¦ê±°ì› ë˜ ê¸°ì–µì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ë¥¼ ê¸ì •ì ìœ¼ë¡œ í‰ê°€í•©ë‹ˆë‹¤. ëª¨í—˜ë³´ë‹¤ëŠ” ê²€ì¦ëœ í´ë˜ì‹ì„ ì„ íƒí•¨ìœ¼ë¡œì¨ ì¸ì§€ì  ë¶€ì¡°í™”ë¥¼ ìµœì†Œí™”í•˜ë ¤ëŠ” íŒë‹¨ì„ ë‚´ë¦½ë‹ˆë‹¤.",
                            en: "Stable serotonin relies on 'Availability Heuristic,' validating the present through past joy. You minimize cognitive dissonance by choosing proven classics over risky adventures."
                        },
                        negative: {
                            ko: "ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ìƒí™©ì— ëŒ€í•œ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ í¸ë„ì²´(Amygdala)ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒì–´ë²„ë¦° 'í†µì œ í™˜ìƒ(Illusion of Control)'ì„ ë˜ì°¾ê¸° ìœ„í•´ ì •ë¦¬ì •ëˆì„ í•˜ê±°ë‚˜ ê·œì¹™ì„ ì¬í™•ì¸í•˜ë ¤ëŠ” ê°•ë°•ì  íŒë‹¨ì´ ë‘ë“œëŸ¬ì§€ë©°, ë³€í™”ë¥¼ ìœ„í˜‘ìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.",
                            en: "Unpredictability triggers the amygdala. You may compulsively seek the 'Illusion of Control' through organizing or reaffirming rules. Change is perceived as a threat."
                        },
                        neutral: {
                            ko: "ê°€ì¥ í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ ìƒíƒœì…ë‹ˆë‹¤. í’ˆì§ˆ ëŒ€ë¹„ ê°€ê²©(ê°€ì„±ë¹„)ê³¼ ì—­ì‚¬ì  ê²€ì¦ì„ ëƒ‰ì² í•˜ê²Œ ê³„ì‚°í•˜ë©°, ê°ì •ì— í¬ê²Œ íœ˜ë‘˜ë¦¬ì§€ ì•ŠëŠ” í•©ë¦¬ì  ì†Œë¹„ìì˜ ì „í˜•ì„ ë³´ì—¬ì£¼ëŠ” ì¸ì§€ ìƒíƒœì…ë‹ˆë‹¤.",
                            en: "Highly pragmatic and realistic. You calculate value-for-money and historical validation coldly, exemplifying the rational consumer unmoved by emotion."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "ìì‹ ì˜ ì¼ìƒê³¼ ë£¨í‹´ì„ ê°•í™”í•˜ëŠ” í–‰ë™ì„ í•©ë‹ˆë‹¤. ë‚´ì¼ì˜ ì¼ì •ì„ ê¼¼ê¼¼íˆ ì²´í¬í•˜ê±°ë‚˜, ìˆ ì„ ë§ˆì‹  í›„ ë’·ì •ë¦¬ë¥¼ ì™„ë²½í•˜ê²Œ í•˜ëŠ” ë“± ì¼ìƒì˜ 'ì§ˆì„œ' ì†ì—ì„œ ê°€ì¥ í° ë§Œì¡±ê°ì„ ëŠë‚„ ê²ƒì…ë‹ˆë‹¤.",
                            en: "You reinforce daily routines. Checking tomorrow's schedules or cleaning up perfectly after a drink brings profound satisfaction through 'order'."
                        },
                        negative: {
                            ko: "ë°©ì–´ì  íƒœë„ë¥¼ ì·¨í•˜ë©° íƒ€ì¸ì˜ ìƒˆë¡œìš´ ì œì•ˆì„ ê±°ì ˆí•  í™•ë¥ ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ìµìˆ™í•œ ê³µê°„ì—ì„œ ìµìˆ™í•œ ë§›ì„ ì¦ê¸°ë©° ì½”ë¥´í‹°ì†” ìˆ˜ì¹˜ë¥¼ ë‚®ì¶”ëŠ” 'ìê°€ ì¹˜ìœ (Self-soothing)' í–‰ë™ì— ëª°ë‘í•  ê²ƒì…ë‹ˆë‹¤.",
                            en: "Defensive stance likely; rejecting new proposals is highly probable. You'll focus on 'Self-soothing' by enjoying familiar flavors in a safe space to lower cortisol."
                        },
                        neutral: {
                            ko: "ê°€ì¡±ì´ë‚˜ ìì‹ ì´ ì†í•œ ì¡°ì§ì„ ì±™ê¸°ëŠ” ì´íƒ€ì ì´ê³  ì±…ì„ê° ìˆëŠ” í–‰ë™ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì‹ ì˜ ì‚¬íšŒì  ì—­í• ê³¼ ì±…ì„ì„ í™•ì¸í•˜ëŠ” ê³¼ì •ì—ì„œ ë‚´ë©´ì˜ ì•ˆì •ì„ ì°¾ìŠµë‹ˆë‹¤.",
                            en: "May lead to responsible, altruistic acts for family or organizations. Stability is found in reaffirming your social roles and duties."
                        }
                    }
                },
                Explorer: {
                    judgment: {
                        positive: {
                            ko: "ë„íŒŒë¯¼ ìˆ˜ìš©ì²´ê°€ ê³ ë„ë¡œ ë¯¼ê°í•´ì ¸ ìˆì–´ 'ìƒˆë¡œì›€ ì¶”êµ¬(Novelty Seeking)' ì„±í–¥ì´ í­ë°œì ìœ¼ë¡œ ì§€ë°°í•©ë‹ˆë‹¤. ì¹´ë„ˆë¨¼ì˜ 'ì‹œìŠ¤í…œ 1(ë¹ ë¥¸ ì§ê´€)'ì´ í†µì œê¶Œì„ ì¥ê³  ìˆìœ¼ë©°, ì¦‰ê°ì ì¸ ê°ê°ì  ì¾Œë½ê³¼ ëª¨í—˜ì„ ìµœìš°ì„  ê°€ì¹˜ë¡œ íŒë‹¨í•©ë‹ˆë‹¤.",
                            en: "Sensitized dopamine receptors drive explosive 'Novelty Seeking.' Kahneman's 'System 1' rules, prioritizing immediate sensory pleasure and adventure above all else."
                        },
                        negative: {
                            ko: "ì§€ë£¨í•¨ì´ë‚˜ êµ¬ì†ê°ì„ ê²¬ë””ì§€ ëª»í•´ ë…¸ë¥´ì—í”¼ë„¤í”„ë¦°ì´ ë¶ˆê·œì¹™í•˜ê²Œ ë¶„ë¹„ë©ë‹ˆë‹¤. í˜„ì¬ ìƒí™©ì„ íƒˆì¶œí•´ì•¼ í•  'ìœ„ê¸°'ë¡œ ì¸ì§€í•˜ë©°, ì¶©ë™ì ì´ê³  ì¦‰ê°ì ì¸ ë³€í™”ë¥¼ ê¾€í•˜ë ¤ëŠ” ì¸ì§€ì  í¸í–¥ì´ ë§¤ìš° ê°•í•˜ê²Œ ì‘ìš©í•©ë‹ˆë‹¤.",
                            en: "Intolerance for boredom triggers erratic norepinephrine. The present is perceived as a 'crisis' to escape, driving intensely impulsive cognitive bias for immediate change."
                        },
                        neutral: {
                            ko: "ê°ê° ì •ë³´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë‡Œ ì˜ì—­ì´ ë§¤ìš° í™œë°œí•©ë‹ˆë‹¤. ìˆ ì˜ ë§›, ì½”ëì„ ì°Œë¥´ëŠ” í–¥, ëª©ì„ íƒ€ê³  ë„˜ì–´ê°€ëŠ” íƒ€ê²©ê° ë“± ë¬¼ë¦¬ì  ìê·¹ ê·¸ ìì²´ë¥¼ ë¶„ì„í•˜ë©° ì˜¨ì „íˆ 'í˜„ì¬'ì— ëª°ì…(Mindfulness)í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                            en: "Sensory processing areas are highly active. You analyze physical stimuliâ€”taste, aroma, the burnâ€”achieving a deep state of 'Mindfulness' in the present moment."
                        }
                    },
                    behavior: {
                        positive: {
                            ko: "ì¦‰í¥ì ì¸ í–‰ë™ìœ¼ë¡œ ì´ì–´ì§ˆ í™•ë¥ ì´ í½ë‹ˆë‹¤. ìˆ ê¹€ì— ê°‘ìê¸° ì—¬í–‰ ë¹„í–‰ê¸° í‘œë¥¼ ì˜ˆë§¤í•˜ê±°ë‚˜, ìƒˆë¡œìš´ ì·¨ë¯¸ ì¥ë¹„ë¥¼ ê²°ì œí•˜ëŠ” ë“± í‰ì†Œë¼ë©´ ì£¼ì €í–ˆì„ ëŒ€ë‹´í•œ ì‹œë„ë¥¼ ê°í–‰í•  ê°€ëŠ¥ì„±ì´ 90% ì´ìƒì…ë‹ˆë‹¤.",
                            en: "Spontaneity ensues. There's a 90% chance you'll impulsively book a flight or buy new hobby gear, taking bold actions you'd normally hesitate on."
                        },
                        negative: {
                            ko: "ì‹ ì²´ì  í™œë™ì„ í†µí•´ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°œì‚°í•˜ë ¤ í•  ê²ƒì…ë‹ˆë‹¤. ê²©ë ¬í•œ ìš´ë™, ëª°ì…ê° ë†’ì€ ê²Œì„, í˜¹ì€ ë³¼ë¥¨ì„ í¬ê²Œ ë†’ì¸ ìŒì•… ê°ìƒ ë“± 'ê°ê°ì  í™˜ê¸°(Sensory Ventilation)'ë¥¼ í†µí•´ ë‡Œì˜ ê°ì„± ìˆ˜ì¤€ì„ ì¬ì¡°ì •í•  ê²ƒì…ë‹ˆë‹¤.",
                            en: "Stress relief through physical action. You'll reset arousal levels via 'Sensory Ventilation' like vigorous exercise, intense gaming, or loud music."
                        },
                        neutral: {
                            ko: "ë„êµ¬ë¥¼ ë§Œì§€ê±°ë‚˜ ë¬´ì–¸ê°€ë¥¼ ì¡°ë¦½/ìˆ˜ë¦¬í•˜ëŠ” ë“± ì†ì„ ì“°ëŠ” ê°ê°ì  í™œë™ì— ì§‘ì¤‘í•  ê²ƒì…ë‹ˆë‹¤. ë³µì¡í•œ ìƒê° ëŒ€ì‹  ê°ê°ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì—ê²Œ ìµœê³ ì˜ ì •ì‹ ì  íœ´ì‹ì„ ì¤ë‹ˆë‹¤.",
                            en: "You'll focus on tactile tasks like fixing or building things. Focusing on the senses instead of complex thoughts provides you with the ultimate mental rest."
                        }
                    }
                }
            },

            // ë¦¬í¬íŠ¸ ìƒì„± ë©”ì¸ í•¨ìˆ˜
            generateReport: function(mbti, moods, lang) {
                const group = this.getMbtiGroup(mbti);
                
                // ê¸°ë¶„ ìƒíƒœ ë¶„ë¥˜ (Positive / Negative / Neutral)
                let moodState = 'neutral';
                const moodId = moods && moods.length > 0 ? moods[0] : 'joy';

                if (['joy', 'anticipation', 'surprise'].includes(moodId)) {
                    moodState = 'positive';
                } else if (['sadness', 'anger', 'fear', 'disgust'].includes(moodId)) {
                    moodState = 'negative';
                } else {
                    moodState = 'neutral'; // trust
                }

                const data = this.analysisData[group];
                
                return {
                    judgmentTitle: lang === 'ko' ? "ì¸ì§€ì  íŒë‹¨ ë©”ì»¤ë‹ˆì¦˜ (Cognitive Judgment)" : "Cognitive Judgment Mechanism",
                    judgmentDesc: data.judgment[moodState][lang],
                    behaviorTitle: lang === 'ko' ? "ë¯¸ë˜ í–‰ë™ ì˜ˆì¸¡ (Future Behavior Prediction)" : "Future Behavior Prediction",
                    behaviorDesc: data.behavior[moodState][lang]
                };
            }
        };

        const PRICE_RANGES = [
            { id: 1, label: { ko: "5ë§Œì› ì´í•˜", en: "Under â‚©50k" }, min: 0, max: 50000 },
            { id: 2, label: { ko: "5ë§Œì› - 10ë§Œì›", en: "â‚©50k - â‚©100k" }, min: 50000, max: 100000 },
            { id: 3, label: { ko: "10ë§Œì› - 20ë§Œì›", en: "â‚©100k - â‚©200k" }, min: 100000, max: 200000 },
            { id: 4, label: { ko: "20ë§Œì› - 50ë§Œì›", en: "â‚©200k - â‚©500k" }, min: 200000, max: 500000 },
            { id: 5, label: { ko: "50ë§Œì› - 100ë§Œì›", en: "â‚©500k - â‚©1m" }, min: 500000, max: 1000000 }
        ];

        const MBTI_GROUPS = [
            { 
                key: "Analyst", 
                label: { ko: "ë¶„ì„ê°€í˜• (Analyst)", en: "Analyst" }, 
                color: "text-purple-600 dark:text-purple-400", 
                types: ["INTJ", "INTP", "ENTJ", "ENTP"] 
            },
            { 
                key: "Diplomat", 
                label: { ko: "ì™¸êµê´€í˜• (Diplomat)", en: "Diplomat" }, 
                color: "text-green-600 dark:text-green-400", 
                types: ["INFJ", "INFP", "ENFJ", "ENFP"] 
            },
            { 
                key: "Sentinel", 
                label: { ko: "ê´€ë¦¬ìí˜• (Sentinel)", en: "Sentinel" }, 
                color: "text-blue-600 dark:text-blue-400", 
                types: ["ISTJ", "ISFJ", "ESTJ", "ESFJ"] 
            },
            { 
                key: "Explorer", 
                label: { ko: "íƒí—˜ê°€í˜• (Explorer)", en: "Explorer" }, 
                color: "text-amber-600 dark:text-amber-400", 
                types: ["ISTP", "ISFP", "ESTP", "ESFP"] 
            }
        ];
        
        const MOODS = [
            { 
                id: 'joy', 
                label: { ko: 'ê¸°ì¨', en: 'Joy' },
                desc: { ko: "ê¸°ìœ ë‚ ì´ì—ìš”. ì¶•í•˜ì£¼ í•œ ì”?", en: "Happy day. Celebration drink?" },
                emoji: "ğŸ˜",
                icon: 'smile', 
                color: 'text-yellow-500', 
                conflicts: ['sadness', 'anger'], 
                flavorProfile: ['sweet', 'fruity', 'citrus', 'vanilla', 'clean'] 
            },
            { 
                id: 'sadness', 
                label: { ko: 'ìŠ¬í””', en: 'Sadness' },
                desc: { ko: "ë§ˆìŒ ìŠ¬í”ˆ ë‚ ì´ì—ìš”. ìœ„ë¡œì£¼ í•œ ì”?", en: "Feeling sad. Comfort drink?" },
                emoji: "ğŸ˜¢",
                icon: 'frown', 
                color: 'text-blue-500', 
                conflicts: ['joy'], 
                flavorProfile: ['mellow', 'balanced', 'rich', 'sherry', 'floral'] 
            },
            { 
                id: 'anger', 
                label: { ko: 'ë¶„ë…¸', en: 'Anger' },
                desc: { ko: "í™”ê°€ ë§ì€ ë‚ ì´ì—ìš”. ìŠ¤íŠ¸ë ˆìŠ¤ í’€ê¸° ìœ„í•´ í•œ ì”?", en: "Angry day? Stress relief drink?" },
                emoji: "ğŸ˜¡",
                icon: 'flame', 
                color: 'text-red-500', 
                conflicts: ['joy', 'trust', 'calm'], 
                flavorProfile: ['smoky', 'intense', 'peppery', 'cask_strength', 'bold'] 
            },
            { 
                id: 'trust', 
                label: { ko: 'ì‹ ë¢°', en: 'Trust' },
                desc: { ko: "ë§ˆìŒì´ í¸í•œ ë‚ ì´ì—ìš”. ì´ëŸ° ë‚ ì€ í•œ ì” í•´ì¤˜ì•¼âˆ™âˆ™âˆ™?", en: "Relaxed day. A drink for today?" },
                emoji: "ğŸ˜Œ",
                icon: 'shield-check', 
                color: 'text-emerald-500', 
                conflicts: ['anger', 'fear'], 
                flavorProfile: ['balanced', 'smooth', 'mellow', 'classic', 'oak'] 
            },
            { 
                id: 'fear', 
                label: { ko: 'ë‘ë ¤ì›€', en: 'Fear' },
                desc: { ko: "ë¶ˆì•ˆí•˜ê³  ê±±ì •ë˜ëŠ” ë‚ ì´ì—ìš”. ì‚´ì§ ìŠê¸° ìœ„í•´ì„œ í•œ ì”?", en: "Anxious? A drink to forget?" },
                emoji: "ğŸ˜¨",
                icon: 'ghost', 
                color: 'text-purple-500', 
                conflicts: ['trust', 'joy'], 
                flavorProfile: ['intense', 'bold', 'spicy', 'complex'] 
            },
            { 
                id: 'surprise', 
                label: { ko: 'ë†€ëŒ', en: 'Surprise' },
                desc: { ko: "ì„œí”„ë¼ì´ì¦ˆê°€ ìˆì—ˆë˜ ë‚ ì´ì—ìš”. ì´ëŸ° ë‚ ì€ ë†€ëŒì„ ë‹¬ë˜ê¸° ìœ„í•´ì„œ í•œ ì”?", en: "Surprised? Calming drink?" },
                emoji: "ğŸ˜²",
                icon: 'zap', 
                color: 'text-cyan-500', 
                conflicts: [], 
                flavorProfile: ['citrus', 'seaweed', 'medicinal', 'unique', 'fresh'] 
            },
            { 
                id: 'anticipation', 
                label: { ko: 'ê¸°ëŒ€', en: 'Anticipation' },
                desc: { ko: "ì„¤ë ˆëŠ” ì¼ì´ ìˆëŠ” ë‚ ì´ì—ìš”. ê¸°ë…ìœ¼ë¡œ í•œ ì”?", en: "Excited? Commemorative drink?" },
                emoji: "ğŸ¤©",
                icon: 'compass', 
                color: 'text-orange-500', 
                conflicts: [], 
                flavorProfile: ['floral', 'honey', 'orange', 'fresh', 'sweet'] 
            },
            { 
                id: 'disgust', 
                label: { ko: 'ê±°ë¶€ê°', en: 'Disgust' },
                desc: { ko: "ê¸°ë¶„ì´ ë§¤ìš° ì–¸ì§¢ì€ ë‚ ì´ì—ìš”. ê¸°ë¶„ì „í™˜ì„ ìœ„í•´ì„œ í•œ ì”?", en: "Unpleasant day? Refreshing drink?" },
                emoji: "ğŸ˜–",
                icon: 'thumbs-down', 
                color: 'text-green-700', 
                conflicts: ['joy'], 
                flavorProfile: ['smoky', 'bold', 'intense', 'herbal', 'clean'] 
            }
        ];

        // Dynamic Tag Scoring based on MBTI traits
        const MBTI_TRAIT_PREFS = {
            E: ['smooth', 'balanced', 'classic', 'sweet', 'light', 'creamy', 'fresh', 'clean'],
            I: ['complex', 'smoky', 'intense', 'rich', 'seaweed', 'medicinal', 'cask_strength', 'oak'],
            S: ['vanilla', 'caramel', 'oak', 'honey', 'classic', 'value', 'standard', 'clean'],
            N: ['spicy', 'fruity', 'floral', 'unique', 'sherry', 'orange', 'complex', 'citrus'],
            T: ['bold', 'smoky', 'peppery', 'oak', 'intense', 'cask_strength', 'rich', 'maritime', 'salty'],
            F: ['sweet', 'smooth', 'floral', 'honey', 'mellow', 'fruity', 'creamy', 'velvet', 'elegant'],
            J: ['balanced', 'classic', 'rich', 'mellow', 'oak', 'chocolate', 'standard'],
            P: ['spicy', 'bold', 'unique', 'fresh', 'value', 'cask_strength', 'citrus', 'clean']
        };

        // SPIRITS_DB: Includes Original Whiskeys + GQ Korea Recommended 15 Whiskeys + Vodkas + Cognacs
        const SPIRITS_DB = [
            // --- Under 50k ---
            { name: "ì§ë¹” í™”ì´íŠ¸", nameEn: "Jim Beam White Label", age: "NAS", style: "Standard Bourbon", tags: ["sweet", "vanilla", "corn", "light"], abv: 40, archetype: ["ESFP", "ESTP"], priceKrw: 24000, priceRangeKrw: "24,000ì› ~ 30,000ì›", priceUsd: 18, variants: [{vol: "700ml", price: 24000}, {vol: "1L", price: 35000}, {vol: "200ml", price: 9000}], desc: "ì „ ì„¸ê³„ íŒë§¤ 1ìœ„ ë²„ë²ˆ. ê°€ë³ê³  ë‹¬ì½¤í•œ ë°”ë‹ë¼ í–¥ì˜ í•˜ì´ë³¼ ì¹˜íŠ¸í‚¤.", descEn: "World's No.1 Bourbon. Light and sweet vanilla notes perfect for highballs." },
            { name: "ì—ë°˜ ìœŒë¦¬ì—„ìŠ¤ ë¸”ë™", nameEn: "Evan Williams Black", age: "NAS", style: "Bourbon", tags: ["sweet", "vanilla", "caramel", "value", "standard"], abv: 43, archetype: ["ESTJ", "ESTP", "ESFP"], priceKrw: 30000, priceRangeKrw: "30,000ì›ëŒ€", priceUsd: 20, variants: [{vol: "750ml", price: 30000}], desc: "[GQ ì¶”ì²œ] 4~5ë…„ ìˆ™ì„±ìœ¼ë¡œ í’ì„±í•˜ê³  ì´˜ì´˜í•œ ë§›ì„ ìë‘í•˜ëŠ” ê°€ì„±ë¹„ ëíŒì™• ì•„ë©”ë¦¬ì¹¸ ë²„ë²ˆ.", descEn: "Highly cost-effective bourbon aged 4-5 years with typical vanilla and caramel notes." },
            { name: "ì—ë°˜ ìœŒë¦¬ì—„ìŠ¤ BIB", nameEn: "Evan Williams Bottled-in-Bond", age: "4ë…„+", style: "High Proof Bourbon", tags: ["bold", "caramel", "oak", "value"], abv: 50, archetype: ["ESTJ", "ENTJ"], priceKrw: 30000, priceRangeKrw: "30,000ì› ~ 39,000ì›", priceUsd: 22, variants: [{vol: "750ml", price: 30000}, {vol: "1L", price: 42000}], desc: "50ë„ì˜ ê°•ë ¬í•œ íƒ€ê²©ê°ê³¼ ì§„í•œ ì˜¤í¬í–¥. ê°€ì„±ë¹„ ìµœê³ ì˜ ê³ ë„ìˆ˜ ë²„ë²ˆ.", descEn: "Bold 100 proof with deep oak notes. Best value high-proof bourbon." },
            { name: "ì œì„ìŠ¨ ìŠ¤íƒ ë‹¤ë“œ", nameEn: "Jameson Irish Whiskey", age: "NAS", style: "Irish Blend", tags: ["smooth", "light", "floral", "classic"], abv: 40, archetype: ["ESFJ", "ISFJ"], priceKrw: 27000, priceRangeKrw: "27,000ì› ~ 35,000ì›", priceUsd: 25, variants: [{vol: "700ml", price: 27000}, {vol: "1L", price: 45000}, {vol: "200ml", price: 10000}], desc: "3ë²ˆ ì¦ë¥˜í•˜ì—¬ ê·¹ë„ë¡œ ë¶€ë“œëŸ¬ìš´ ëª©ë„˜ê¹€. í˜¸ë¶ˆí˜¸ ì—†ëŠ” ë°ì¼ë¦¬ ìœ„ìŠ¤í‚¤.", descEn: "Triple distilled for ultimate smoothness. An approachable daily dram." },
            { name: "ì¡°ë‹ˆì›Œì»¤ ë¸”ë™ë¼ë²¨", nameEn: "Johnnie Walker Black Label", age: "12ë…„", style: "Blended Scotch", tags: ["smoky", "balanced", "fruit", "classic"], abv: 40, archetype: ["ENTJ", "INTJ"], priceKrw: 39000, priceRangeKrw: "39,000ì› ~ 48,000ì›", priceUsd: 30, variants: [{vol: "500ml", price: 32000}, {vol: "700ml", price: 39000}, {vol: "1L", price: 58000}], desc: "[GQ ì¶”ì²œ] ìŠ¤ëª¨í‚¤ì™€ ê³¼ì¼ì˜ ì™„ë²½í•œ ê· í˜•. í•˜ì´ë³¼, ë‹ˆíŠ¸ ì–´ë””ì—ë‚˜ ì–´ìš¸ë¦¬ëŠ” êµê³¼ì„œì  ìœ„ìŠ¤í‚¤.", descEn: "Perfect balance of smoke and fruit. The textbook blended scotch." },
            { name: "ë©”ì´ì»¤ìŠ¤ ë§ˆí¬", nameEn: "Maker's Mark", age: "NAS", style: "Wheated Bourbon", tags: ["sweet", "floral", "smooth", "vanilla"], abv: 45, archetype: ["ESFJ", "ISFP"], priceKrw: 39800, priceRangeKrw: "39,800ì› ~ 49,000ì›", priceUsd: 28, variants: [{vol: "750ml", price: 39800}, {vol: "200ml", price: 17000}], desc: "ë¶‰ì€ ë°€ëì˜ ìƒì§•. í˜¸ë°€ ëŒ€ì‹  ë°€ì„ ì‚¬ìš©í•˜ì—¬ ë¶€ë“œëŸ½ê³  ë‹¬ì½¤í•œ ê½ƒí–¥ê¸°.", descEn: "Iconic red wax. Uses wheat instead of rye for a soft, floral sweetness." },
            { name: "ëª½í‚¤ìˆ„ë”", nameEn: "Monkey Shoulder", age: "NAS", style: "Blended Malt", tags: ["vanilla", "orange", "creamy", "fresh"], abv: 40, archetype: ["ESFP", "ENFP"], priceKrw: 42000, priceRangeKrw: "42,000ì› ~ 52,000ì›", priceUsd: 32, variants: [{vol: "700ml", price: 42000}, {vol: "1L", price: 55000}], desc: "[GQ ì¶”ì²œ] ëª°íŠ¸ 100% ë¸”ë Œë”©. ë¶€ë“œëŸ½ê³  í–¥ê¸‹í•˜ì—¬ ë§¤ìš´ ìŒì‹ê³¼ë„ í›Œë¥­í•œ ì¡°í™”ë¥¼ ì´ë£¹ë‹ˆë‹¤.", descEn: "100% Malt blend. Sweet and creamy with notes of vanilla and orange." },
            { name: "ì™€ì¼ë“œí„°í‚¤ 101 8ë…„", nameEn: "Wild Turkey 101 8 Year", age: "8ë…„", style: "High Rye Bourbon", tags: ["spicy", "vanilla", "oak", "bold"], abv: 50.5, archetype: ["ESTP", "ENTP"], priceKrw: 42000, priceRangeKrw: "42,000ì› ~ 50,000ì›", priceUsd: 25, variants: [{vol: "700ml", price: 42000}, {vol: "1L", price: 49800}], desc: "[GQ ì¶”ì²œ] 101 í”„ë£¨í”„(50.5ë„)ì˜ í™”ëˆí•œ í€ì¹˜. ê±°ì¹œ ì•Œì½”ì˜¬ í–¥ì„ ë©‹ì§€ê²Œ ì¡ì•„ì£¼ëŠ” ë¬µì§í•œ ë²„ë²ˆ.", descEn: "101 Proof kick with 8 years of aging. The definitive bold bourbon." },
            { name: "ì˜ë¡œìš°ë¡œì¦ˆ í”„ë¦¬ë¯¸ì—„ ì•„ë©”ë¦¬ì¹¸", nameEn: "Yellow Rose Premium American", age: "NAS", style: "American Whiskey", tags: ["sweet", "vanilla", "smooth", "light"], abv: 40, archetype: ["ESFJ", "ENFP"], priceKrw: 55000, priceRangeKrw: "50,000ì›ëŒ€", priceUsd: 40, variants: [{vol: "700ml", price: 55000}], desc: "[GQ ì¶”ì²œ] ë¶€ë“œëŸ¬ìš´ ë°”ë‹ë¼ì™€ ë§ë¦° ë°”ë‚˜ë‚˜ì¹©ì˜ ë‹¬ì½¤í•¨. ì´ˆë³´ìë„ ê±°ë¶€ê° ì—†ì´ ì¦ê¸°ëŠ” ë§›.", descEn: "Approachable for beginners. Characterized by vanilla and dried banana chip sweetness." },
            { name: "íƒë‚˜ë¶ˆë¦° ì…°ë¦¬ìºìŠ¤í¬", nameEn: "Tamnavulin Sherry Cask", age: "NAS", style: "Speyside Single Malt", tags: ["sweet", "sherry", "smooth", "vanilla"], abv: 40, archetype: ["ISFJ", "ESFJ", "ISFP"], priceKrw: 50000, priceRangeKrw: "50,000ì›ëŒ€", priceUsd: 35, variants: [{vol: "700ml", price: 50000}], desc: "[GQ ì¶”ì²œ] ìœ„ë¦°ì´ë“¤ì„ ìœ„í•œ ì…°ë¦¬ ì…ë¬¸ìš©. íŒ¬ì¼€ì´í¬, ì˜¤ë Œì§€ì˜ ë‹¬ì½¤í•˜ê³  ë”°ëœ»í•œ í–¥ì´ íŠ¹ì§•.", descEn: "A sherry whisky for beginners. Sweet and smooth with hints of orange and pancake." },
            { name: "ì•±ì†”ë£¨íŠ¸ ë³´ë“œì¹´", nameEn: "Absolut Vodka", age: "NAS", style: "Vodka", tags: ["clean", "standard", "value", "bold"], abv: 40, archetype: ["ESTP", "ESFP", "ISTP"], priceKrw: 30000, priceRangeKrw: "30,000ì›ëŒ€", priceUsd: 20, variants: [{vol: "750ml", price: 30000}], desc: "ìŠ¤ì›¨ë´ì˜ ì•„ì´ì½˜. ê·¹ë„ë¡œ ê¹”ë”í•˜ì—¬ ì–´ë–¤ ë¯¹ì„œì™€ë„ ì™„ë²½í•˜ê²Œ ì–´ìš¸ë¦¬ëŠ” ì •ì§í•œ ë³´ë“œì¹´.", descEn: "The Swedish icon. A clean, honest vodka that mixes well with anything." },

            // --- 50k - 100k ---
            { name: "ì™€ì¼ë“œí„°í‚¤ ë ˆì–´ë¸Œë¦¬ë“œ", nameEn: "Wild Turkey Rare Breed", age: "NAS", style: "Barrel Proof Bourbon", tags: ["spicy", "caramel", "bold", "cask_strength"], abv: 58.4, archetype: ["ENTJ", "ESTJ"], priceKrw: 80000, priceRangeKrw: "80,000ì› ~ 95,000ì›", priceUsd: 50, variants: [{vol: "750ml", price: 80000}], desc: "ë¬¼ íƒ€ì§€ ì•Šì€ ì•¼ìˆ˜ì˜ ì‹¬ì¥. 58.4ë„ì˜ ê°•ë ¬í•˜ê³  ì§„ë“í•œ ì¹´ë¼ë©œ í­íƒ„.", descEn: "Undiluted intensity. A 58.4% caramel bomb with a beastly heart." },
            { name: "íƒˆë¦¬ìŠ¤ì»¤ 10ë…„", nameEn: "Talisker 10 Year", age: "10ë…„", style: "Island Single Malt", tags: ["smoky", "peppery", "maritime", "salty"], abv: 45.8, archetype: ["ISTP", "ENTP"], priceKrw: 69000, priceRangeKrw: "69,000ì› ~ 82,000ì›", priceUsd: 60, variants: [{vol: "700ml", price: 69000}, {vol: "200ml", price: 28000}], desc: "[GQ ì¶”ì²œ] ê±°ì¹œ ë°”ë‹¤ ì•ì—ì„œ ë¹šì–´ì§„ í”¼íŠ¸ ìœ„ìŠ¤í‚¤ì˜ êµê³¼ì„œ. êµ´ì´ë‚˜ í•´ì‚°ë¬¼ê³¼ í›Œë¥­í•œ í˜ì–´ë§.", descEn: "Sea salt and peppery spice. Truly 'Made by the Sea'." },
            { name: "ê¸€ë Œëª¨ë Œì§€ ì˜¤ë¦¬ì§€ë„", nameEn: "Glenmorangie The Original", age: "10ë…„", style: "Highland Single Malt", tags: ["citrus", "floral", "vanilla", "elegant"], abv: 40, archetype: ["ENFP", "INFP"], priceKrw: 65000, priceRangeKrw: "65,000ì› ~ 79,000ì›", priceUsd: 40, variants: [{vol: "700ml", price: 65000}], desc: "ìŠ¤ì½”í‹€ëœë“œì—ì„œ ê°€ì¥ ëª©ì´ ê¸´ ì¦ë¥˜ê¸°ì—ì„œ íƒ„ìƒí•œ ì„¬ì„¸í•˜ê³  ìš°ì•„í•œ ë§›.", descEn: "Delicate and elegant, born from Scotland's tallest stills." },
            { name: "ì‹±ê¸€í†¤ ë”í”„íƒ€ìš´ 12ë…„", nameEn: "Singleton Dufftown 12YO", age: "12ë…„", style: "Speyside Single Malt", tags: ["smooth", "fresh", "light", "mellow"], abv: 40, archetype: ["ISFP", "INFP", "ENFJ"], priceKrw: 70000, priceRangeKrw: "60,000ì› ~ 70,000ì›", priceUsd: 50, variants: [{vol: "700ml", price: 70000}], desc: "[GQ ì¶”ì²œ] ì²­ì‚¬ê³¼ í–¥ì˜ ë¶€ë“œëŸ¬ìš´ í’ë¯¸. ì•„ì°”í•œ ìê·¹ë³´ë‹¤ëŠ” í‰ì•ˆí•œ ì¼ìƒì— ì˜ ì–´ìš¸ë¦¬ëŠ” í•œ ì”.", descEn: "Perfect for a peaceful day. A comfortable daily dram carrying smooth green apple flavors." },
            { name: "ë„¤ì´í‚¤ë“œ ëª°íŠ¸", nameEn: "Naked Malt", age: "NAS", style: "Blended Malt", tags: ["sweet", "fruity", "sherry", "rich"], abv: 40, archetype: ["ESFP", "ESTP"], priceKrw: 60000, priceRangeKrw: "60,000ì›ëŒ€", priceUsd: 45, variants: [{vol: "700ml", price: 60000}], desc: "[GQ ì¶”ì²œ] ë§¥ìº˜ë€ ë“± ìœ ëª… ì‹±ê¸€ëª°íŠ¸ë¥¼ ë¸”ë Œë”©í•´ ì…°ë¦¬ ìºìŠ¤í¬ì— ì¶”ê°€ ìˆ™ì„±. ê±´í¬ë„ í’ë¯¸ê°€ ì¼í’ˆ.", descEn: "Extra matured in sherry casks. Raisin and dried fruit flavors make it great for BBQs." },
            { name: "ì£¼ë¼ í”„ë Œì¹˜ì˜¤í¬", nameEn: "Jura French Oak", age: "NAS", style: "Island Single Malt", tags: ["floral", "fruity", "smooth", "vanilla"], abv: 40, archetype: ["INFP", "INFJ"], priceKrw: 90000, priceRangeKrw: "90,000ì›ëŒ€", priceUsd: 65, variants: [{vol: "700ml", price: 90000}], desc: "[GQ ì¶”ì²œ] ë‚´ ê³µê°„ì„ ë”°ëœ»í•˜ê²Œ ê¾¸ë©°ì£¼ëŠ” ìˆ . ë¶€ë“œëŸ¬ìš´ ê³¼ì¼í–¥ê³¼ ë°”ë‹ë¼ ë¼ë–¼ ê°™ì€ í–¥ë¯¸.", descEn: "Soft fruit and floral notes. Hints of vanilla and caramel latte fill the room warmly." },
            { name: "ê¸€ë Œê·¸ë€íŠ¸ ì•„ë³´ë„ë¦¬ìŠ¤", nameEn: "GlenGrant Arboralis", age: "NAS", style: "Speyside Single Malt", tags: ["fresh", "floral", "light", "citrus"], abv: 40, archetype: ["INTP", "ISTJ"], priceKrw: 60000, priceRangeKrw: "60,000ì›ëŒ€", priceUsd: 45, variants: [{vol: "700ml", price: 60000}], desc: "[GQ ì¶”ì²œ] ê³„ê³¡ë¬¼ì²˜ëŸ¼ ë§‘ê³  í™”ì‚¬í•œ í’ë¯¸. ì‹œì›í•œ í•˜ì´ë³¼ë¡œ ë“¤ì´ì¼œë©´ í•˜ë£¨ì˜ í”¼ë¡œê°€ ì”»ê²¨ë‚˜ê°‘ë‹ˆë‹¤.", descEn: "Clear and bright like valley water. A highball of this washes away the day's fatigue." },
            { name: "ë” ê¸€ë Œë¦¬ë²³ 12ë…„", nameEn: "The Glenlivet 12 Years Old", age: "12ë…„", style: "Speyside Single Malt", tags: ["fruity", "fresh", "smooth", "balanced"], abv: 40, archetype: ["ENFJ", "ESFJ"], priceKrw: 90000, priceRangeKrw: "80,000ì› ~ 90,000ì›", priceUsd: 65, variants: [{vol: "700ml", price: 90000}], desc: "[GQ ì¶”ì²œ] íœ´ì–‘ì§€ë¡œ ë– ë‚˜ê³  ì‹¶ì€ ì‹±ê·¸ëŸ¬ì›€. ì˜ ìµì€ íŒŒì¸ì• í”Œê³¼ ì‚¬ê³¼ì˜ ë¶€ë“œëŸ½ê³  ë‹¬ì½¤í•œ í’ë¯¸.", descEn: "Fresh ripe pineapple and apple notes. It brings the urge to escape to a resort." },
            { name: "ë¶€ë‚˜í•˜ë²¤ 12ë…„", nameEn: "Bunnahabhain 12 Year", age: "12ë…„", style: "Unpeated Islay", tags: ["nutty", "sherry", "rich", "seaweed"], abv: 46.3, archetype: ["INFJ", "ISTJ"], priceKrw: 89000, priceRangeKrw: "89,000ì› ~ 110,000ì›", priceUsd: 65, variants: [{vol: "700ml", price: 89000}], desc: "í”¼íŠ¸ ì—†ëŠ” ì•„ì¼ë¼. ì…°ë¦¬ì™€ ë°”ë‹¤ ë‚´ìŒì˜ ë…íŠ¹í•˜ê³  í’ì„±í•œ ì¡°í™”.", descEn: "Unpeated Islay. A unique, rich blend of sherry and sea air." },
            { name: "ê·¸ë ˆì´ êµ¬ìŠ¤", nameEn: "Grey Goose", age: "NAS", style: "Vodka", tags: ["smooth", "clean", "classic", "elegant"], abv: 40, archetype: ["ENTJ", "ESTJ", "ISFJ"], priceKrw: 60000, priceRangeKrw: "60,000ì›ëŒ€", priceUsd: 45, variants: [{vol: "750ml", price: 60000}], desc: "í”„ë‘ìŠ¤ í”„ë¦¬ë¯¸ì—„ ë³´ë“œì¹´. ê·¹ë„ë¡œ ì„¬ì„¸í•˜ê³  ë¶€ë“œëŸ¬ìš´ ì§ˆê°ìœ¼ë¡œ ì–´ë–¤ ê¸°ë¶„ì—ë„ ì™„ë²½íˆ ìŠ¤ë©°ë“­ë‹ˆë‹¤.", descEn: "Premium French vodka. Extremely clean and smooth texture makes it a perfect base." },
            { name: "ë²¨ë² ë°ë ˆ", nameEn: "Belvedere", age: "NAS", style: "Vodka", tags: ["smooth", "vanilla", "rich", "elegant"], abv: 40, archetype: ["INTJ", "INFJ"], priceKrw: 70000, priceRangeKrw: "70,000ì›ëŒ€", priceUsd: 55, variants: [{vol: "700ml", price: 70000}], desc: "í´ë€ë“œ ëŸ­ì…”ë¦¬ ë³´ë“œì¹´. í˜¸ë°€ì—ì„œ ì˜¤ëŠ” ì€ì€í•œ ë°”ë‹ë¼ í–¥ê³¼ í¬ë¦¬ë¯¸í•œ ì§ˆê°ì´ ì¼í’ˆì…ë‹ˆë‹¤.", descEn: "Polish luxury vodka. Features subtle vanilla notes and a creamy texture." },

            // --- 100k - 200k ---
            { name: "ë¼ê°€ë¶ˆë¦° 16ë…„", nameEn: "Lagavulin 16 Year", age: "16ë…„", style: "Peated Islay", tags: ["smoky", "seaweed", "intense", "rich"], abv: 43, archetype: ["INTJ", "INFJ"], priceKrw: 135000, priceRangeKrw: "135,000ì› ~ 160,000ì›", priceUsd: 100, variants: [{vol: "700ml", price: 135000}], desc: "ì•„ì¼ë¼ì˜ ì œì™•. ê°•ë ¬í•œ í”¼íŠ¸ì™€ ì…°ë¦¬ì˜ ì¡°í™”ê°€ ì£¼ëŠ” ì¤‘í›„í•œ ë§¤ë ¥.", descEn: "The King of Islay. A profound harmony of intense peat and sherry." },
            { name: "ë§¥ìº˜ë€ 12ë…„ ì…°ë¦¬ì˜¤í¬", nameEn: "Macallan 12Y Sherry Oak", age: "12ë…„", style: "Sherry Oak", tags: ["fruity", "spiced", "sweet", "rich"], abv: 40, archetype: ["ISFJ", "ESFJ"], priceKrw: 130000, priceRangeKrw: "130,000ì› ~ 155,000ì›", priceUsd: 95, variants: [{vol: "700ml", price: 130000}], desc: "ì…°ë¦¬ ìœ„ìŠ¤í‚¤ì˜ ê¸°ì¤€. ë§ë¦° ê³¼ì¼ê³¼ í–¥ì‹ ë£Œì˜ ê³ ê¸‰ìŠ¤ëŸ¬ìš´ í’ë¯¸.", descEn: "The benchmark of sherry whisky. Luxurious dried fruit and spice notes." },
            { name: "ê¸€ë Œí”¼ë”• 15ë…„", nameEn: "Glenfiddich 15 Year", age: "15ë…„", style: "Solera Reserve", tags: ["honey", "vanilla", "balanced", "sweet"], abv: 40, archetype: ["ENFJ", "INFP"], priceKrw: 115000, priceRangeKrw: "110,000ì› ~ 125,000ì›", priceUsd: 70, variants: [{vol: "700ml", price: 115000}, {vol: "500ml", price: 85000}], desc: "[GQ ì¶”ì²œ] ì²« ë§›ì€ ê°•ë ¬í•˜ì§€ë§Œ êµ¬ìˆ˜í•˜ê³  ê·¸ë¦¬ìš´ ì—¬ìš´ì„ ë‚¨ê¹ë‹ˆë‹¤. ê¿€ì²˜ëŸ¼ ë‹¬ì½¤í•œ ë°¸ëŸ°ìŠ¤.", descEn: "Intense start but leaves a nostalgic, honey-sweet smooth balance." },
            { name: "ë°œë² ë‹ˆ 12ë…„ ë”ë¸”ìš°ë“œ", nameEn: "Balvenie 12Y DoubleWood", age: "12ë…„", style: "Balanced Malt", tags: ["honey", "nutty", "mellow", "smooth"], abv: 40, archetype: ["ISFP", "INTP"], priceKrw: 115000, priceRangeKrw: "115,000ì› ~ 135,000ì›", priceUsd: 75, variants: [{vol: "700ml", price: 115000}], desc: "ë‘ ê°€ì§€ ì˜¤í¬í†µ ìˆ™ì„±ìœ¼ë¡œ ì™„ì„±ëœ ê¿€ê³¼ ê²¬ê³¼ë¥˜ì˜ ì •ì„ì ì¸ ë§›.", descEn: "Honey and nuts perfected by maturation in two types of oak." },
            { name: "ì•„ë“œë²¡ 10ë…„", nameEn: "Ardbeg 10Y", age: "10ë…„", style: "Peated Islay", tags: ["smoky", "medicinal", "citrus", "intense"], abv: 46, archetype: ["ENTP", "INTP"], priceKrw: 105000, priceRangeKrw: "100,000ì›ëŒ€ ì´ˆë°˜", priceUsd: 70, variants: [{vol: "700ml", price: 105000}], desc: "[GQ ì¶”ì²œ] ê·¸ì–´ë–¤ ìœ„ìŠ¤í‚¤ë³´ë‹¤ ê°•ë ¬í•œ ìš”ì˜¤ë“œì™€ í”¼íŠ¸ í–¥. ë ˆëª¬ì„ ë¿Œë¦° ì•„ë“œë²¡ í•˜ì´ë³¼ì€ ë§¤ë ¥ì ì…ë‹ˆë‹¤.", descEn: "Intense peat and iodine. An Ardbeg highball with lemon is exceptionally charming." },
            { name: "ì•„ë“œë²¡ ì½”ë¦¬ë¸Œë ˆì¹¸", nameEn: "Ardbeg Corryvreckan", age: "NAS", style: "High Vol Peat", tags: ["smoky", "medicinal", "citrus", "intense", "cask_strength"], abv: 57.1, archetype: ["INTJ", "ISTJ"], priceKrw: 165000, priceRangeKrw: "165,000ì› ~ 190,000ì›", priceUsd: 120, variants: [{vol: "700ml", price: 165000}], desc: "ì†Œìš©ëŒì´ì¹˜ëŠ” ê°•ë ¬í•œ í”¼íŠ¸ì™€ ìŠ¤íŒŒì´ìŠ¤. í”¼íŠ¸ ë§ˆë‹ˆì•„ì˜ ë„ì „ ê³¼ì œ.", descEn: "Swirling intense peat and spice. A challenge for peat lovers." },
            { name: "ë‹¬ëª¨ì–´ í¬íŠ¸ìš°ë“œ", nameEn: "Dalmore Port Wood", age: "NAS", style: "Highland Single Malt", tags: ["smooth", "chocolate", "fruity", "elegant", "mellow"], abv: 46.5, archetype: ["INFJ", "ENFJ", "ISFJ"], priceKrw: 150000, priceRangeKrw: "150,000ì›ëŒ€", priceUsd: 110, variants: [{vol: "700ml", price: 150000}], desc: "[GQ ì¶”ì²œ] ë°˜ì „ ìŠ¤í† ë¦¬. ë³´ë¦¬ì˜ ê³ ì†Œí•¨, ì´ˆì½œë¦¿ ì»¤í”¼, ë¶‰ì€ ë² ë¦¬ì˜ í–¥ê¸°ê°€ í…ì…˜ì„ ë¶€ë“œëŸ½ê²Œ í’€ì–´ì¤ë‹ˆë‹¤.", descEn: "A twist of smoothness. Roasted barley, chocolate coffee, and red berry notes melt away tension." },
            { name: "í—¤ë„¤ì‹œ VSOP", nameEn: "Hennessy V.S.O.P", age: "VSOP", style: "Cognac", tags: ["rich", "fruity", "oak", "smooth", "classic"], abv: 40, archetype: ["ENTJ", "ENFJ", "ESTJ"], priceKrw: 120000, priceRangeKrw: "120,000ì›ëŒ€", priceUsd: 85, variants: [{vol: "700ml", price: 120000}], desc: "í¬ë„ ì¦ë¥˜ì£¼ì˜ ì •ì . ì „ ì„¸ê³„ì—ì„œ ê°€ì¥ ì‚¬ë‘ë°›ëŠ” ê¼¬ëƒ‘ìœ¼ë¡œ í’ì„±í•œ ê³¼ì¼í–¥ê³¼ ì˜¤í¬í–¥ì´ ë§¤ë ¥ì ì…ë‹ˆë‹¤.", descEn: "The most loved Cognac worldwide. A masterpiece of harmonious fruit and oak notes." },
            { name: "ë ˆë¯¸ ë§ˆí‹´ VSOP", nameEn: "RÃ©my Martin V.S.O.P", age: "VSOP", style: "Cognac", tags: ["floral", "fruity", "elegant", "smooth"], abv: 40, archetype: ["INFJ", "ISFJ", "ISFP"], priceKrw: 110000, priceRangeKrw: "110,000ì›ëŒ€", priceUsd: 80, variants: [{vol: "700ml", price: 110000}], desc: "ì„¬ì„¸í•œ ê¼¬ëƒ‘ì˜ ì²™ë„. ì€ì€í•œ ê½ƒí–¥ê¸°ì™€ ì˜ ìµì€ ê³¼ì¼ì˜ í’ë¯¸ê°€ ìš°ì•„í•˜ê³  ê¸¸ê²Œ ë‚¨ìŠµë‹ˆë‹¤.", descEn: "Delicate floral and ripe fruit flavors. Leaves a long, smooth, and elegant finish." },

            // --- 200k+ ---
            { name: "ì¡°ë‹ˆì›Œì»¤ ë¸”ë£¨ë¼ë²¨", nameEn: "Johnnie Walker Blue Label", age: "NAS", style: "Premium Blend", tags: ["balanced", "smoke", "velvet", "rich"], abv: 40, archetype: ["ENTJ", "ENFJ"], priceKrw: 240000, priceRangeKrw: "240,000ì› ~ 310,000ì›", priceUsd: 200, variants: [{vol: "500ml", price: 160000}, {vol: "750ml", price: 240000}, {vol: "1L", price: 310000}], desc: "1ë§Œ ê°œ ì¤‘ í•˜ë‚˜ì˜ ì˜¤í¬í†µ. ë¹„ë‹¨ê²° ê°™ì€ ëª©ë„˜ê¹€ì˜ ë¸”ë Œë””ë“œ ëíŒì™•.", descEn: "One in ten thousand casks. The velvety pinnacle of blended whisky." },
            { name: "ê¸€ë Œë“œë¡œë‚™ 18ë…„", nameEn: "Glendronach 18 Year", age: "18ë…„", style: "Sherry Bomb", tags: ["rich", "chocolate", "fruity", "complex"], abv: 46, archetype: ["INFJ", "INTJ"], priceKrw: 310000, priceRangeKrw: "310,000ì› ~ 380,000ì›", priceUsd: 230, variants: [{vol: "700ml", price: 310000}], desc: "ê¾¸ë•í•œ ì…°ë¦¬ í­íƒ„. ë‹¤í¬ ì´ˆì½œë¦¿ê³¼ ê±´ê³¼ì¼ì˜ ì§„í•œ ì—¬ìš´.", descEn: "A thick sherry bomb. Deep finish of dark chocolate and dried fruit." },
            { name: "ì•¼ë§ˆìí‚¤ 12ë…„", nameEn: "Yamazaki 12 Year", age: "12ë…„", style: "Japanese Single Malt", tags: ["floral", "fruit", "spice", "mizunara"], abv: 43, archetype: ["ISFJ", "ISTJ"], priceKrw: 290000, priceRangeKrw: "290,000ì› ~ 450,000ì›", priceUsd: 180, variants: [{vol: "700ml", price: 290000}], desc: "ì¼ë³¸ ìœ„ìŠ¤í‚¤ì˜ ì „ì„¤. ë¯¸ì¦ˆë‚˜ë¼ ì˜¤í¬ì˜ ì‹ ë¹„ë¡œìš´ í–¥ë‚˜ë¬´ í’ë¯¸.", descEn: "Japanese legend. Mysterious incense notes from Mizunara oak." },
            { name: "ë¡œì–„ì‚´ë£¨íŠ¸ 21ë…„", nameEn: "Royal Salute 21 Year", age: "21ë…„", style: "Royal Blend", tags: ["smooth", "sweet", "floral", "classic"], abv: 40, archetype: ["ESTJ", "ESFJ"], priceKrw: 200000, priceRangeKrw: "200,000ì› ~ 260,000ì›", priceUsd: 160, variants: [{vol: "500ml", price: 140000}, {vol: "700ml", price: 210000}], desc: "ì—¬ì™•ì„ ìœ„í•œ ìˆ . ë„ìê¸° ë³‘ì— ë‹´ê¸´ ë¶€ë“œëŸ¬ì›€ì˜ ê·¹ì¹˜.", descEn: "Fit for a Queen. Ultimate smoothness in a porcelain flagon." },
            { name: "ë°œë Œíƒ€ì¸ 30ë…„", nameEn: "Ballantine's 30 Year", age: "30ë…„", style: "Ultra Premium Blend", tags: ["complex", "honey", "vanilla", "elegant"], abv: 40, archetype: ["ENTJ", "ESTJ"], priceKrw: 480000, priceRangeKrw: "480,000ì› ~ 600,000ì›", priceUsd: 380, variants: [{vol: "700ml", price: 480000}], desc: "ì‹œê°„ì´ ë¹šì–´ë‚¸ ì˜ˆìˆ . ì™„ë²½ì— ê°€ê¹Œìš´ ë°¸ëŸ°ìŠ¤ì™€ ëì—†ëŠ” ì—¬ìš´.", descEn: "Art crafted by time. Near-perfect balance and endless finish." },
            { name: "ë§¥ìº˜ë€ 18ë…„ ì…°ë¦¬ì˜¤í¬", nameEn: "Macallan 18Y Sherry Oak", age: "18ë…„", style: "Luxury Single Malt", tags: ["rich", "spicy", "orange", "iconic"], abv: 43, archetype: ["ESTP", "ESFP"], priceKrw: 520000, priceRangeKrw: "520,000ì› ~ 650,000ì›", priceUsd: 420, variants: [{vol: "700ml", price: 520000}], desc: "ì‹±ê¸€ëª°íŠ¸ì˜ ë¡¤ìŠ¤ë¡œì´ìŠ¤. ì••ë„ì ì¸ ì…°ë¦¬ í’ë¯¸ì™€ ëŸ­ì…”ë¦¬í•¨.", descEn: "The Rolls-Royce of malts. Overwhelming sherry flavor and luxury." },
            { name: "íˆë¹„í‚¤ 21ë…„", nameEn: "Hibiki 21 Year", age: "21ë…„", style: "Japanese Blend", tags: ["harmony", "fruit", "sandalwood", "complex"], abv: 43, archetype: ["INFJ", "ISFP"], priceKrw: 850000, priceRangeKrw: "850,000ì› ~ 1,200,000ì›", priceUsd: 750, variants: [{vol: "700ml", price: 850000}], desc: "ì¼ë³¸ì˜ ì‚¬ê³„ì ˆì„ ë‹´ì€ ì¡°í™”. ìƒŒë‹¬ìš°ë“œì™€ ì˜¤í¬ì˜ ê¹Šì€ ìš¸ë¦¼.", descEn: "Harmony of Japan's seasons. Deep resonance of sandalwood and oak." }
        ];

        // --- 2. Helper Components ---
        
        const Icon = ({ name, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide && iconRef.current) {
                    window.lucide.createIcons({
                        attrs: { class: className },
                        name: name,
                        parentElement: iconRef.current
                    });
                }
            }, [name, className]);
            return <span ref={iconRef} className="inline-block" />;
        };

        const LoadingScreen = ({ lang }) => {
            const [msgIndex, setMsgIndex] = useState(0);
            const messages = {
                ko: ["MBTI ì„±í–¥ ë¶„ì„ ì¤‘...", "ë°”ì´ì˜¤ë¦¬ë“¬ ë°ì´í„° ì—°ì‚° ì¤‘...", "í–‰ë™ê²½ì œí•™ ë©”ì»¤ë‹ˆì¦˜ ë¶„ì„ ì¤‘...", "ì¸ì§€ì  íŒë‹¨ í¸í–¥ í™•ì¸ ì¤‘...", "ë‹¹ì‹ ì„ ìœ„í•œ ì™„ë²½í•œ í•œ ì” ì¤€ë¹„ ì¤‘..."],
                en: ["Analyzing MBTI Archetype...", "Calculating Biorhythm Data...", "Analyzing Behavioral Economics...", "Checking Cognitive Bias...", "Pouring Your Perfect Drink..."]
            };

            useEffect(() => {
                const interval = setInterval(() => {
                    setMsgIndex(prev => (prev + 1) % messages[lang].length);
                }, 600); 
                return () => clearInterval(interval);
            }, [lang]);

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center animate-in fade-in">
                    <div className="relative mb-10">
                        <div className="absolute inset-0 bg-teal-500 rounded-full blur-xl opacity-20 animate-pulse"></div>
                        <div className="relative p-6 bg-white dark:bg-slate-800 rounded-full shadow-2xl border border-teal-100 dark:border-slate-700">
                            <Icon name="loader-2" className="w-12 h-12 text-teal-600 dark:text-teal-400 animate-spin" />
                        </div>
                    </div>
                    <h3 className="text-xl font-bold text-slate-800 dark:text-slate-200 mb-2 min-h-[28px]">
                        {messages[lang][msgIndex]}
                    </h3>
                    <div className="w-64 h-2 bg-slate-200 dark:bg-slate-700 rounded-full mt-4 overflow-hidden">
                        <div className="h-full bg-teal-600 animate-progress rounded-full"></div>
                    </div>
                </div>
            );
        };

        const BioIndicator = ({ label, value, icon }) => {
            const isWorst = value < 30;
            const isBest = value > 70;
            const colorClass = isWorst ? 'text-red-500' : (isBest ? 'text-blue-500' : 'text-teal-600');
            
            return (
                <div className="flex flex-col items-center p-4 glass-morphism rounded-2xl shadow-sm">
                    <Icon name={icon} className={`mb-2 ${colorClass}`} />
                    <span className="text-xs text-slate-500 dark:text-slate-400 mb-1">{label}</span>
                    <span className={`text-xl font-bold ${colorClass}`}>{value}%</span>
                </div>
            );
        };

        // --- 3. Modals ---

        const PriceCheckModal = ({ isOpen, onClose, result, lang }) => {
            if (!isOpen || !result) return null;

            const t = TEXT[lang];
            const whiskeyName = lang === 'ko' ? result.whiskey.name : result.whiskey.nameEn;
            const whiskeyAge = result.whiskey.age;
            const variants = result.whiskey.variants || [];
            const priceRange = result.whiskey.priceRangeKrw;

            const formattedPrice = lang === 'ko' 
                ? priceRange || `${result.whiskey.priceKrw.toLocaleString()}ì›` 
                : `$${result.whiskey.priceUsd} USD`;

            const handleSearch = (platform) => {
                let url = "";
                const queryPrice = encodeURIComponent(whiskeyName + (lang === 'ko' ? " ê°€ê²©" : " price"));
                const queryReview = encodeURIComponent(whiskeyName + (lang === 'ko' ? " ë¦¬ë·°" : " review"));
                
                if (platform === 'youtube') {
                    url = `https://www.youtube.com/results?search_query=${queryReview}`;
                } else if (platform === 'blog') {
                    if (lang === 'ko') {
                         url = `https://search.naver.com/search.naver?where=blog&query=${queryPrice}`;
                    } else {
                         url = `https://www.google.com/search?q=${queryReview}`;
                    }
                }
                window.open(url, '_blank');
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md animate-in fade-in duration-200">
                    <div className="w-full max-w-sm bg-white dark:bg-slate-900 rounded-2xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800">
                        <div className="p-6 text-center">
                            <h3 className="text-lg font-bold text-slate-900 dark:text-white mb-2">{t.popup_title}</h3>
                            <p className="text-sm text-slate-500 dark:text-slate-400 mb-6">{t.popup_desc}</p>
                            
                            <div className="mb-6 bg-teal-50 dark:bg-teal-900/30 rounded-xl overflow-hidden">
                                <div className="p-3 bg-teal-100 dark:bg-teal-900/50">
                                    <span className="block text-xs font-bold text-teal-700 dark:text-teal-300">{t.price_label}</span>
                                </div>
                                <div className="p-2 space-y-1">
                                    {variants.map((v, i) => (
                                        <div key={i} className="flex justify-between items-center px-4 py-2 hover:bg-white/50 dark:hover:bg-black/20 rounded-lg border-b border-dashed border-slate-200 dark:border-slate-700 last:border-0">
                                            <span className="text-sm font-medium text-slate-600 dark:text-slate-400">
                                                {whiskeyAge !== 'NAS' ? whiskeyAge : ''} {v.vol}
                                            </span>
                                            <span className="text-lg font-black text-slate-900 dark:text-white">
                                                {lang === 'ko' 
                                                    ? `${v.price.toLocaleString()}ì›` 
                                                    : `$${Math.round(v.price / 1350)}`
                                                }
                                            </span>
                                        </div>
                                    ))}
                                    {variants.length === 0 && (
                                        <div className="py-4 text-slate-500">
                                            {formattedPrice} (700ml)
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="space-y-3">
                                <button onClick={() => handleSearch('youtube')} className="w-full py-4 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-colors shadow-sm">
                                    <Icon name="youtube" className="w-5 h-5" />
                                    {t.search_youtube}
                                </button>
                                <button onClick={() => handleSearch('blog')} className={`w-full py-4 px-4 ${lang === 'ko' ? 'bg-[#03C75A] hover:bg-[#02b351]' : 'bg-blue-600 hover:bg-blue-700'} text-white rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-colors shadow-sm`}>
                                    <Icon name={lang === 'ko' ? 'book-open' : 'search'} className="w-5 h-5" />
                                    {t.search_blog}
                                </button>
                            </div>
                        </div>
                        <div className="p-4 border-t border-slate-100 dark:border-slate-800">
                            <button onClick={onClose} className="w-full py-3 text-slate-500 dark:text-slate-400 font-bold text-sm hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors">
                                {t.close_btn}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const CalendarModal = ({ isOpen, onClose, onSelect, selectedDate, lang }) => {
            if (!isOpen) return null;
            
            const [currentYear, setCurrentYear] = useState(selectedDate.getFullYear());
            const [currentMonth, setCurrentMonth] = useState(selectedDate.getMonth());

            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);
            const weekDays = lang === 'ko' 
                ? ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '] 
                : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                    <div className="w-full max-w-sm overflow-hidden bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800">
                        <div className="p-4 teal-gradient text-white flex justify-between items-center">
                            <button onClick={() => setCurrentMonth(m => m === 0 ? 11 : m - 1)}><Icon name="chevron-left" /></button>
                            <h3 className="text-lg font-bold">
                                {currentYear}{lang === 'ko' ? 'ë…„' : '.'} {currentMonth + 1}{lang === 'ko' ? 'ì›”' : ''}
                            </h3>
                            <button onClick={() => setCurrentMonth(m => m === 11 ? 0 : m + 1)}><Icon name="chevron-right" /></button>
                        </div>
                        <div className="p-4">
                            <div className="grid grid-cols-7 gap-1 text-center text-xs font-semibold text-slate-400 mb-2">
                                {weekDays.map(d => <div key={d}>{d}</div>)}
                            </div>
                            <div className="grid grid-cols-7 gap-1">
                                {Array(firstDay).fill(null).map((_, i) => <div key={`empty-${i}`} />)}
                                {days.map(d => {
                                    const isToday = selectedDate.getDate() === d && selectedDate.getMonth() === currentMonth && selectedDate.getFullYear() === currentYear;
                                    return (
                                        <button 
                                            key={d}
                                            onClick={() => {
                                                onSelect(new Date(currentYear, currentMonth, d));
                                                onClose();
                                            }}
                                            className={`h-10 rounded-lg flex items-center justify-center text-sm transition-colors ${isToday ? 'bg-teal-600 text-white font-bold' : 'hover:bg-teal-100 dark:hover:bg-teal-900/30 text-slate-700 dark:text-slate-300'}`}
                                        >
                                            {d}
                                        </button>
                                    );
                                })}
                            </div>
                            <button onClick={onClose} className="w-full mt-4 py-2 text-sm font-medium text-teal-600 dark:text-teal-400 border border-teal-600/20 rounded-xl hover:bg-teal-50 dark:hover:bg-teal-900/20">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 4. Main App Component ---

        const App = () => {
            const [lang, setLang] = useState('ko'); 
            const [step, setStep] = useState(1);
            const [mbti, setMbti] = useState('INTJ');
            const [selectedMoods, setSelectedMoods] = useState([]);
            // Initialize with ID 1 (Under 50k)
            const [selectedPriceRange, setSelectedPriceRange] = useState(1); 
            const [baseDate, setBaseDate] = useState(new Date());
            const [isCalendarOpen, setIsCalendarOpen] = useState(false);
            const [isLoading, setIsLoading] = useState(false);
            const [isPriceModalOpen, setIsPriceModalOpen] = useState(false);
            
            const [isDarkMode, setIsDarkMode] = useState(() => {
                if (typeof window !== 'undefined') {
                    const savedTheme = localStorage.getItem('whiskey_theme');
                    if (savedTheme) {
                        return savedTheme === 'dark';
                    }
                    return window.matchMedia('(prefers-color-scheme: dark)').matches;
                }
                return false;
            });
            const [result, setResult] = useState(null);

            useEffect(() => {
                const root = document.documentElement;
                if (isDarkMode) {
                    root.classList.add('dark');
                    localStorage.setItem('whiskey_theme', 'dark');
                } else {
                    root.classList.remove('dark');
                    localStorage.setItem('whiskey_theme', 'light');
                }
            }, [isDarkMode]);

            const t = TEXT[lang];

            const handleMoodClick = (moodId) => {
                const moodObj = MOODS.find(m => m.id === moodId);
                let newList = [...selectedMoods];

                if (newList.includes(moodId)) {
                    newList = newList.filter(id => id !== moodId);
                } else {
                    if (newList.length >= 3) return;
                    newList = newList.filter(id => !moodObj.conflicts.includes(id));
                    newList.push(moodId);
                }
                setSelectedMoods(newList);
            };

            const calculateBiorhythm = (date, mbtiString) => {
                const mbtiHash = mbtiString.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
                const seed = date.getTime() + (mbtiHash * 100000);
                const calculate = (period) => Math.sin((seed / (24 * 60 * 60 * 1000) / period) * 2 * Math.PI);
                return {
                    physical: Math.round(calculate(23) * 50 + 50),
                    emotional: Math.round(calculate(28) * 50 + 50),
                    intellectual: Math.round(calculate(33) * 50 + 50)
                };
            };

            const runCuration = () => {
                setIsLoading(true);
                const bio = calculateBiorhythm(baseDate, mbti);
                const avgBio = (bio.physical + bio.emotional + bio.intellectual) / 3;
                let abvTarget = "Standard"; 
                if (avgBio > 65) abvTarget = "High"; 
                if (avgBio < 35) abvTarget = "Low"; 

                const priceRange = PRICE_RANGES.find(r => r.id === selectedPriceRange);
                let availableWhiskies = SPIRITS_DB.filter(w => w.priceKrw >= priceRange.min && w.priceKrw <= priceRange.max);
                
                if (availableWhiskies.length === 0) {
                    availableWhiskies = SPIRITS_DB;
                }

                const scoredWhiskeys = availableWhiskies.map(w => {
                    let score = 0;
                    
                    // 1. Price check
                    if (w.priceKrw < priceRange.min || w.priceKrw > priceRange.max) {
                        score -= 5000;
                    }
                    
                    // 2. Exact Archetype Match Bonus
                    if (w.archetype.includes(mbti)) score += 300;

                    // 3. Dynamic Trait Scoring (E/I, S/N, T/F, J/P)
                    const userTraits = mbti.split('');
                    userTraits.forEach(trait => {
                        const preferredTags = MBTI_TRAIT_PREFS[trait] || [];
                        w.tags.forEach(tag => {
                            if (preferredTags.includes(tag)) {
                                score += 60; 
                            }
                        });
                    });

                    // 4. Mood Match Scoring
                    selectedMoods.forEach(moodId => {
                        const moodData = MOODS.find(m => m.id === moodId);
                        w.tags.forEach(tag => {
                            if (moodData.flavorProfile.includes(tag)) {
                                score += 150;
                            }
                        });
                    });
                    
                    // 5. ABV Match based on Biorhythm
                    if (abvTarget === "High") {
                        if (w.abv >= 50) score += 200; else score -= 100;
                    } else if (abvTarget === "Low") {
                        if (w.abv <= 43) score += 200; else if (w.abv >= 50) score -= 150;
                    } else {
                        if (w.abv >= 40 && w.abv < 50) score += 100;
                    }
                    
                    return { ...w, totalScore: score };
                }).sort((a, b) => b.totalScore - a.totalScore);

                const topWhiskey = scoredWhiskeys[0];
                const analysis = ANALYSIS_LOGIC.generateReport(mbti, selectedMoods, lang);

                let label = "Neutral";
                if (topWhiskey.totalScore >= 800) label = "Best";
                else if (topWhiskey.totalScore >= 500) label = "Good";
                else if (topWhiskey.totalScore < 100) label = "Worst";
                else if (topWhiskey.totalScore < 300) label = "Bad";

                setTimeout(() => {
                    setResult({
                        whiskey: topWhiskey,
                        biorhythm: bio,
                        label: label,
                        abvTarget: abvTarget,
                        analysis: analysis
                    });
                    setStep(4);
                    setIsLoading(false);
                }, 3000);
            };

            // NEW: Run Completely Random Curation
            const runRandomCuration = () => {
                setIsLoading(true);
                
                // 1. Pick a completely random MBTI from the valid types array
                const randomGroup = MBTI_GROUPS[Math.floor(Math.random() * MBTI_GROUPS.length)];
                const randomMbti = randomGroup.types[Math.floor(Math.random() * randomGroup.types.length)];
                
                // 2. Pick a completely random Mood
                const randomMood = MOODS[Math.floor(Math.random() * MOODS.length)].id;
                
                // 3. Pick a completely random Spirit from the database
                const randomSpirit = SPIRITS_DB[Math.floor(Math.random() * SPIRITS_DB.length)];
                
                // Set state so UI reflects the random choices if the user goes back
                setMbti(randomMbti);
                setSelectedMoods([randomMood]);
                
                const bio = calculateBiorhythm(baseDate, randomMbti);
                // We use the new random values directly for the report to ensure sync
                const analysis = ANALYSIS_LOGIC.generateReport(randomMbti, [randomMood], lang);
                
                setTimeout(() => {
                    setResult({
                        whiskey: randomSpirit,
                        biorhythm: bio,
                        label: "Surprise", // Special label for random pick
                        abvTarget: "Any",
                        analysis: analysis
                    });
                    setStep(4);
                    setIsLoading(false);
                }, 3000);
            };

            const resultText = useMemo(() => {
                if (!result) return null;
                const topWhiskey = result.whiskey;
                const introPhrases = {
                    ko: ["ê²°ë¡ ì ìœ¼ë¡œ ë§ì”€ë“œë¦¬ë©´,", "ë°ì´í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì„ íƒ,", "ì „ë¬¸ê°€ì˜ ê´€ì ì—ì„œ ë³¸ë‹¤ë©´,", "ë‹¹ì‹ ì˜ ë¦¬ë“¬ì´ ì›í•˜ê³  ìˆëŠ” ê²ƒì€,"],
                    en: ["In conclusion,", "The data points to one choice,", "From an expert's perspective,", "Your rhythm desires this,"]
                };
                const introIndex = topWhiskey.name.length % 4;
                const intro = introPhrases[lang][introIndex];

                const moodString = selectedMoods.map(m => {
                   const mood = MOODS.find(md => md.id === m);
                   return mood ? mood.label[lang] : ""; 
                }).join(', ');
                
                const summary = lang === 'ko'
                    ? `${mbti} ì„±í–¥ì˜ ë‚´ë©´ì  íƒêµ¬ì™€ ì˜¤ëŠ˜ì˜ ${moodString} ê°ì •ì„ ì™„ë²½í•˜ê²Œ ë³´ì™„í•˜ê¸° ìœ„í•´ ${topWhiskey.style} ìŠ¤íƒ€ì¼ì´ ë‹¹ì‹ ì˜ ì„ íƒì´ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.`
                    : `${topWhiskey.style} style perfectly complements your ${mbti} introspective nature and today's feeling of ${moodString}.`;

                return { intro, summary };
            }, [result, lang, mbti, selectedMoods]);

            const handleGoogleSearch = () => {
                if (!result) return;
                const query = encodeURIComponent(lang === 'ko' ? `${result.whiskey.name} ê°€ê²©` : `${result.whiskey.nameEn} price`);
                window.open(`https://www.google.com/search?q=${query}`, '_blank');
            };

            const handleOpenPriceModal = () => {
                setIsPriceModalOpen(true);
            };

            if (isLoading) {
                return <LoadingScreen lang={lang} />;
            }

            return (
                <div className="min-h-screen flex flex-col items-center p-6 pb-24 max-w-2xl mx-auto transition-colors duration-300">
                    {/* Header */}
                    <header className="w-full flex justify-between items-center mb-8">
                        <div className="flex items-center gap-2">
                            <div className="p-2 bg-teal-600 rounded-xl text-white">
                                <Icon name="wine" className="w-5 h-5" />
                            </div>
                            <h1 className="text-xl font-bold tracking-tight text-slate-900 dark:text-white">
                                {t.title}
                            </h1>
                        </div>
                        <div className="flex gap-2">
                            <button 
                                onClick={() => setLang(l => l === 'ko' ? 'en' : 'ko')} 
                                className="px-3 py-1.5 text-xs font-bold rounded-full border border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors"
                            >
                                {lang === 'ko' ? 'KR' : 'EN'}
                            </button>
                            <button onClick={() => setIsDarkMode(!isDarkMode)} className="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-600 dark:text-slate-300">
                                <Icon name={isDarkMode ? "moon" : "sun"} className={`w-5 h-5 ${isDarkMode ? 'text-yellow-400 fill-current' : 'text-amber-500 fill-current'}`} />
                            </button>
                        </div>
                    </header>

                    {/* Step 1: MBTI & Date */}
                    {step === 1 && (
                        <div className="w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                            <section>
                                <h2 className="text-2xl font-extrabold mb-6 text-slate-900 dark:text-white">{t.step1_title}</h2>
                                <div className="space-y-6">
                                    {MBTI_GROUPS.map((group) => (
                                        <div key={group.key} className="space-y-2">
                                            <h3 className={`text-sm font-bold ${group.color} uppercase tracking-wider pl-1`}>
                                                {group.label[lang]}
                                            </h3>
                                            <div className="grid grid-cols-4 gap-2">
                                                {group.types.map(type => (
                                                    <button 
                                                        key={type}
                                                        onClick={() => setMbti(type)}
                                                        className={`py-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-1 ${
                                                            mbti === type 
                                                            ? 'border-teal-600 bg-teal-50 dark:bg-teal-900/30 text-teal-700 dark:text-teal-400 ring-2 ring-teal-600/20' 
                                                            : 'border-transparent bg-white dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700'
                                                        } shadow-sm`}
                                                    >
                                                        <span className="font-bold text-sm">{type}</span>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            <section>
                                <h2 className="text-2xl font-extrabold mb-4 text-slate-900 dark:text-white">{t.step1_date}</h2>
                                <button 
                                    onClick={() => setIsCalendarOpen(true)}
                                    className="w-full p-5 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-between hover:bg-teal-50 dark:hover:bg-teal-900/10 transition-colors border border-slate-100 dark:border-slate-700 shadow-sm group"
                                >
                                    <div className="flex items-center gap-4">
                                        <div className="p-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-teal-600">
                                            <Icon name="calendar" />
                                        </div>
                                        <span className="font-bold text-lg text-slate-800 dark:text-slate-200">
                                            {baseDate.toLocaleDateString(lang === 'ko' ? 'ko-KR' : 'en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                                        </span>
                                    </div>
                                    <Icon name="chevron-right" className="text-slate-400 group-hover:translate-x-1 transition-transform" />
                                </button>
                            </section>

                            <div className="flex flex-col gap-3">
                                <button onClick={() => setStep(2)} className="w-full py-4 rounded-2xl bg-teal-600 text-white font-bold text-lg hover:bg-teal-700 transition-all shadow-lg shadow-teal-600/30">
                                    {t.step_next}
                                </button>
                                <button onClick={runRandomCuration} className="w-full py-4 rounded-2xl bg-slate-800 dark:bg-slate-200 text-white dark:text-slate-900 font-bold text-lg hover:scale-[1.02] transition-transform shadow-lg">
                                    {t.random_btn}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Step 2: Mood Selection */}
                    {step === 2 && (
                        <div className="w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                            <header className="flex flex-col gap-1">
                                <button onClick={() => setStep(1)} className="self-start text-slate-400 hover:text-slate-600 mb-2">
                                    <Icon name="arrow-left" />
                                </button>
                                <h2 className="text-2xl font-extrabold text-slate-900 dark:text-white">{t.step2_title}</h2>
                                <p className="text-slate-500 dark:text-slate-400 text-sm">{t.step2_sub}</p>
                            </header>
                            
                            <div className="grid grid-cols-1 gap-3">
                                {MOODS.map(mood => (
                                    <button 
                                        key={mood.id}
                                        onClick={() => handleMoodClick(mood.id)}
                                        className={`p-4 rounded-2xl border-2 flex flex-row items-center gap-4 transition-all text-left ${
                                            selectedMoods.includes(mood.id) 
                                            ? 'border-teal-600 bg-teal-50 dark:bg-teal-900/30 shadow-md ring-1 ring-teal-600/30' 
                                            : 'border-transparent bg-white dark:bg-slate-800 shadow-sm'
                                        }`}
                                    >
                                        <div className={`p-3 rounded-full bg-white dark:bg-slate-700 shadow-sm shrink-0 relative w-14 h-14 flex items-center justify-center`}>
                                            <span className="text-3xl">{mood.emoji}</span>
                                        </div>
                                        <span className={`text-base font-bold flex-1 ${selectedMoods.includes(mood.id) ? 'text-teal-900 dark:text-teal-100' : 'text-slate-600 dark:text-slate-400'}`}>
                                            {mood.desc[lang]}
                                        </span>
                                    </button>
                                ))}
                            </div>

                            <div className="flex flex-col gap-3">
                                <button 
                                    onClick={() => setStep(3)} 
                                    disabled={selectedMoods.length === 0}
                                    className={`w-full py-4 rounded-2xl bg-teal-600 text-white font-bold text-lg shadow-xl shadow-teal-600/30 ${selectedMoods.length === 0 ? 'opacity-50 grayscale cursor-not-allowed' : 'hover:bg-teal-700'}`}
                                >
                                    {t.step_next}
                                </button>
                                <button 
                                    onClick={() => setStep(1)}
                                    className="w-full py-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 font-medium text-sm transition-colors"
                                >
                                    {t.step_prev}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Step 3: Price Selection */}
                    {step === 3 && (
                        <div className="w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                            <header className="flex flex-col gap-1">
                                <button onClick={() => setStep(2)} className="self-start text-slate-400 hover:text-slate-600 mb-2">
                                    <Icon name="arrow-left" />
                                </button>
                                <h2 className="text-2xl font-extrabold text-slate-900 dark:text-white">{t.step3_title}</h2>
                            </header>
                            
                            <div className="grid grid-cols-1 gap-3">
                                {PRICE_RANGES.map(range => (
                                    <button 
                                        key={range.id}
                                        onClick={() => setSelectedPriceRange(range.id)}
                                        className={`p-5 rounded-2xl border-2 flex items-center justify-between transition-all ${
                                            selectedPriceRange === range.id 
                                            ? 'border-teal-600 bg-teal-50 dark:bg-teal-900/30 shadow-md ring-1 ring-teal-600/30' 
                                            : 'border-transparent bg-white dark:bg-slate-800 shadow-sm'
                                        }`}
                                    >
                                        <div className="flex items-center gap-3">
                                            <div className={`p-2 rounded-full ${selectedPriceRange === range.id ? 'bg-teal-100 dark:bg-teal-800 text-teal-600 dark:text-teal-200' : 'bg-slate-100 dark:bg-slate-700 text-slate-400'}`}>
                                                <Icon name="credit-card" className="w-5 h-5" />
                                            </div>
                                            <span className={`font-bold text-lg ${selectedPriceRange === range.id ? 'text-teal-900 dark:text-teal-100' : 'text-slate-600 dark:text-slate-400'}`}>
                                                {range.label[lang]}
                                            </span>
                                        </div>
                                        {selectedPriceRange === range.id && <Icon name="check" className="text-teal-600 dark:text-teal-400" />}
                                    </button>
                                ))}
                            </div>

                            <div className="flex flex-col gap-3">
                                <button 
                                    onClick={runCuration} 
                                    className="w-full py-4 rounded-2xl amber-button font-bold text-lg shadow-xl shadow-amber-500/20"
                                >
                                    {t.run_btn}
                                </button>
                                <button 
                                    onClick={() => setStep(2)}
                                    className="w-full py-3 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 font-medium text-sm transition-colors"
                                >
                                    {t.step_prev}
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Result Page */}
                    {step === 4 && result && (
                        <div className="w-full space-y-8 animate-in zoom-in-95 duration-700">
                            {/* Biorhythm Section */}
                            <section className="text-center">
                                <h3 className="text-xs font-bold text-teal-600 dark:text-teal-400 mb-6 uppercase tracking-widest border-b border-teal-100 dark:border-teal-900 pb-2 inline-block px-4">
                                    {t.result_bio}
                                </h3>
                                <div className="grid grid-cols-3 gap-3">
                                    <BioIndicator label={lang === 'ko' ? "ì‹ ì²´" : "Physical"} value={result.biorhythm.physical} icon="activity" />
                                    <BioIndicator label={lang === 'ko' ? "ê°ì„±" : "Emotion"} value={result.biorhythm.emotional} icon="heart" />
                                    <BioIndicator label={lang === 'ko' ? "ì§€ì„±" : "Intellect"} value={result.biorhythm.intellectual} icon="brain" />
                                </div>
                                <p className="mt-4 text-xs font-medium text-slate-400 dark:text-slate-500">
                                    {t.bio_rec} <strong className="text-teal-600 dark:text-teal-400 uppercase">{result.abvTarget} ABV</strong>
                                </p>
                            </section>

                            {/* Main Recommendation Card */}
                            <section className="relative group perspective-1000">
                                <div className="absolute -inset-1 bg-gradient-to-r from-teal-500 to-amber-500 rounded-3xl blur opacity-20 group-hover:opacity-30 transition duration-1000"></div>
                                <div className="relative p-8 glass-morphism rounded-3xl overflow-hidden shadow-2xl">
                                    <div className="flex flex-col w-full">
                                        <div className="flex justify-between items-start mb-6">
                                            <span className={`px-4 py-1.5 rounded-full text-xs font-black uppercase tracking-wider shadow-sm ${
                                                result.label === 'Surprise' ? 'bg-indigo-600 text-white' : 
                                                result.label === 'Best' ? 'bg-blue-600 text-white' : 
                                                result.label === 'Good' ? 'bg-teal-600 text-white' : 'bg-slate-500 text-white'
                                            }`}>
                                                {result.label === 'Surprise' ? (lang === 'ko' ? 'ìš´ëª…ì  ë§Œë‚¨ ğŸ²' : 'Lucky Pick ğŸ²') : `${t.match_label}: ${result.label}`}
                                            </span>
                                            <span className="text-slate-500 dark:text-slate-400 font-mono text-sm font-bold bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-md">
                                                {result.whiskey.abv}% ABV
                                            </span>
                                        </div>
                                        
                                        <h2 className="text-4xl font-black mb-2 leading-tight text-slate-900 dark:text-white">
                                            {lang === 'ko' ? result.whiskey.name : result.whiskey.nameEn}
                                        </h2>
                                        <p className="text-teal-600 dark:text-teal-400 font-bold mb-6 text-lg">
                                            {result.whiskey.style}
                                        </p>
                                        
                                        <div className="flex flex-wrap gap-2 mb-8">
                                            {result.whiskey.tags.map(tag => (
                                                <span key={tag} className="px-3 py-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-400 uppercase tracking-wide">
                                                    #{tag}
                                                </span>
                                            ))}
                                        </div>
                                        
                                        <p className="text-slate-700 dark:text-slate-300 leading-relaxed mb-8 font-medium">
                                            {lang === 'ko' ? result.whiskey.desc : result.whiskey.descEn}
                                        </p>

                                        {/* Price Tag - Now triggers Modal */}
                                        <div className="flex items-center gap-2 mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-100 dark:border-amber-800/30 cursor-pointer hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors group" onClick={handleOpenPriceModal}>
                                            <div className="p-2 bg-amber-100 dark:bg-amber-800/50 rounded-full text-amber-600 dark:text-amber-400">
                                                <Icon name="tag" className="w-4 h-4" />
                                            </div>
                                            <div className="flex-1 flex justify-between items-center">
                                                <div>
                                                    <p className="text-xs text-amber-800 dark:text-amber-200 font-bold uppercase opacity-70">
                                                        {t.price_label}
                                                    </p>
                                                    <p className="text-lg font-black text-amber-900 dark:text-amber-100">
                                                        {lang === 'ko' ? (result.whiskey.priceRangeKrw || result.whiskey.priceKrw.toLocaleString() + "ì›") : `$${result.whiskey.priceUsd} USD`}
                                                    </p>
                                                </div>
                                                <div className="flex items-center gap-1 text-xs text-amber-700 dark:text-amber-300 font-semibold group-hover:underline">
                                                    {t.price_check} <Icon name="search" className="w-3 h-3" />
                                                </div>
                                            </div>
                                        </div>

                                        <div className="p-5 bg-teal-50 dark:bg-teal-900/20 rounded-2xl border border-teal-100 dark:border-teal-900/50">
                                            <p className="text-sm font-bold text-teal-800 dark:text-teal-200 mb-2">{resultText.intro}</p>
                                            <p className="text-sm text-teal-700 dark:text-teal-300 leading-relaxed">
                                                {resultText.summary}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* Action Button - Direct Google Search */}
                            <button 
                                onClick={handleGoogleSearch}
                                className="w-full py-4 rounded-2xl bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold text-lg hover:scale-[1.02] transition-transform flex items-center justify-center gap-2 shadow-lg"
                            >
                                <Icon name="shopping-cart" />
                                {t.buy_btn}
                            </button>

                            {/* Behavioral Economics & Neurobiology Report */}
                            <section className="space-y-4 pt-4">
                                <h3 className="text-lg font-bold flex items-center gap-2 text-slate-800 dark:text-slate-200">
                                    <Icon name="microscope" className="text-teal-600" />
                                    {t.report_title}
                                </h3>
                                <div className="space-y-3">
                                    <div className="p-6 bg-white dark:bg-slate-900 rounded-2xl border-l-4 border-teal-600 shadow-sm">
                                        <h4 className="font-bold mb-2 text-slate-900 dark:text-white text-sm flex items-center gap-2">
                                            <Icon name="brain" className="w-4 h-4 text-teal-600" />
                                            {result.analysis?.judgmentTitle}
                                        </h4>
                                        <p className="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                                            {result.analysis?.judgmentDesc}
                                        </p>
                                    </div>
                                    <div className="p-6 bg-white dark:bg-slate-900 rounded-2xl border-l-4 border-amber-500 shadow-sm">
                                        <h4 className="font-bold mb-2 text-slate-900 dark:text-white text-sm flex items-center gap-2">
                                            <Icon name="footprints" className="w-4 h-4 text-amber-500" />
                                            {result.analysis?.behaviorTitle}
                                        </h4>
                                        <p className="text-sm text-slate-600 dark:text-slate-400 leading-relaxed">
                                            {result.analysis?.behaviorDesc}
                                        </p>
                                    </div>
                                </div>
                            </section>

                            <button onClick={() => setStep(1)} className="w-full py-4 rounded-2xl border-2 border-teal-600 text-teal-600 dark:text-teal-400 font-bold hover:bg-teal-50 dark:hover:bg-teal-900/20 transition-all">
                                {t.reset_btn}
                            </button>
                        </div>
                    )}

                    <PriceCheckModal 
                        isOpen={isPriceModalOpen} 
                        onClose={() => setIsPriceModalOpen(false)} 
                        result={result} 
                        lang={lang} 
                    />

                    <CalendarModal 
                        isOpen={isCalendarOpen} 
                        onClose={() => setIsCalendarOpen(false)} 
                        onSelect={setBaseDate} 
                        selectedDate={baseDate} 
                        lang={lang} 
                    />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
